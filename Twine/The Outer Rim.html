<!DOCTYPE html><html><head><title>The Outer Rim</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><style>.small-caps{text-transform:uppercase;font-size:70%;letter-spacing:.075em}#backstage .panel h2{margin:0}#backstage .panel h2 button{text-align:left;background:none;border:none;width:100%;font-weight:400;text-transform:uppercase;font-size:70%;letter-spacing:.075em;font-size:11px;padding:0 8px}#backstage .panel h2 button:before{content:"\25BA";display:inline-block;width:1.25em}#backstage .panel h2 button:hover{color:#495057}#backstage .panel.open h2 button:before{content:"\25BC"}
#backstage table.history td.actions{width:2.5em}#backstage table.history td.go{border-right:1px solid #000}
#backstage ul.tabs{list-style:none;margin:8px;padding:0;display:flex;border:1px solid #000;font-size:12px}#backstage ul.tabs li{flex-grow:1;border-right:1px solid #000;text-align:center}#backstage ul.tabs li:last-child{border-right:none}#backstage ul.tabs li button{color:#000;text-decoration:none;display:block;width:100%;height:28px;padding:8px;border:none;border-radius:0}#backstage ul.tabs li button.active{background:#000;color:#dee2e6}#backstage .tab-content{max-height:calc(100vh - $backstage-tab-height);overflow:auto}
.small-caps{text-transform:uppercase;font-size:70%;letter-spacing:.075em}body.backstage-visible #backdrop{justify-content:flex-start;max-width:67vw}#backstage{position:fixed;top:0;right:0;bottom:0;width:33vw;max-height:100vh;font-size:18px;background:#dee2e6;color:#000;transform:translateX(100%);box-shadow:inset 2px 0 3px rgba(0,0,0,.25);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu Cantarell,Helvetica Neue,sans-serif;font-size:80%}#backstage:before{content:"";position:absolute;z-index:2;top:calc(50% - 25px);right:calc(100% - 4px);height:50px;width:4px;background:#dee2e6}@media screen and (max-width:425px){#backstage{width:calc(100vw - 25px)}}#backstage.open{transform:none}#backstage .toggle-visibility{position:absolute;z-index:1;top:calc(50% - 25px);right:100%;width:25px;height:50px;padding:0;background:#dee2e6;color:#000;border:none;border-top-left-radius:25px;border-bottom-left-radius:25px;border-top-right-radius:0;border-bottom-right-radius:0;box-shadow:inset 2px 0 3px rgba(0,0,0,.25);font-size:18px}#backstage button{color:#000;background:transparent;padding:8px;border-radius:16px;border:1px solid #000}#backstage button:hover{background:#e9ecef}#backstage p{padding:0 8px}#backstage li,#backstage p,#backstage td{font-size:12px}#backstage input,#backstage select{color:#000;background:transparent;border:1px solid #000;padding:8px}#backstage table{background:transparent;table-layout:fixed;border-collapse:collapse;width:calc(100% - 16px);margin:8px}#backstage th{text-align:left}#backstage td{position:relative;border:1px solid #000;padding:8px;vertical-align:top}#backstage td:first-child{border-left:none}#backstage td:last-child{border-right:none}#backstage td button,#backstage td input{background:none;border:none;border-radius:0;position:absolute;top:0;left:0;bottom:0;width:100%;padding:8px}#backstage textarea{background:transparent;border:1px solid #000;color:#000;padding:8px;width:100%;height:7.75em}#backstage .block{display:block;margin:8px;width:calc(100% - 16px)}#backstage .disabled{color:#868e96}#backstage .indented-input{margin-left:calc(10em + 8px);font-size:12px}#backstage .input-group{display:flex;align-items:center}#backstage .input-group label:first-child{text-align:right;margin-right:8px;width:10em}#backstage .input-group input,#backstage .input-group select{flex-grow:1}#backstage .segmented-button{display:flex}#backstage .segmented-button button{border-left:none;border-radius:0;margin:0;flex-grow:1}#backstage .segmented-button button:first-child{border-left:1px solid #000;border-top-left-radius:16px;border-bottom-left-radius:16px}#backstage .segmented-button button:last-child{border-top-right-radius:16px;border-bottom-right-radius:16px}#backstage .segmented-button .fixed{flex-grow:0;min-width:24px}#backstage .tab-content{max-height:calc(100vh - 28px);overflow:auto}
.fade-in{opacity:0;animation:fade-in 1s ease-out forwards}.fade-out{animation:fade-in 1s ease-out reverse forwards}.skip-animation{animation-delay:0s!important}@keyframes fade-in{0%{opacity:0}to{opacity:1}}
#page .warnings{list-style-type:none;padding-left:0;margin-left:0}
.small-caps{text-transform:uppercase;font-size:70%;letter-spacing:.075em}#backdrop{min-height:100vh;align-items:center}#backdrop,#page{display:flex;justify-content:center}#page{flex-direction:column;width:40em;min-height:calc(100vh - 2em);max-width:calc(100vw - 2em);line-height:150%;margin:1em;padding:4em 4em 2em;position:relative}#page article{flex-grow:1;display:flex}#page article>:first-child{margin-top:0;width:100%}#page footer,#page header{display:flex}#page footer>div,#page header>div{flex-grow:1}#page footer p,#page header p{margin:.5em 0 0}#page footer .center,#page header .center{text-align:center}#page footer .right p,#page header .right p{text-align:right}#page header{margin-top:0}#page header.has-content{border-bottom:1px solid #000}#page header.has-content+article>article>div>p:first-child,#page header.has-content+article>div>p:first-child{margin-top:1em}#page footer{margin-bottom:0}#page footer.has-content{border-top:1px solid #000}#page hr{border:none}#page hr:after{content:"* \A0   * \A0   *";display:block;text-align:center}#page .error,#page .warning{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu Cantarell,Helvetica Neue,sans-serif;font-size:80%;background:#fff5f5;color:#c92a2a;padding:.5em;border-left:4px solid #ffa8a8;position:relative;margin-bottom:1em;overflow:auto}#page .error :first-child,#page .warning :first-child{margin-top:0}#page .error :last-child,#page .warning :last-child{margin-bottom:0}#page .error a,#page .warning a{color:#c92a2a}#page .warning{background:#fff9db;color:#e67700}#page .warning a{color:#e67700}#page .fork p{display:flex;flex-direction:column;width:100%}#page .fork p a{display:block;flex-grow:1;text-align:center;padding:.5em}@media screen and (max-width:768px){#page{margin:0;width:100vw;max-width:100vw;min-height:100vh;padding:1em}}#spinner{position:absolute;bottom:0;right:0;opacity:0;transition:opacity .25s ease-in-out;pointer-events:none}#spinner.visible{display:block;opacity:1}
*{box-sizing:border-box}body{margin:0;padding:0}img{max-width:100%;height:auto}input[type=text],select{padding:.25em}pre{white-space:pre-wrap}tw-storydata{display:none}</style></head><body><form id="cb-validation" action="javascript:void(0)"><button id="cb-validation-tester" hidden></button> <button id="cb-block-enter-key" hidden></button><div id="backdrop"><div id="page" aria-live="polite"><header><div class="left"></div><div class="center"></div><div class="right"></div></header><article></article><ul class="warnings"></ul><footer><div class="left"></div><div class="center"></div><div class="right"></div></footer><div id="spinner"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmlld0JveD0iMCAwIDEwMCAxMDAiPgogICAgPHJlY3QgeD0iMzEiIHk9IjE0IiB3aWR0aD0iMzgiIGhlaWdodD0iNzIiIHJ4PSI0IiBmaWxsPSJ3aGl0ZSIgLz4KICAgIDxjaXJjbGUgY3g9IjUwIiBjeT0iNTAiIHI9IjI4IiBmaWxsPSJ3aGl0ZSIgLz4KCTxyZWN0IHg9IjM1IiB5PSIxOCIgd2lkdGg9IjMwIiBoZWlnaHQ9IjY0IiByeD0iNCIgZmlsbD0id2hpdGUiIHN0cm9rZS13aWR0aD0iMnB4IiBzdHJva2U9ImJsYWNrIiAvPgogICAgPGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iMjAiIHN0cm9rZT0iYmxhY2siIGZpbGw9IndoaXRlIiBzdHJva2Utd2lkdGg9IjJweCIgLz4KCTxsaW5lIHgxPSI1MCIgeTE9IjUwIiB4Mj0iNTAiIHkyPSIzNyIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIycHgiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+CiAgICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0KICAgICAgICAgICAgYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIgogICAgICAgICAgICBiZWdpbj0iMHMiCiAgICAgICAgICAgIGR1cj0iMjBzIgogICAgICAgICAgICB0eXBlPSJyb3RhdGUiCiAgICAgICAgICAgIGZyb209IjAgNTAgNTAiCiAgICAgICAgICAgIHRvPSIzNjAgNTAgNTAiCiAgICAgICAgICAgIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIgogICAgICAgIC8+Cgk8L2xpbmU+Cgk8bGluZSB4MT0iNTAiIHkxPSI1MCIgeDI9IjQyIiB5Mj0iNTAiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMnB4IiBzdHJva2UtbGluZWNhcD0icm91bmQiPgogICAgICAgIDxhbmltYXRlVHJhbnNmb3JtCiAgICAgICAgICAgIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIKICAgICAgICAgICAgYmVnaW49IjBzIgogICAgICAgICAgICBkdXI9IjEyMHMiCiAgICAgICAgICAgIHR5cGU9InJvdGF0ZSIKICAgICAgICAgICAgZnJvbT0iMCA1MCA1MCIKICAgICAgICAgICAgdG89IjM2MCA1MCA1MCIKICAgICAgICAgICAgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiCiAgICAgICAgLz4KCTwvbGluZT4KPC9zdmc+" width="40" height="40" alt=""></div></div></div></form><tw-storydata name="The Outer Rim" startnode="1" creator="Twine" creator-version="2.3.16" ifid="7604115D-1E45-4E62-AA63-C976A4FEAB40" zoom="0.6" format="Chapbook" format-version="1.2.1" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css"></style><script role="script" id="twine-user-script" type="text/twine-javascript"></script><tw-passagedata pid="1" name="Setup" tags="" position="418,1225" size="100,100">note_player_names:&quot;Change the names below to match the names of the people playing each of the characters.&quot;

player.birthday:&quot;Birthday Aaron&quot;
player.birthday_character:&quot;T&#39;arla Abeen&quot;
player.actor:&quot;Actor Matthew&quot;
player.actor_character:&quot;Dango Jett&quot;
player.bartender:&quot;Bartender Rob&quot;
player.technician:&quot;Technician Andy&quot;
player.shopkeeper:&quot;Shopkeeper Corey&quot;
player.guard:&quot;Security Maggie&quot;

note_customization:&quot;Feel free to change the names below if you want to customize your game. Note that these names also appear in the character profile packets. If you alter these names, make sure to also update them in the character packets.&quot;

npc.hr:&quot;Daniel Learner&quot;
npc.security_chat:&quot;Security Jerry&quot;
npc.security_prev:&quot;Security Charlene&quot;
npc.gang_leader_1:&quot;Gustavo \&quot;Eight Ball\&quot; Barajas&quot;
npc.gang_leader_2:&quot;Hector \&quot;Mad Dog\&quot; Carillo&quot;
npc.la_commissioner:&quot;Dale Serbinski&quot;
npc.birthday_admissions:&quot;Darryl Krakower&quot;
npc.kitchen_manager:&quot;Manager Fatima&quot;
npc.imagineer:&quot;Imagineer Aarush&quot;

note_passwords:&quot;You can change the passwords that unlock each portion of the game if you wish.&quot;

passwords.round1:&quot;Order66&quot;
passwords.round2:&quot;KesselRun&quot;
passwords.freeplay:&quot;ANewHope&quot;

note_variables:&quot;These are gameplay-critical variables that must be set at the start of each game. You should not need to edit these variables.&quot;

rounds:0
passwords.used.round1:false
passwords.used.round2:false

keys.master_key:false
keys.toy_key:false
keys.security_feeds:false
keys.feed_number:-1
keys.bottle:false
keys.emergency_exit:false
keys.car:false
keys.car_unlocked:false
keys.label:false
keys.upload:false
keys.shirt:false
keys.blood_smell:false
keys.drink_smell:false

--

{embed passage:&#39;Welcome&#39;}</tw-passagedata><tw-passagedata pid="2" name="Time Up" tags="" position="401,1075" size="100,100">config.footer.left:&quot;&quot;
config.footer.right:&quot;&quot;

--

[align center]
**You&#39;re all out of time!**
[continue]

Please take a moment to collect your notes, then rejoin the other investigators to discuss what you have discovered.

When you are instructed, you may [[continue your investigations-&gt;Welcome]].</tw-passagedata><tw-passagedata pid="3" name="Take Turn" tags="" position="285,1076" size="100,100">turns.current (_trackTurns &amp;&amp; passage.visits==1): turns.current+1
_timeUp: _trackTurns &amp;&amp; turns.current &gt; turns.max
config.body.transition.name (_timeUp): &quot;none&quot;

--

{embed passage:&#39;Show Turns&#39;}

[if _timeUp]
[JavaScript]
window.setTimeout(() =&gt; go(&#39;Time Up&#39;), 1);
[continue]</tw-passagedata><tw-passagedata pid="4" name="Invite Code" tags="" position="717,1225" size="100,100">inviteCode:&quot;&quot;
--

Please enter your invitation code below:

{text input for: &#39;inviteCode&#39;, required:true}

[[Submit-&gt;Validate Invite Code]]
</tw-passagedata><tw-passagedata pid="5" name="Validate Invite Code" tags="" position="893,1236" size="100,100">freeplay:inviteCode === passwords.freeplay

_round1:inviteCode === passwords.round1
_round2:inviteCode === passwords.round2
_round1_reused:passwords.used.round1 &amp;&amp; _round1 
_round2_reused:passwords.used.round2 &amp;&amp; _round2

_error_reused:_round1_reused || _round2_reused
_error_no_password:!(freeplay || _round1 || _round2)

_accepted:!(_error_reused || _error_no_password)

passwords.used.round1:passwords.used.round1 || _round1 
passwords.used.round2:passwords.used.round2 || _round2

turns.max (freeplay):0
rounds (_accepted):rounds+1

--

[if _error_reused]
You have already used this invite code. Would you like to [[try again-&gt;Invite Code]]?
[continue]

[if _error_no_password]
Unfortunately, this is not a valid invite code. Would you like to [[try again-&gt;Invite Code]]?
[continue]

[if _accepted]
Invite code accepted! Welcome to The Outer Rim.
[continue]

[if _accepted &amp;&amp; rounds === 1]
[[You may now enter the park.-&gt;Intro]] 
[continue]

[if _accepted &amp;&amp; rounds &gt; 1]
[[You may continue your investigation.-&gt;Entrance Path]] 
[continue]</tw-passagedata><tw-passagedata pid="6" name="Plaza" tags="" position="1225,1046" size="100,100">config.header.left:&quot;Plaza&quot;

--

{embed passage:&#39;Take Turn&#39;}

Battooine&#39;s main plaza is dominated by the Centennial Kestrel. A [[life-sized replica-&gt;Upper Plaza: Kestrel Ext]] of the iconic smuggling ship is parked outside the local spaceport, where it towers over the rest of the plaza. Guests wanting a closer look at the Kestrel can line up inside the [[open spaceport-&gt;Ride Line]] for their chance to take the famous spacecraft for a spin in the Outer Rim&#39;s premiere ride experience.

The rest of the plaza has been decorated to look like it has seen recent battle. Scorch marks dot the walls of [[Unkar&#39;s Antiquity Market-&gt;Market]], an exotic bazaar adorned with intricate curtains and draperies embroidered with alien designs. The impression is only slightly diminished by the [[security camera-&gt;Upper Plaza: Camera]] you spot embedded in the wall above the market&#39;s front door.

It looks like there used to be another building between the market and the Kestrel&#39;s landing pad, but it has collapsed in the fighting, leaving only a [[huge pile of rubble-&gt;Upper Plaza: Rubble]].

Behind you, a [[narrow, foliage-lined path-&gt;Entrance Path]] leads back towards the entrance gates.</tw-passagedata><tw-passagedata pid="7" name="Welcome" tags="" position="561,1173" size="100,100">turns.max:20
turns.current:0
freeplay:false

config.body.transition.name: &quot;crossfade&quot;

config.header.left:&quot;&quot;
config.header.right:&quot;&quot;

config.footer.left:&quot;_The Outer Rim_&quot;
config.footer.right:&quot;[[Reset-&gt;Verify Reset]]&quot;

--

**Welcome to the Outer Rim!**

**_Tuesday, November 12, 2019_**

For decades, fans of the blockbuster Star Fights film franchise have wished that they could step inside the world of their favorite movies. At the Outer Rim region of the Dizzyland California theme park, that wish has finally been granted.

Visitors to the Outer Rim are transported to the backwater jungle planet of Battooine, currently gripped in the deadly throes of a galactic civil war. Shop for out-of-this-world keepsakes at Unkar&#39;s Antiquity Market, grab a refreshing drink at Lolo&#39;s Cantina, and even take a joyride in in the Centennial Kestrel, the most iconic spaceship in all of Hollywood, all while interacting the most immersive cast of characters  of any theme park in the world.

With its enticing combination of adventure, nostalgia, and a fistful of plasma bolts, the Outer Rim is sure to excite and delight guests at Dizzyland California for decades to come.

At least, that was the hope. As of this morning, the Outer Rim may have put the park&#39;s entire reputation is at risk, due to the discovery of that most heinous of crimes... murder!

It seems several of the park&#39;s employees held an unauthorized social gathering after closing hours last night to celebrate a coworker&#39;s birthday. An abuse of park resources such as this would normally be handled with a discrete internal investigations and a well-placed suspension or two. Any hopes of keeping this indiscretion under wraps ended early this morning, however, when the cleaning staff found the bloody corpse of shift supervisor Richard Inglesias in the lounge of the Centennial Kestrel.

The crime scene has been locked down, much to the frustration of the fans who traveled hundreds of miles to visit Battooine and the executives who were looking forward to taking their money.

Now day is breaking and one thing has been made clear: no one is getting into (or out of) the Outer Rim until the murderer has been found.


***

To get started, please [[enter your invitation code-&gt;Invite Code]].
</tw-passagedata><tw-passagedata pid="8" name="Upper Plaza: Kestrel Ext" tags="" position="1277,644" size="100,100">{embed passage:&#39;Take Turn&#39;}

Although you&#39;ve seen it almost every day for months now, the sight of the Centennial Kestrel never fails to impress. Standing at over two stories tall on its landing pad, the ship towers over everything else in the Outer Rim.

The ship is an utterly convincing replica of the version used to film the Star Fights movies, down to the smallest of details. Every pipe, screw, nut, and greeble has been meticulously reproduced by the park&#39;s designers. When the park is open to guests, the ship is given additional life by the blinking lights on its hull and the small bursts of steam that occasionally outgas from its exhaust ports.

As the Outer Rim is still closed to visitors, most of these effects are currently disabled to save power. [[One small, flashing red light-&gt;Upper Plaza: Kestrel Camera]] is still visible on the Kestrel&#39;s undercarriage, however.

[[Explore the rest of the plaza.-&gt;Plaza]]</tw-passagedata><tw-passagedata pid="9" name="Upper Plaza: Camera" tags="" position="1061,781" size="100,100">{embed passage:&#39;Take Turn&#39;}

The blinking red light on the side of the camera informs you that it is indeed operational. Based on its angle, you&#39;d guess that this camera has a view of the spaceport doorway that leads to the line for the Centennial Kestrel ride.

[[Investigate the rest of the plaza.-&gt;Plaza]]</tw-passagedata><tw-passagedata pid="10" name="Upper Plaza: Rubble" tags="" position="1085,640" size="100,100">{embed passage:&#39;Take Turn&#39;}

The building that used to stand between Unkar&#39;s Antiquity Market and the Centennial Kestrel&#39;s landing pad has been reduced to a massive pile of rubble by the fighting that has wreaked havoc upon Battooine in recent weeks. Rather, that is the impression that the Outer Rim&#39;s set designers tried to impart.

You can&#39;t make out what the building was supposed to be before it was destroyed, but the [[pale brown bricks-&gt;Upper Plaza: Rubble Bricks]] that once comprised it now form a jumbled slope that reaches almost all the way to the roof of the market. A waist-high fence has been installed to prevent guests from attempting to climb up the rubble and injuring themselves.

[[Explore the rest of the plaza.-&gt;Plaza]]</tw-passagedata><tw-passagedata pid="11" name="Ride Line" tags="" position="2081,794" size="100,100">config.header.left:&quot;Ride Line&quot;

--

{embed passage:&#39;Take Turn&#39;}

The line to board the Centennial Kestrel twists through the narrow corridors of the Battooine spaceport, using multiple steep corners and double-backs to obscure the total length of the line from the waiting guests.

At one end of the line, [[the Outer Rim&#39;s main plaza-&gt;Plaza]] can be seen through the open doors of the spaceport&#39;s passenger entrance.

The line then winds through the simulated guts of the spaceport, past various forklifts, catwalks, and metallic crates of starship supplies. When the park is open, the waiting guests are entertained by animatronic robots that wave from the catwalks and videos that play on viewscreens along the walls. Some of the videos even feature famous actors reprising their roles from the Star Fights movies. Truly, the Walt Dizzy Corporation has spared no expense in their quest to transport guests to a faraway galaxy.

While it can take guests over an hour to traverse the full length of the line, it takes you less than a minute to reach [[the Kestrel&#39;s boarding ramp-&gt;Kestrel: Lounge]] now that the park is empty.

At the base of the ramp is a small station where a ride attendant can sit and make sure that the guests obey the Kestrel&#39;s strict two-in, two-out capacity policy. The station itself is little more than a stool and sign declaring that you must be at least 48&quot; tall to board the Centennial Kestrel. Set into the wall behind the station, though, is a drab metal door that leads to a [[service corridor-&gt;Service Corridor]].</tw-passagedata><tw-passagedata pid="12" name="Entrance Path" tags="" position="1229,1336" size="100,100">config.header.left:&quot;Entrance Path&quot;

config.footer.left: &quot;[[Return to Entrance-&gt;Entrance Path]]&quot;
config.footer.right:&quot;[[Out of time?-&gt;Verify Time Up]]&quot;

--

{embed passage:&#39;Show Turns&#39;}

You are flanked on either side by several single-story buildings designed to look like they have been built out of mud bricks by the planet&#39;s native inhabitants. Each is decorated in a mixture of real and artificial plant life, creating the impression of stepping into a jungle that is both familiar yet hauntingly alien.

On your right is [[Lolo&#39;s Cantina-&gt;Cantina]], an infamous hive of scum and villainy that happens to the only place in all of Dizzyland that you can get a proper drink. In front of the cantina is a small [[snack cart-&gt;Snack Cart]] for guests who need to grab something quick on the way to stand in line for their next ride.

To your left is an Imperial checkpoint where the port&#39;s occupying peacekeepers supposedly scan the crowd for smugglers and rebel agents. This impression is reinforced by the [[robotic guard-&gt;Lower Plaza: Camera]] leaning out of the building&#39;s facade. While the checkpoint&#39;s interior is not open to the public, you know that within its fantastical exterior lies the Outer Rim&#39;s very real [[security office-&gt;Security Office]].

Ahead of you the path opens up into a [[wide plaza-&gt;Plaza]], at the end of which you can see the object of every sci-fi fan&#39;s dreams, the most famous spaceship in all of pop culture and the site of last night&#39;s tragic murder, the Centennial Kestrel. 

While the Outer Rim sits quiet as a ghost town in front of you, you can hear the lively bustle of Dizzyland crowds coming from behind the massive [[entrance gates-&gt;Entrance Gates]] behind you.</tw-passagedata><tw-passagedata pid="13" name="Upper Plaza: Kestrel Camera" tags="" position="1316,790" size="100,100">{embed passage:&#39;Take Turn&#39;}

You squint to get a closer look at the flashing light, and you realize that it is part of a small security camera attached to the underside of the Kestrel. Based on its angle and position, you&#39;d guess that it is focused on the entrance to Unkar&#39;s Antiquity Market.

[[Upper Plaza: Kestrel Ext]]</tw-passagedata><tw-passagedata pid="14" name="Market" tags="" position="841,815" size="100,100">config.header.left:&quot;Unkar&#39;s Antiquity Market&quot;

--

{embed passage:&#39;Take Turn&#39;}

Unkar&#39;s Antiquity Market is the go-to shopping destination in the Outer Rim. Its small doorway belies the expansive nature of the store itself, which is styled after the  booths and twisting alleyways of an exotic foreign market. Tables stacked high with toys and memorabilia are surrounded by a [[maze-like array of clothes racks-&gt;Market: Clothes Racks]] stocked with dozens of designs of t-shirts, jackets, and novelty hats.

In the Star Fights fiction, Unkar&#39;s market is the place to turn to when you need to get your hands on some gray market starship parts or track down an ancient mystical relic. At Dizzyland, you&#39;d have better luck looking for a dart-firing toy plasma pistol or replica Darktrooper helmet.

Right now, much of the store seems to be devoted to selling a new line of electronic piggy banks known as the RoboBank. [[Tall stacks of RoboBank boxes-&gt;Market: RoboBank Pile]] are positioned prominently by the entrance and along the back wall.

The [[cash register-&gt;Market: Cash Register]] is located next to the market entrance, likely to prevent enterprising visitors from taking advantage of the store&#39;s abnormal layout to sneak merchandise out the door without paying.

At the very back of the store, an nondescript door marked ~~Employees Only~~ leads to [[the Outer Rim&#39;s loading bay-&gt;Loading Bay]].

[[Return to the main plaza.-&gt;Plaza]]</tw-passagedata><tw-passagedata pid="15" name="AV Closet" tags="" position="456,651" size="100,100">config.header.left:&quot;A/V Closet&quot;

--

{embed passage:&#39;Take Turn&#39;}

True to its name, the A/V closet is a cramped little nook with barely enough room to stretch out your arms on either side. Every piece of available wall is taken up by server racks, mysterious boxes of electronics, and literal miles of multicolored cables. While you loosely know that the A/V closet helps run a lot of the audio and visual effects that play throughout the Outer Rim, you have no idea what any of this equipment does specifically.

Most of the electronics in this room are have the flat, functional appearance of enterprise-level hardware. A single [[consumer-grade laptop-&gt;AV Closet: Laptop]] is propped on top of a [[server tower-&gt;AV Closet: Server Tower]] in one corner of the room.

[if !keys.security_feeds]
A [[thick yellow cable-&gt;AV Closet: Wires]] runs from the laptop and down into the wall behind it.
[else]
_A [[thick yellow cable-&gt;AV Closet: Wires]] runs from the server tower and down into the wall behind it._
[continue]


[[Return to Unkar&#39;s Antiquity Market.-&gt;Market: Cash Register]]</tw-passagedata><tw-passagedata pid="16" name="Loading Bay" tags="" position="921,454" size="100,100">config.header.left:&quot;Loading Bay&quot;

--

{embed passage:&#39;Take Turn&#39;}

The Outer Rim&#39;s loading bay is a no-frills industrial space with high ceilings and exposed concrete floors.

Most of one wall is taken up by a [[roll-up steel door-&gt;Loading Bay: Roll-Up Door]] for taking deliveries through. Next to the roll-up is [[the employee exit-&gt;Staff Exit]], which leads to the Outer Rim&#39;s staff parking lot.

The other side of the loading bay doubles as the warehouse for Unkar&#39;s Antiquity Market. [[Dozens of pallets-&gt;Loading Bay: Pallets]] and several [[massive shelves of merchandise-&gt;Loading Bay: Shelves]] have been placed alongside the bay&#39;s back wall.

[if keys.emergency_exit]
On one end of the loading bay is [[an emergency exit-&gt;Emergency Exit]] that leads to the service corridor behind the Centennial Kestrel ride.
[else]
On one end of the loading bay is [[an emergency exit-&gt;Emergency Exit: Locked]] that leads to the service corridor behind the Centennial Kestrel ride.
[continue]


On the other end of the bay is a nondescript door that leads into [[Unkar&#39;s Antiquity Market-&gt;Loading Bay: Market Door]].</tw-passagedata><tw-passagedata pid="17" name="Staff Exit" tags="" position="848,67" size="100,100">config.header.left:&quot;Loading Bay&quot;

--

{embed passage:&#39;Take Turn&#39;}

Rather than force their staff to traipse all the way through the park to get to work each day, the good people at the Walt Dizzy Corporation have provided a back entrance employees of the Outer Rim that leads straight from the [[staff parking lot-&gt;Parking Lot]] into the loading bay. While this still requires that people cut through Unkar&#39;s Market to get to the locker room, it&#39;s a heck of a lot faster than if they had to walk all the way from the main parking lot by Critterville.

The exployee exit is a heavy steel fire door marked, helpfully, ~~~Employee Exit~~~. Although it is only a feet down from the [[roll-up loading bay door-&gt;Loading Bay: Roll-Up Door]], it is clear that people frequently drag smaller deliveries and pieces of equipment through the employee exit rather than go to the trouble of opening up the main door. The metal frame of the exployee exit is scratched and dinged in a hundred places, and there are fresh streaks of bright red and yellow paint where equipment has been scraped against it.

A small sign screwed into the wall next to the employee exit reads:

[align center]
~~~WARNING~~ \
~~~Door locks automatically between 9 PM and 7 AM~~~ \
~~~For safety, the door will still open from the inside while locked~~~ \
~~~For assistance after-hours, please call the guard on duty~~~
[continue]

[[Explore the rest of the loading bay.-&gt;Loading Bay]]</tw-passagedata><tw-passagedata pid="18" name="Parking Lot" tags="" position="488,105" size="100,100">config.header.left:&quot;Parking Lot&quot;

--

{embed passage:&#39;Take Turn&#39;}

The Outer Rim&#39;s staff parking lot is a small and unadorned square of asphalt sandwiched between a parade storage warehouse, an unused rehearsal hall, and the Outer Rim&#39;s loading dock. It&#39;s always a little shocking at how [[different everything looks-&gt;Parking Lot: Examine the Loading Dock]] when you&#39;re behind the scenes like this.

Although there are sixty parking spaces, only two are currently in use, as no one has been allowed to enter the parking lot since the murder was reported this morning.

One of the spaces is occupied by a van belonging to the custodial crew that discovered Richard&#39;s body while cleaning the inside the Kestrel. The custodians are not considered suspects in the murder; forensics indicate that Richard was killed hours before they arrived, and their alibis for last night are watertight.

The only other vehicle in the parking lot is a [[silver sedan that belonged to the victim-&gt;Victim&#39;s Car]]. Since he never made it home, the car has remained in the lot overnight.

[[Head back to the the staff exit.-&gt;Staff Exit]]</tw-passagedata><tw-passagedata pid="19" name="Victim&#39;s Car" tags="" position="403,274" size="100,100">_unlockedThisRound:keys.car &amp;&amp; !keys.car_unlocked
keys.car_unlocked (keys.car): true

config.header.left:&quot;Richard&#39;s Car&quot;

--

{embed passage:&#39;Take Turn&#39;}

[if _unlockedThisRound]
_You press the unlock button on Richard&#39;s keys, and the sedan chirps and flashes its lights in response._

_You open the driver&#39;s side door and lean inside the car to investigate._
[continue]

[if keys.car]

The car is a 2005 model, and while Richard has clearly tried to take care of it, the interior is showing its age. The seats are stained and frayed in places, and the steering wheel has dark veins of old grime worked into its textured plastic.

You take inventory of the car&#39;s contents. A [[greasy fast food bag-&gt;Victim&#39;s Car: Fast Food Bag]] sits on the passenger seat, and a  [[plastic shopping bag-&gt;Victim&#39;s Car: Shopping Bag]] has been thrown onto the backseat. The [[glove compartment-&gt;Victim&#39;s Car: Glove Compartment]] also appears to be unlocked.

[[Investigate the rest of the parking lot.-&gt;Parking Lot]]

[else]

You try each of the car&#39;s doors in turn, but they are all locked shut.

[[Guess you&#39;ll have to come back later.-&gt;Parking Lot]]

[continue]</tw-passagedata><tw-passagedata pid="20" name="Emergency Exit" tags="" position="1072,218" size="100,100">config.header.left:&quot;Service Corridor&quot;

--

{embed passage:&#39;Take Turn&#39;}

The emergency exit is a gray-painted steel fire door with a polished metal push bar situated at the end of the service corridor.

A metal sign is posted on the door. White letters on a red background read:

[align center]
~~Emergency Exit Only~~ \
~~Alarm Will Sound~~
[continue]

An [[electronic alarm-&gt;Emergency Exit: Alarm]] is mounted on the wall to the right of the door.

[if keys.emergency_exit]
_You have propped the door open with a piece of cardboard._

In an emergency, employees can use this door to quickly reach the staff parking lot by cutting through [[the Outer Rim&#39;s loading bay-&gt;Loading Bay]].
[else]
In an emergency, employees can use this door to quickly reach the staff parking lot by cutting through the Outer Rim&#39;s loading bay.

[[Try to open the door.-&gt;Emergency Exit: Open the Door]]
[continue]

[[Head back to the service corridor.-&gt;Service Corridor]]</tw-passagedata><tw-passagedata pid="21" name="Service Corridor" tags="" position="2039,246" size="100,100">config.header.left:&quot;Service Corridor&quot;

--

{embed passage:&#39;Take Turn&#39;}

The service corridor is a long, L-shaped hallway. The floors are scuffed tile, and the white walls are bare apart from a handful of long grey scuffmarks.

At one end of the corridor is an [[emergency exit-&gt;Emergency Exit]] that leads into the Outer Rim&#39;s loading bay.

Around the corner is a door to [[the spaceport and the line to ride the Centennial Kestrel-&gt;Ride Line]].

Two other exits branch off of the corridor. One door leads to the [[staff locker room-&gt;Locker Room]], while the other opens into the Outer Rim&#39;s [[maintenance workshop-&gt;Workshop]].

A single handcart sits empty next to the workshop door.</tw-passagedata><tw-passagedata pid="22" name="Workshop" tags="" position="2313,244" size="100,100">config.header.left:&quot;Workshop&quot;

--

{embed passage:&#39;Take Turn&#39;}

The maintenance workshop&#39;s technicians are in charge of making sure that all of the lighting, effects, animatronics, and pneumatics in the Outer Rim. Whenever something breaks down in the park, it is brought here to be fixed.

The workshop itself is a tinkerer&#39;s dream, stocked with all the power tools and spare parts that the Walt Dizzy Corporation&#39;s prodigiously deep pockets can buy.

One wall is dedicated to a [[tool library-&gt;Workshop: Tool Library]], where dozens of tools are neatly hung and filed away via a system of hooks and drawers.

The other wall is focused on spare parts, electrical components, and other supplies, all organized onto [[a series of shelves-&gt;Workshop: Part Shelves]].

The center of the workshop is taken up by four large workbenches. Each bench features a heavy wooden worktop with a vice on one end and a computer terminal at the other. 

Three of the workbenches have been tidied off and wiped clean. A [[humanoid figure-&gt;Workshop: Robot]] is slumped over in a seated position on top of last workbench. The workbench&#39;s [[computer-&gt;Workshop: Computer]] also seems to be active.

[[Return to the service corridor.-&gt;Service Corridor]]</tw-passagedata><tw-passagedata pid="23" name="Locker Room" tags="" position="2527,470" size="100,100">config.header.left:&quot;Locker Room&quot;

--

{embed passage:&#39;Take Turn&#39;}

The Outer Rim&#39;s staff locker room resembles every other locker room you&#39;ve ever been in, with its gray tile, austere furnishings, and a mild humidity that never quite clears. 

One whole wall is taken up by a [[massive bank of lockers-&gt;Locker Room: Lockers]] that are assigned to each of the employees who work in this area of the park.

To the left of the lockers are [[three walk-in shower cubicles-&gt;Locker Room: Showers]], along with [[a pair of large towel bins-&gt;Locker Room: Towels]].

[[A long wooden bench-&gt;Locker Room: Bench]] is bolted to the ground in front of the lockers, allowing the employees somewhere to sit while they get changed.

At one end of the locker room are two doors. The larger door leads to [[the Outer Rim&#39;s dressing room-&gt;Dressing Room]], which is where all of the performer&#39;s costumes are stored when they&#39;re not wearing them. The smaller door leads to the [[service corridor-&gt;Service Corridor]] that connects to the park&#39;s maintenance workshop and the Centennial Kestrel ride line.

At the other end of the locker room is the door to the [[staff break room-&gt;Break Room]].</tw-passagedata><tw-passagedata pid="24" name="Kestrel: Lounge" tags="" position="1918,668" size="100,100">config.header.left:&quot;Centennial Kestrel&quot;

--

{embed passage:&#39;Take Turn&#39;}

The Kestrel&#39;s boarding ramp leads visitors up through a small airlock and into the ride&#39;s final waiting area: a perfect recreation of the Kestrel&#39;s famous lounge, complete with circular couches and a table-mounted holographic chess set.

On most days, entering this space would be like journeying to Mecca for a diehard Star Fights fan. Sadly, the effect is ruined today by the bloody scene rendered before you: [[the body of Richard Inglesias-&gt;Kestrel: Body]] is collapsed upon one of the iconic couches, and the large pool of blood on the floor leaves little doubt as to his condition.

To add to the scene&#39;s disarray, [[loose playing cards-&gt;Kestrel: Cards]] are scattered across the floor, and an [[open liquor bottle-&gt;Kestrel: Bottle]] has rolled into the corner of the room.

Behind this grisly tableau, the corridor continues on into [[the Centennial Kestrel&#39;s cockpit and the ride proper-&gt;Kestrel: Cockpit]].

[[Head down the loading ramp to the spaceport line.-&gt;Ride Line]]</tw-passagedata><tw-passagedata pid="25" name="Dressing Room" tags="" position="2873,494" size="100,100">config.header.left:&quot;Dressing Room&quot;

--

{embed passage:&#39;Take Turn&#39;}

Although park management likes to refer to this as a &#39;dressing room&#39;, in reality it more like an overgrown walk-in closet.

The room contains just two large clothes racks and a handful of privacy screens that afford the staff a modicum of dignity as they get into and out of costume. There&#39;s no laundry bin -- since the Outer Rim&#39;s many costumes are constructed out of a wide variety of materials, they can&#39;t just be dumped into the wash together.

Instead, two separate clothes racks are utilized to keep the costumes clean and organized. The staff pick up their costumes from one rack, wear them around the park, and then hang them on the other rack at the end of the day. The cleaning staff then collect all the dirty outfits off of the rack, dry clean them, and return them to the first rack, all before the park opens each morning.

Based on how many outfits are still hanging from the dirty rack, it seems like they didn&#39;t have time to clean anything this morning before Richard&#39;s body was found and the park was locked down.

The clean rack is mostly empty, and you find nothing of interest upon it. Leafing through the contents of the dirty rack, you find the costumes belonging to [[{player.birthday}-&gt;Dressing Room: Birthday&#39;s Costume]], [[{player.actor}-&gt;Dressing Room: Actor&#39;s Costume]], and [[{player.bartender}-&gt;Dressing Room: Bartender&#39;s Costume]].

You search the room for {player.shopkeeper}&#39;s costume, but you don&#39;t spot it anywhere.

[[Return to the locker room.-&gt;Locker Room]]</tw-passagedata><tw-passagedata pid="26" name="Break Room" tags="" position="3397,1222" size="100,100">config.header.left:&quot;Break Room&quot;

--

{embed passage:&#39;Take Turn&#39;}

Although Dizzyland likes to tout itself as &quot;the most magical place on Earth&quot;, none of that magic seems to have found its way to the Outer Rim&#39;s employee break room. Instead, the break room is a grubby, run down collection of mismatched furniture and second-hand appliances.

In addition to the prerequisite [[grimy couch-&gt;Break Room: Couch]] and a seen-better-days set of table and chairs, much of the break room is devoted a [[cramped kitchenette-&gt;Break Room: Kitchenette]], with a drinks machine and the capacity for preparing snacks and small meals.

A small desk in the corner of the room hosts a variety of electronic amenities, including a printer and a wireless router. A [[plastic trash can-&gt;Break Room: Trash Can]] sits under the desk, and a [[large notice board-&gt;Break Room: Notice Board]] is mounted on the wall above it.

There are several exits out of the break room. On one wall, a nondescript door leads to the back of [[Lolo&#39;s Cantina-&gt;Cantina]], while a door on the opposite wall connects to the [[staff locker room-&gt;Locker Room]]. Finally, a door next to the kitchenette goes to the [[staff bathroom-&gt;Staff Bathroom]].</tw-passagedata><tw-passagedata pid="27" name="Staff Bathroom" tags="" position="4030,1222" size="100,100">config.header.left:&quot;Staff Bathroom&quot;

--

{embed passage:&#39;Take Turn&#39;}

The staff bathroom is spartan but not unpleasant, mostly thanks to the daily efforts of the cleaning staff, to which the roster on the back of the door attests.

The bathroom is single-occupancy, with just the one toilet and a heavy latch on the door. 

The [[single sink-&gt;Bathroom: Sink]] is set into a small white vanity, the front of which is taken up by a [[double-doored cabinet-&gt;Bathroom: Cabinet]]. A [[plastic trash can-&gt;Bathroom: Trash]] sits next to the toilet. 

[[Head back to the break room.-&gt;Break Room]]</tw-passagedata><tw-passagedata pid="28" name="Cantina" tags="" position="3056,1345" size="100,100">config.header.left:&quot;Lolo&#39;s Cantina&quot;

--

{embed passage:&#39;Take Turn&#39;}

Lolo&#39;s Cantina has seen better days. While the cantina in the Star Fights movies is one of the galaxy&#39;s most wretched dens of villains and lowlifes, the Dizzyland version usually has more of a family-friendly casual dining vibe with some quirky decor.

Today the inside of Lolo&#39;s Cantina more heavily resembles its cinematic counterpart, however. Several tables and chairs have been upturned entirely, and the floor is covered in sticky pools of spilled drinks and shards of broken glass.

The [[bar itself-&gt;Bar]] seems to have escaped most of the damage, and the [[various drinks and snacks-&gt;Cantina: Drinks]] left standing on it all appear to be intact.

At the back of the room, a door marked ~~Employees Only~~ leads to the [[staff break room-&gt;Break Room]].

The cantina&#39;s [[standalone snack cart-&gt;Snack Cart]] is located just outside of the cantina&#39;s wide saloon doors, behind which the Outer Rim&#39;s [[winding entrance patch-&gt;Entrance Path]] is visible.</tw-passagedata><tw-passagedata pid="29" name="Snack Cart" tags="" position="2346,1608" size="100,100">config.header.left:&quot;Snack Cart&quot;

--

{embed passage:&#39;Take Turn&#39;}

The snack cart outside of [[Lolo&#39;s Cantina-&gt;Cantina]] sells grab-and-go snacks and drinks to park guests who might not have time for a full sit down experience in the cantina.

The cart houses several temperature-controlled compartments to provide both hot and cold treats to park guests. These are cleared away at the end of the day, though, and are currently all empty.

A [[large sign-&gt;Snack Cart: Sign]] leans against the side of the cart, facing away from the pathway. 

[[Return to the winding entrance path.-&gt;Entrance Path]]</tw-passagedata><tw-passagedata pid="30" name="Security Office" tags="" position="945,1525" size="100,100">config.header.left:&quot;Security Office&quot;

--

{embed passage:&#39;Take Turn&#39;}

Despite it&#39;s fantastical exterior, the interior of the security office is decidedly mundane, even bordering on grungy.

One side of the room is dedicated to a [[wall of monitors-&gt;Security Office: Monitors]] displaying feeds from all of the security cameras in the Outer Rim.

A long desk spans most of the length of the room underneath the monitors. An [[imposing black switchboard-&gt;Security Office: Control Board]] on one side of the desk is connected to the monitors via a series of thick yellow cables. On the other side of the desk sits an [[outdated desktop computer-&gt;Security Office: PC]] and printer combo. Most of the rest of the desk is taken up by scattered assortment of various [[computer printouts-&gt;Security Office: Printouts]].

The back corner of the office is dedicated to a small kitchenette, containing a mini-fridge, coffee pot, and microwave. A [[glass-fronted cabinet-&gt;Security Office: Key Cabinet]] is mounted on the wall above them, and a [[blue plastic wastebasket-&gt;Security Office: Trash Can]] sits on the floor next to the fridge.

[[Step outside the office.-&gt;Entrance Path]]</tw-passagedata><tw-passagedata pid="31" name="Entrance Gates" tags="" position="1246,1674" size="100,100">{embed passage:&#39;Take Turn&#39;}

The path between the Outer Rim and the rest of the park is blocked by a huge double-doored gate. Each door is over two stories high and crafted out of molded cement that has been weathered to resemble ancient stone.

The wild din of a busy theme park is audible from behind the closed doors. You can even make out the occasional raised voice as a parkgoer demands to know why they are not allowed inside the Outer Rim, which was doubtless going to be the highlight of their trip. Park security seems to be doing a good job of keeping people from trying to force their way inside for now, though.

The gates have been designed to look like they have been hewed out of the wet rock of an ancient canyon. To complete the illusion, various plant life has been allowed to artfully grow alongside the gates, and a small waterfall splashes out of a hole in the left wall and down into a [[long pond-&gt;Water Feature]] that runs along the pathway.

A wide pullbar handle is screwed into the back of each of the gates, and [[a large keyhole-&gt;Entrance Gates: Keyhole]] is installed next to the rightmost handle.

Two tall, humanoid robotic greeters stand at attention on either side of the gates. Their heads hang limp and lifeless, though. It seems they get powered down outside of working hours.

A [[security camera-&gt;Entrance Gates: Camera]] is set high into the wall on the right side of the gates.

The [[path away from the gates-&gt;Entrance Path]] leads back towards the main plaza.</tw-passagedata><tw-passagedata pid="32" name="Entrance Gates: Camera" tags="" position="1251,1819" size="100,100">{embed passage:&#39;Take Turn&#39;}

Although the robotic greeters have been powered down, a blinking red light confirms that the security camera mounted above the gates is still active.

Based on its angle, you&#39;d guess that this camera is focused on the entrance to Lolo&#39;s Cantina and the snack cart stationed in front of it.

[[Keep investigating the rest of the gates.-&gt;Entrance Gates]]</tw-passagedata><tw-passagedata pid="33" name="Water Feature" tags="" position="1385,1676" size="100,100">{embed passage:&#39;Take Turn&#39;}

The waterfall runs pleasingly along the canyon&#39;s artificial walls before splashing down into the pond below.

A waist-high fence has been installed alongside the pond to prevent small children from accidentally falling in and to dissuade the more exuberant adult guests from going for a swim.

Leaning over the fence, you examine surface of the pond. It is quite shallow, and it has been decorated with an assortment of lilypads and other aquatic plants, managing to strike the exact right balance to create the illusion of natural growth, while carefully avoiding the impression that the pond is anything less than meticulously clean.

As you look, you notice a [[fashionable tote bag-&gt;Water Feature: Bag]] has been tucked between two rocks so as to be hidden from anyone just walking along the path.

[if !keys.master_key]
A metallic glint at the bottom of the pond [[catches your eye-&gt;Water Feature: Key]].
[else]
_You pat at your pocket to confirm that the small silver key with the red fob is still in there._
[continue]


[[Return your attention to the gates.-&gt;Entrance Gates]]</tw-passagedata><tw-passagedata pid="34" name="Bar" tags="" position="3139,1550" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

You step behind the bar to examine the bartender&#39;s station.

An array of robot parts, flight helmets, and other pieces of film-accurate detritus are mounted on the back of the bar and hung from the ceiling above it. For customer, this makes the bar feel like a lived-in part of the Star Fights universe of scrappy intergalactic adventure. From behind the bar, however, things seem decidedly more terrestrial.

Despite all brightly colored, bubbling jars of mysterious fluids on the wall behind the bar, the speedrail and soda gun are both stocked with name-brand products from Dizzyland&#39;s corporate partners. The point-of-sale terminal is the same model used across all Dizzy parks, and the large crate of dirty glasses suggests that basic hygiene is still a problem even in our far-flung intersolar future.

The Star Fights branding is apparent in two places behind the bar -- the cocktail glasses, which come in a variety of fun shapes designed to look like props from the films, and the [[receipt spike-&gt;Bar: Receipt Spike]], which resembles some fantastical piece of mechanical equipment.

Underneath the bar, there are a number of [[cabinets and cubbies-&gt;Bar: Cabinets]] used for additional storage.

[[Investigate the rest of the cantina.-&gt;Cantina]]</tw-passagedata><tw-passagedata pid="35" name="Intro" tags="" position="898,1372" size="100,100">config.header.left:&quot;Battooine&quot;

--

{embed passage:&#39;Show Turns&#39;}

You find yourself at the edge of a small spaceport on the jungle planet of Battooine, battle-scarred and strewn with the rubble of a long and drawn-out galactic civil war. At least, that&#39;s what it seems like at first, so convincing is the propwork and set dressing from the genius designers at the Walt Dizzy Corporation.

In reality, you are standing by the entrance to the Outer Rim, the new Star Fights-branded region of the Dizzyland California theme park. On any normal day, the plaza in front of you would be packed with hundreds of park guests of all ages and nationalities, giddy on sugar and the opportunity to step inside of their favorite movie franchise. Today though, Battooine is quiet and empty, save for you and your fellow investigators. Even the animatronic robots that would normally greet you as you step into the region hang limp and quiet, deactivated from the park&#39;s closing last night.

You take a deep breath. You have a job to do.

[[Enter the Outer Rim.-&gt;Entrance Path]]</tw-passagedata><tw-passagedata pid="36" name="Entrance Gates: Keyhole" tags="" position="1093,1655" size="100,100">{embed passage:&#39;Take Turn&#39;}

You give the gates a tug, but they are locked tight. The on-duty security guard locks them after the Outer Rim closes at nine o&#39;clock each night, and the morning cleaning crew always use the employee entrance out through the loading dock, so it is likely that the gates have been locked since before the murder.

[if keys.master_key]
_You pull the silver key with the red fob out of your pocket and try it in the keyhole, but it is far too small to fit._
[continue]

[if keys.toy_key]
_You compare the plastic key from the RoboBank box to the keyhole. You don&#39;t even need to try it in the hole to know that it&#39;s too small to fit._
[continue]


[[Return your attention to the rest of the gates.-&gt;Entrance Gates]]</tw-passagedata><tw-passagedata pid="37" name="Water Feature: Key" tags="" position="1383,1819" size="100,100">keys.master_key:true

--

{embed passage:&#39;Take Turn&#39;}

_Brushing aside several lily pads, you reach down into the pond and scoop out a small silver key attached to a round, red plastic keyring._

_You wipe the key on your sleeve and drop it into your pocket._

[[Keep examing the pond.-&gt;Water Feature]]</tw-passagedata><tw-passagedata pid="38" name="Security Office: Monitors" tags="" position="420.6666666666667,1728.3333333333333" size="100,100">{embed passage:&#39;Take Turn&#39;}

Four large monitors take up most of the wall of the office, each of which is labeled with a small sticker bearing a letter of the alphabet. 

Each monitor displays the feed from a different camera. Three of the cameras are focused on the entrances to the Outer Rim&#39;s main attactions: Lolo&#39;s Cantina, Unkar&#39;s Antiquity Market, and the spaceport containing the Centennial Kestrel&#39;s ride line. The final camera has a view of the Outer Rim&#39;s main entrance gates and their adjoining pond.

The monitors are further distinguished by a series of colored alphabet stickers that have been stuck in the corner of each screen, one per monitor. Clockwise from the top-left, you spot a red A, a yellow B, a blue C, and a green D.

A bundle of thick yellow cables connects the monitors to the [[large black switchboard-&gt;Security Office: Control Board]] on the desk beneath them.

[if !keys.security_feeds]
Although outside the park is drenched in the warm glow of autumnal Southern Californian sun, the feeds on the monitors are much darker, as if they were viewing the park at night.

[[Take a closer look at the feed.-&gt;Security Office: Loop]]

[continue]

[if keys.security_feeds &amp;&amp; keys.feed_number &lt; 0]
_The blinking red text in the corner of each monitor reads &#96;LIVE&#96;. Based on how sunny the park looks in the feeds, you&#39;re inclined to believe it._
[continue]

[if keys.security_feeds &amp;&amp; keys.feed_number === 0]
_The camera feeds have been rewound to show the video recordings from last night. The timestamp in the corner of each monitor reads &#96;9:01:15 PM PST&#96;._

[[Watch the recordings.-&gt;Security Office: Feed 9:00]]
[continue]

[if keys.security_feeds &amp;&amp; keys.feed_number === 1]
_The camera feeds have been rewound to show the video recordings from last night. The timestamp in the corner of each monitor reads &#96;10:02:04 PM PST&#96;._

[[Watch the recordings.-&gt;Security Office: Feed 10:20]]
[continue]

[if keys.security_feeds &amp;&amp; keys.feed_number === 2]
_The camera feeds have been rewound to show the video recordings from last night. The timestamp in the corner of each monitor reads &#96;11:40:57 PM PST&#96;._

[[Watch the recordings.-&gt;Security Office: Feed 11:40]]
[continue]

[[Investigate the rest of the office.-&gt;Security Office]]</tw-passagedata><tw-passagedata pid="39" name="Security Office: Printouts" tags="" position="650,2054" size="100,100">{embed passage:&#39;Take Turn&#39;}

You rifle through the pile of papers. It seems like someone printed out the personnel files of the Outer Rim&#39;s staff.

&gt; [[Richard&#39;s file-&gt;Personnel File: Richard]]
&gt; [[{player.birthday}&#39;s file-&gt;Personnel File: Birthday]]
&gt; [[{player.actor}&#39;s file-&gt;Personnel File: Actor]]
&gt; [[{player.technician}&#39;s file-&gt;Personnel File: Technician]]
&gt; [[{player.bartender}&#39;s file-&gt;Personnel File: Bartender]]
&gt; [[{player.shopkeeper}&#39;s file-&gt;Personnel File: Shopkeeper]]

[[Keep investigating the rest of the office.-&gt;Security Office]]</tw-passagedata><tw-passagedata pid="40" name="Security Office: Control Board" tags="" position="596.6666666666666,1714.3333333333333" size="100,100">{embed passage:&#39;Take Turn&#39;}

Thick yellow cables snake out of the back of the switchboard. Most of the cables curve up behind the [[wall of monitors-&gt;Security Office: Monitors]] behind the desk, but a single cable drops down [[behind the desk-&gt;Security Office: Under Desk]].

[if !keys.security_feeds]
You try pressing a couple of buttons, but nothing on the monitors appears to change.
[else]

_The controls seem to be more responsive now that you have reconnected the server tower in the A/V closet._

You tap a button, and the video on the monitors begins to zip forward in double-time. It appears that you can use these controls to scrub through the camera feeds from after the Outer Rim closed last night.

&gt; [[Review the feed from 9:00 to 10:20-&gt;Set Feed 9:00]]
&gt; [[Review the feed from 10:20 to 11:40-&gt;Set Feed 10:20]]
&gt; [[Review the feed from 11:40 to 1:00-&gt;Set Feed 11:40]]

[continue]

[[Investigate the rest of the office.-&gt;Security Office]]</tw-passagedata><tw-passagedata pid="41" name="Security Office: Key Cabinet" tags="" position="631,1429" size="100,100">{embed passage:&#39;Take Turn&#39;}

The front of the cabinet is made out of mesh-enforced safety glass. Various rings of keys hanging on hooks are visible through the glass, and each hook has been fastidiously labeled with plastic adhesive labels.

One ring of particularly thick keys catches your eye. Its bright green label is emblazoned with the words ~~Main Gate~~ in raised white letters.

You give the cabinet&#39;s handle a tug, but it is locked shut.

A [[yellow sticky note-&gt;Security Office: Sticky Note]] is stuck to one side of the cabinet.

[if keys.master_key]
_You try to unlock the cabinet using the small silver key with the red fob, but it refuses to turn in the lock._
[continue]

[if keys.toy_key]
_You try the plastic key from the RoboBank box in the lock. It fits, but the key just bends as you try to turn it, and you have to pull it out carefully to avoid damaging it._
[continue]


[[Investigate the rest of the office.-&gt;Security Office]]</tw-passagedata><tw-passagedata pid="42" name="Security Office: Trash Can" tags="" position="544,1547" size="100,100">{embed passage:&#39;Take Turn&#39;}

The waste basket is half-filled with used coffee filters, microwavable burrito wrappers, and empty diet soda cans. You give the trash can a shake to mix up its contents, and a [[crumpled sheet of paper-&gt;Security Office: Inquiry Review]] catches your eye.

[[Investigate the rest of the office.-&gt;Security Office]]</tw-passagedata><tw-passagedata pid="43" name="Security Office: PC" tags="" position="855,1895" size="100,100">password:&quot;&quot;
--

{embed passage:&#39;Take Turn&#39;}

The PC is an older model, an off-white obelisk attached to a free-standing LCD monitor. The keyboard and mouse look well-worn but sturdy; the labels have rubbed off of several of the keys from heavy use, and an oily sheen suggests that both devices could do with a good clean.

[unless keys.security_pc]

You tap the space bar a few times to wake up the PC. Fans begin to whir inside the case, an LED flashes on and off, and the smiling cartoon face of Ricky the Rat pops into existence on the screen.

Underneath the beloved mascot&#39;s toothy grin, an unassuming text box prompts you to log in.

{embed passage: &quot;Security PC: Lock Screen&quot;}

[else]

The monitor displays an outdated version of a popular web browser. Two tabs are open on the browser:

&gt; [[Chat - {npc.security_chat}-&gt;Security PC: Chat]]
&gt; [[Wikipedia - Apple Street gang-&gt;Security PC: Wikipedia]]

[continue]


[[Investigate the rest of the security office.-&gt;Security Office]]

</tw-passagedata><tw-passagedata pid="44" name="Security Office: Inquiry Review" tags="" position="363,1535" size="100,100">{embed passage:&#39;Take Turn&#39;}

You unfurl the paper to reveal a letter printed on official Dizzyland stationery.

***

&lt;blockquote&gt;

Dear {player.guard},

This letter is to confirm that our office has completed its inquiry into your recent conduct at work and found no evidence of misbehavior. The allegations that prompted this investigation will be cleared from your permanent record. Your temporary suspension from work is now lifted, and you are free to return to work on Monday, November 11 2019 or at your manager&#39;s earliest discretion.

While we must take any and all allegations of employee misconduct seriously, we understand that undergoing an investigation such as this can be a stressful experience for our employees. We thank you for your patience and compliance during this difficult time. 

Best,

{npc.hr}\
Office of Human Resources\
Walt Dizzy Corporation

&lt;/blockquote&gt;

***


[[Keep investigating the rest of the office.-&gt;Security Office]]</tw-passagedata><tw-passagedata pid="45" name="Set Feed 9:00" tags="" position="356,1924" size="100,100">keys.feed_number:0

--

You scrub through the camera feeds until the timestamps on the monitors read 9:00.

[[Watch the feeds on the monitors.-&gt;Security Office: Feed 9:00]]

[[Keep investigating the rest of the office.-&gt;Security Office]]</tw-passagedata><tw-passagedata pid="46" name="Set Feed 10:20" tags="" position="484,1926" size="100,100">keys.feed_number:1

--

{embed passage:&#39;Take Turn&#39;}

You scrub through the camera feeds until the timestamps on the monitors read 10:20.

[[Watch the feeds on the monitors.-&gt;Security Office: Feed 10:20]]

[[Keep investigating the rest of the office.-&gt;Security Office]]</tw-passagedata><tw-passagedata pid="47" name="Set Feed 11:40" tags="" position="599,1924" size="100,100">keys.feed_number:2

--

You scrub through the camera feeds until the timestamps on the monitors read 11:40.

[[Watch the feeds on the monitors.-&gt;Security Office: Feed 11:40]]

[[Keep investigating the rest of the office.-&gt;Security Office]]</tw-passagedata><tw-passagedata pid="48" name="Security Office: Feed 9:00" tags="" position="224,1618" size="100,100">{embed passage:&#39;Take Turn&#39;}

You scrub the security recordings between 9:00 and 10:20 last night. The system seems to have started recording when the Outer Rim closed at 9:00 last night, so the crowds have disappeared and it is easy to track the movements of the staff who remained in the park after closing.

***

**9:00 PM**\
{player.birthday} is tidying up the snack cart in front of Lolo&#39;s Cantina. They are still in costume, with their tentacled headpiece prominently visible.

**9:01 PM**\
Richard leaves Lolo&#39;s Cantina and briefly speaks to {player.birthday}, then crosses the plaza and enters Unkar&#39;s Antiquity Market.

**9:03 PM**\
{player.guard} steps up to the entrance gates and locks them. They take a moment to appreciate the waterfall while spinning a ring of keys on their finger before stepping offscreen.

**9:05 PM**\
{player.birthday} finishes tidying the snack cart and heads inside Lolo&#39;s Cantina.

**9:13 PM**\
Richard leaves the Market carrying a large paper bag. He is followed by {player.actor} carrying another paper bag and {player.shopkeeper}, who is not visibly carrying anything, but who is still dressed in the goggles and robes of their character costume. All three walk across the plaza and into the cantina.

**10:16 PM**\
Richard, {player.birthday}, {player.technician} leave the Cantina and head into the spaceport. {player.shopkeeper} hurries after them. {player.birthday} is now in their street clothes, but {player.shopkeeper} is still in costume.

**10:18 PM**\
{player.actor} exits the spaceport entrance and walks hurriedly into the market.

***

You can [[pick another time with the control board-&gt;Security Office: Control Board]] or [[stop watching the feeds-&gt;Security Office: Monitors]].</tw-passagedata><tw-passagedata pid="49" name="Security Office: Feed 10:20" tags="" position="221,1737" size="100,100">{embed passage:&#39;Take Turn&#39;}

You scrub the security recordings between 10:20 and 11:40 last night.

***

**10:22 PM**\
{player.actor} jogs out of Unkar&#39;s Antiquity Market and enters the spaceport.

**10:30 PM**\
Richard and {player.birthday} walk from the spaceport to Lolo&#39;s Cantina, walking closely together. {player.shopkeeper} and {player.technician} follow after them about 10 seconds later.

**10:55 PM**\
{player.technician} leaves the spaceport carrying a backpack and heads into the market.

**11:14 PM**\
{player.actor} leaves the cantina with a large tote bag slung over their shoulder. They pause to look back at the cantina, then turn and walk quickly towards the entrance gates.

**11:15 PM**\
{player.birthday} runs out of the cantina and into the market. {player.shopkeeper} follows them, waving their arms. {player.shopkeeper} is still wearing the goggles and robes of their costume.

{player.actor} stands by the pond next to the entrance gates. They lean over the railing, seemingly admiring the water.

**11:19 PM**\
{player.actor} stands back up and heads back towards the plaza without their bag. They walk up to the entrance of the Market and lean their head in through the door. After looking around for a few seconds, they step inside.

***

You can [[pick another time with the control board-&gt;Security Office: Control Board]] or [[stop watching the feeds-&gt;Security Office: Monitors]].</tw-passagedata><tw-passagedata pid="50" name="Security Office: Feed 11:40" tags="" position="219,1857" size="100,100">{embed passage:&#39;Take Turn&#39;}

You scrub the security recordings between 11:40 and 1:00 last night.

***

**12:01 AM**\
{player.shopkeeper} walks out of Unkar&#39;s Antiquity Market, still dressed in their costume&#39;s goggles and robes. Their arms are pulled in tight to their chest, and one hand appears to be clutched in the other.

They approach Lolo&#39;s Cantina, but stop suddenly in their tracks. They pause, then hurriedly turn and jog inside the spaceport.

**12:16 AM**\
{player.guard} walks up to the cantina entrance and steps inside. They are shaking their fist and seem to be yelling as they approach.

**12:22 AM**\
A costumed figure steps out from under the Centennial Kestrel and walks into the spaceport. They appear to be wearing the armor of a Mantanorian bounty hunter.

**12:25 AM**\
{player.guard} leaves the cantina. Their shirt is untucked, and they are rubbing their shoulder.

**12:47 AM**\
{player.guard} walks up to the entrance gates and uses a key to let themselves through to the rest of the park.

**12:54 AM**\
{player.shopkeeper}, still in costume, steps out of the cantina. They take a quick look around, then hurry off across the plaza and into the market.

***

You can [[pick another time with the control board-&gt;Security Office: Control Board]] or [[stop watching the feeds-&gt;Security Office: Monitors]].</tw-passagedata><tw-passagedata pid="51" name="Lower Plaza: Camera" tags="" position="1082,1534" size="100,100">{embed passage:&#39;Take Turn&#39;}

Although the robotic guard does not seem to have any power running to it, you spy a small red light blinking on the side of its head. On closer inspection, you realize that the guard is more than just a fun piece of animatronic magic... it also has a working security camera embedded in its head!

By your estimation, this camera likely has a view of the entrance gates and the small pond and waterfall alongside them. 

[[Step away from the robot.-&gt;Entrance Path]]</tw-passagedata><tw-passagedata pid="52" name="Personnel File: Richard" tags="" position="275,2204" size="100,100">{embed passage:&#39;Take Turn&#39;}

***

&lt;blockquote&gt;

**Employee name**\
Richard Inglesias

**Date of birth**\
5/3/1977

**Background check**\
No records found

**Employment history**\
5/22/2008: External hire: Prep cook, World of Tomorrow

10/5/2009: Promotion: Line cook, World of Tomorrow

3/27/2011: Transfer: Line cook, Toontopia

6/15/2011: Disciplinary warning: Smoking on park premises (Reported: {npc.security_chat})

2/4/2013: Promotion: Kitchen supervisor, Toontopia

8/16/2015: Suspension, 2 weeks: Fighting (Reported: {npc.kitchen_manager})

1/22/2017: Promotion: Shift supervisor, Toontopia

11/3/2018: Change of beneficiary: Life insurance, {player.actor}

3/30/2019: Transfer: Shift supervisor, Outer Rim

8/5/2019: Disciplinary warning: Inappropriate conduct (Reported: {player.guard})

&lt;/blockquote&gt;

***

[[Check out the other printouts.-&gt;Security Office: Printouts]]</tw-passagedata><tw-passagedata pid="53" name="Personnel File: Birthday" tags="" position="425,2204" size="100,100">{embed passage:&#39;Take Turn&#39;}

***

&lt;blockquote&gt;

**Employee name**\
{player.birthday}

**Date of birth**\
11/11/1989

**Background check**\
No records found

**Employment history**\
6/11/2019: External hire: Cashier, Outer Rim

&lt;/blockquote&gt;

***

[[Check out the other printouts.-&gt;Security Office: Printouts]]</tw-passagedata><tw-passagedata pid="54" name="Personnel File: Actor" tags="" position="575,2204" size="100,100">{embed passage:&#39;Take Turn&#39;}

***

&lt;blockquote&gt;

**Employee name**\
{player.actor}

**Date of birth**\
7/3/1985

**Background check**\
5/16/2009: Arrest, shoplifting

**Employment history**\
5/22/2011: External hire: Performer (fur), Critterville

11/6/2014: Transfer: Performer (fur), Toontopia

3/30/2017: Paycheck advance, approved R. Inglesias

4/10/2019: Promotion: Performer, Outer Rim

8/5/2019: Disciplinary warning: Inappropriate conduct (Reported: {player.guard})

9/14/2019: Paycheck advance, approved R. Inglesias

10/17/2019: Paycheck advance, approved R. Inglesias

&lt;/blockquote&gt;

***

[[Check out the other printouts.-&gt;Security Office: Printouts]]</tw-passagedata><tw-passagedata pid="55" name="Personnel File: Bartender" tags="" position="725,2204" size="100,100">{embed passage:&#39;Take Turn&#39;}

***

&lt;blockquote&gt;

**Employee name**\
{player.bartender}

**Date of birth**\
2/15/1990

**Background check**\
8/22/2005: Arrest, shoplifting

12/22/2009: Arrest, possession with intent to distribute

10/30/2011: Arrest, robbery, gang affiliation (Apple St LA)

2/1/2012: Sentenced, 5 years, Ironwood State Prison

6/6/2016: Released early on good conduct

**Employment history**\
5/22/2017: Work opportunity hire: Server, Toontopia

9/02/2018: Promotion: Bartender, Toontopia

4/10/2019: Transfer: Bartender, Outer Rim

&lt;/blockquote&gt;

***

[[Check out the other printouts.-&gt;Security Office: Printouts]]</tw-passagedata><tw-passagedata pid="56" name="Personnel File: Technician" tags="" position="875,2204" size="100,100">{embed passage:&#39;Take Turn&#39;}

***

&lt;blockquote&gt;

**Employee name**\
{player.technician}

**Date of birth**\
10/28/1987

**Background check**\
No records found

**Employment history**\
8/28/2017: External hire: Engineering Technician, Outer Rim

3/1/2018: Employee of the Month, Engineering Maintenance

11/13/2018: Applied: Junior Engineer, Imagineering

12/4/2018: Rejected: Junior Engineer, Imagineering

&lt;/blockquote&gt;

***

[[Check out the other printouts.-&gt;Security Office: Printouts]]</tw-passagedata><tw-passagedata pid="57" name="Personnel File: Shopkeeper" tags="" position="1025,2204" size="100,100">{embed passage:&#39;Take Turn&#39;}

***

&lt;blockquote&gt;

**Employee name**\
{player.shopkeeper}

**Date of birth**\
4/22/1992

**Background check**\
No records found

**Employment history**\
8/28/2016: External hire: Cashier, Critterville

1/22/2019: Applied: Cashier, The Outer Rim

2/1/2019: Rejected: Cashier, The Outer Rim

5/21/2019: Transfer: Cashier, Outer Rim, approved R. Inglesias

&lt;/blockquote&gt;

***

[[Check out the other printouts.-&gt;Security Office: Printouts]]</tw-passagedata><tw-passagedata pid="58" name="Security Office: Sticky Note" tags="" position="466,1432" size="100,100">{embed passage:&#39;Take Turn&#39;}

You peel the sticky note off of the side of the cabinet and squint at the single word in its center.

It reads:

***

[align center]
**RYYRGRYYR**
[continue]

***

[[Put the note back where you found it.-&gt;Security Office: Key Cabinet]]</tw-passagedata><tw-passagedata pid="59" name="Security PC: Lock Screen" tags="" position="994,1764" size="100,100">[align center]

**Enter Password** \
**Hint: Keys &amp; cameras**

{text input for: &#39;password&#39;, required:false}

[[Submit-&gt;Security PC: Validate Password]]

[continue]</tw-passagedata><tw-passagedata pid="60" name="Security PC: Validate Password" tags="" position="995,1894" size="100,100">keys.security_pc:password === &quot;ABBADABBA&quot; || password === &quot;abbadabba&quot; || password === &quot;Abbadabba&quot;

--

[if keys.security_pc]

That&#39;s it! The lock screen disappears, and the PC&#39;s desktop springs to life.

[else]

The password field shudders and flashes red. It seems like that wasn&#39;t the right password.

[continue]

[[Continue-&gt;Security Office: PC]]</tw-passagedata><tw-passagedata pid="61" name="Security PC: Chat" tags="" position="893,2038" size="100,100">{embed passage:&#39;Take Turn&#39;}

***

[align center]

**Yesterday - 6:22 PM**
[align left]
Hey stranger, long time no see
[align left]
You back at work then?
[align right]
yup. boss man gave me the all clear to come back
[align left]
Niiice
[align left]
They didn&#39;t find anything then?
[align right]
of course not
[align left]
Oh, so you didn&#39;t do it then? ;)
[align right]
fuck you
[align left]
Still, eight weeks off work with pay, must be nice
[align left]
Maybe I should try getting handsy with the guests sometime as well
[align right]
don&#39;t even joke. the investigation was a nightmare
[align left]
I bet
[align left]
Any idea why they thought you did it?
[align right]
i assume one of the clowns who work here made something up
[align right]
we dont exactly get along
[align left]
Oh shit?? You think?
[align right]
i&#39;m almost certain
[align right]
bunch of degenerates
[align right]
{npc.security_prev} thinks one of them&#39;s selling drugs to guests too
[align left]
Oh SHIT???
[align left]
You know, you pin that on one of them, it might make them think twice about messing with you in future
[align left]
Show them who&#39;s the boss, right?
[align right]
you know
[align right]
that isn&#39;t the worst idea you&#39;ve ever had
[align right]
im going to go ask some questions. radio if anything&#39;s urgent 
[align left]
Roger that
[align right]
over and out
[continue]

***

[[Check out the other tabs.-&gt;Security Office: PC]]</tw-passagedata><tw-passagedata pid="62" name="Security PC: Wikipedia" tags="" position="1030,2043" size="100,100">{embed passage:&#39;Take Turn&#39;}

***

[align center]
**Apple Street gang - Wikipedia**
[continue]

Apple Street, also known as Calle Manzana or La Manzana, is a multi-ethnic street gang based out of the Mid City neighborhood of Los Angeles. While membership was estimated to be between 3,000 and 4,000 people at its height in the 1990s, it dwindled rapidly following the arrest of the gang&#39;s founders in an FBI sting in 1997.[1]

Today, Apple Street is estimated to have only 50-100 members. Criminal activities of the gang include weapon trafficking, robbery, and narcotics distribution.

**References**

1. [[20 arrested in Mid City gang sweep - Los Angeles Chronicle-&gt;Security PC: News Article]] - Retrieved 2011-02-15

***

[[Check out the other tabs.-&gt;Security Office: PC]]</tw-passagedata><tw-passagedata pid="63" name="Security PC: News Article" tags="" position="1195,2036" size="100,100">{embed passage:&#39;Take Turn&#39;}

***

[align center]
**20 arrested in Mid City gang sweep - Los Angeles Chronicle**
[continue]

~~Feb 18, 1996~~\
~~Chronicle Staff Writers~~

The entire leadership of the vicious Apple Street gang were arrested this morning following a sting operation targeting several residences in Mid City. Gang founders [[{npc.gang_leader_1}-&gt;Security PC: Gang Leader Photo 1]] and [[{npc.gang_leader_2}-&gt;Security PC: Gang Leader Photo 2]] were both arrested at a house belonging to the former. Unregistered firearms and a several large bricks of cocaine were also found on the premises.

Despite concurrent investigations by both the LAPD and the FBI into Apple Street, no major arrests had been made against their leadership until this morning. A breakthrough was made in the case when Apple Street member [[Ricardo &quot;Snake Eyes&quot; Vasquez-&gt;Security PC: Ricardo Photo]] accepted a plea deal in which it is presumed he agreed to testify against gang leadership. Mr Vasquez was arrested late last year for his involvement in a Culver City shooting that left three dead, including a minor that had been walking to school with their family.

Los Angeles police commissioner {npc.la_commissioner} spoke to the press shortly after the arrests were made. &quot;We are hopeful that this will be the first of many such arrests. We are beginning to turn the tide against this violent gang, and soon their reign of terror on the good people of Los Angeles will be at an end.&quot;


***

[[Return to Wikipedia.-&gt;Security PC: Wikipedia]]</tw-passagedata><tw-passagedata pid="64" name="Security PC: Gang Leader Photo 1" tags="" position="1155,2181" size="100,100">{embed passage:&#39;Take Turn&#39;}

A photo of {npc.gang_leader_1} is embedded on the side of the page.

He is a heavy-set man in his 40s with a thick mustache and dark rings around his eyes. His head is shaved bald, and he has a large birthmark on his chin.

[[Keep reading the article.-&gt;Security PC: News Article]]</tw-passagedata><tw-passagedata pid="65" name="Security PC: Gang Leader Photo 2" tags="" position="1311,2173" size="100,100">{embed passage:&#39;Take Turn&#39;}

A photo of {npc.gang_leader_2} is embedded on the side of the page.

He is an athletic-looking young man wearing a wifebeater. He has a cornrows and a dark goatee. A small black apple is tattooed prominently under his right eye.

[[Keep reading the article.-&gt;Security PC: News Article]]</tw-passagedata><tw-passagedata pid="66" name="Security PC: Ricardo Photo" tags="" position="1378,2041" size="100,100">{embed passage:&#39;Take Turn&#39;}

A photo of Ricardo &quot;Snake-Eyes&quot; Vasquez is embedded on the side of the page.

He is skinny young man wearing an orange shirt emblazoned with the words ~~Los Angeles County Jail~~. His hair is buzzed short and he is clean-shaven. A tattoo of a snake is partly visible through the low V of his ill-fitting shirt.

[[Keep reading the article.-&gt;Security PC: News Article]]</tw-passagedata><tw-passagedata pid="67" name="Upper Plaza: Rubble Bricks" tags="" position="1084,484" size="100,100">{embed passage:&#39;Take Turn&#39;}

You hop over the fence and take a closer look at the bricks that make up the pile of rubble. From a distance, the tan-colored bricks looked to be made of an authentic mixture of dried mud and straw. Up close, you realize that each brick is an intricate, hand-detailed polyurethane replica. You assume that the artificial bricks must be easier to maintain than the real thing would.

There must be nearly a thousand bricks in the pile, each of which has been laboriously hand-cemented into a steep concrete slope that rises almost as high as the roof of the market behind it. As you admire the workmanship that went into creating even a passingly simple replica such as this, you notice a bald patch of cement halfway up the side of the slope. After another minute&#39;s investigation, you find a loose brick matching the patch resting next to one of the fence posts down by the path.

[[Climb back over the fence.-&gt;Upper Plaza: Rubble]]</tw-passagedata><tw-passagedata pid="68" name="Market: Clothes Racks" tags="" position="710,933" size="100,100">_slip:!keys.bottle
keys.bottle:true

--

{embed passage:&#39;Take Turn&#39;}

You explore the labyrinth of racks and tables that comprises the showfloor of Unkar&#39;s Antiquity Market. There are dozens of racks and hundreds of unique products, making it practically impossible to tell if anything is missing or out of place.

[if _slip]
You do find a couple of pretty stylish shirts in your size, though. You make a mental note to come back to pick them up when the store is open for business again.

You&#39;re so wrapped up in your own thoughts that you fail to notice the large puddle on the floor in front of you. Your foot slips on the slick tile, and you go skidding across the corridor and crash into a rack of child-sized Dark Father costumes. You pick yourself back up, silently cursing whoever thought it was appropriate to encourage kids dress up as the brutal half-human enforcer of a genocidal intersolar empire.

You squat down and quickly locate the puddle&#39;s source. A bottle of Dizzyland-branded mineral water has rolled under a stack of hoodies, and most of its contents have found their way onto the floor. The large eyes and gleaming white teeth of Ricky the Rat stare up at you from the label. There is a streak of some oily, yellow substance smeared across Ricky&#39;s face, giving him a sickly, jaundiced appearance.

You rub your shoulder and commit the puddle&#39;s location to memory. You&#39;re lucky that you didn&#39;t seriously injure yourself slipping like that, and you don&#39;t want to make the same mistake twice.

[else]

_You carefully step around the puddle of water when you reach it again. The water bottle is where you left it under the hoodie rack. The oily yellow streak is still smeared across the label, right over Ricky the Rat&#39;s goggle-eyed face. You suppress the urge to rotate the bottle so that you don&#39;t have to see his stupid grin any more._

[continue]

[[Investigate the rest of the market.-&gt;Market]]</tw-passagedata><tw-passagedata pid="69" name="Market: RoboBank Pile" tags="" position="884,971" size="100,100">{embed passage:&#39;Take Turn&#39;}

Despite the aggressive marketing push, it doesn&#39;t seem like the RoboBanks are selling particularly well. Only a few empty spots in the otherwise perfect pyramid of boxes in front of you suggest that any units have been sold at all.

The RoboBanks are all shaped like the popular Star Fights character RT-2D, and each model promises &#39;out-of-this-world electronic feedback and security stronger than the Cloud Prisons of Bespene-8!&#39; According to the back of the box, each RoboBank requires a key to unlock and has flashing lights that activate you drop a coin through a slot in the side of the robot&#39;s head.

The RoboBank comes in three different color schemes -- red, blue, and yellow, each of which is grouped together on a separate side of the pyramid of boxes. While blue would match the authentic RT-2D color scheme, it seems like more boxes are missing from the red side of the stack.

[[Keep exploring the market.-&gt;Market]]</tw-passagedata><tw-passagedata pid="70" name="Market: Cash Register" tags="" position="520,814" size="100,100">{embed passage:&#39;Take Turn&#39;}

Despite its prominent location by the market entrance, the cash register is almost hard to spot, as it is dwarfed on either side by a banner promoting the new line of RoboBank toys and a massive display of greeting cards.

You walk around the back of the cashier&#39;s station and note the view from the other side. Given its position, someone sitting by the register would be sure to see anyone entering or exiting the store via the main entrance.

A [[small window-&gt;Market: Window]] is set into the wall next to the cashier&#39;s chair. Like all of the market&#39;s windows, this one is covered covered with a colorful bolt of hanging fabric, casting the store into a half-light designed to evoke a mysterious and illicit atmosphere.

The cash register itself is locked down and does not appear to have been tampered with since the market closed for the night yesterday.

While the front of the checkstand has been decorated with various runes and artifacts to sell the illusion of a market stall on an alien world, the back side is all business. A [[wide drawer-&gt;Market: Register Drawer]] is set into the checkstand directly beneath the register. Underneath that is a bag hook and a small shelf for the cashier on duty to leave their personal belongings. A [[DSLR camera-&gt;Market: Camera]] has been left on one of the shelves.

Behind the register, a nondescript door leads to the [[A/V closet-&gt;AV Closet]], where a lot of the special effects for this area of the park are wired up.

[[Explore the rest of the market.-&gt;Market]]</tw-passagedata><tw-passagedata pid="71" name="Market: Window" tags="" position="424,936" size="100,100">{embed passage:&#39;Take Turn&#39;}

You brush aside the transluscent orange shroud that is draped over the window and peek outside. From here, you have an excellent view of the front of Lolo&#39;s Cantina and the snack cart stationed in front of it.

[[Keep examining the checkstand.-&gt;Market: Cash Register]]</tw-passagedata><tw-passagedata pid="72" name="Market: Register Drawer" tags="" position="296,934" size="100,100">{embed passage:&#39;Take Turn&#39;}

You slide open the checkstand drawer and peer inside. Most of the drawer is taken up by the usual workplace detritus: a box of paperclips; an open carton of cheap ballpoint pens; a number of loose rubber bands.

On the left side of the drawer is a small plastic tub split into two sections. Each section is identified by an adhesive plastic label.

The left-hand section is labeled ~~LOADING BAY DOOR~~. It contains a single heavy iron key.

The right-hand section is labeled ~~ROBOBANK MASTER KEYS~~. Two small silver keys rest in this section, each of which is attached to a round plastic keyring. One of the keyrings is blue, and the other is yellow.

[if keys.master_key]
_You compare the key you pulled out of the pond to the keys in the tub. Apart from the red keyring, it seems to match the design of the two silver keys perfectly._
[continue]

[[Keep examining the checkstand.-&gt;Market: Cash Register]]</tw-passagedata><tw-passagedata pid="73" name="Market: Camera" tags="" position="568,940" size="100,100">{embed passage:&#39;Take Turn&#39;}

The camera is equipped with a long barrel-shaped lens that claims to be capable of up to 10x optical zoom.

You thumb the power switch, and the camera&#39;s LCD screen glows with life. You tap the button to enter playback mode and start skimming through the photos stored on the camera.

The photos are all of {player.birthday} working at the snack cart outside Lolo&#39;s Cantina, almost without exception. Most of the photos have been taken at a high level of zoom from some distance away. Even the more zoomed-out photos are clearly of {player.birthday} -- the twin tentacles and bright yellow paint that define their costume are hard to miss, even at a distance.

The earliest photo is from July 2, 2019. However, most of the photos are from the last few weeks, with over 100 photos being taken since mid-October. You decide to focus on the photos taken yesterday, the day of the murder.

Five photos were taken yesterday:

**3:21 PM:** {player.birthday} is looking down at the snack cart, seemingly preparing food. Richard is leaning on the other side of the cart, grinning as he watches them work.

**3:24 PM** {player.birthday} has their hand raised in a wave. Richard&#39;s arm is visible as he walks off-camera.

**5:11 PM** A single bead of sweat runs down {player.birthday}&#39;s forehead as they brush a strand of hair out of their face. 

**5:31 PM** {player.birthday} is standing up a sign in from of the snack cart. The sign reads &quot;Please Order Inside!&quot;

**8:47 PM** {player.birthday} is wiping down the front of the snack cart with a cloth. Their back is to the camera, and their hindquarters are prominently focused in the frame.

[[Keep examining the checkstand.-&gt;Market: Cash Register]]</tw-passagedata><tw-passagedata pid="74" name="AV Closet: Laptop" tags="" position="298,796" size="100,100">password:&quot;&quot;
--

{embed passage:&#39;Take Turn&#39;}

The laptop perched on top of the [[server tower-&gt;AV Closet: Server Tower]] is relatively new but has clearly seen heavy use. The top of the lid is covered with stickers from local bands and craft breweries, and one of the function keys is missing.

[if !keys.security_feeds]
The laptop is plugged into a power strip on the floor, and a [[thick yellow video cable-&gt;AV Closet: Wires]] is connected to the laptop&#39;s HDMI port.
[else]
The laptop is plugged into a power strip on the floor.
[continue]

[unless keys.laptop]

You tap the laptop&#39;s trackpad a few times, and the screen snaps on, its bright glow almost blinding in the dim A/V closet.

The laptop appears to be password-protected. Overlaid on top of a high-resolution photo of a crisp alpine lake is a small white box encouraging you to log in.

{embed passage: &quot;Victim&#39;s Laptop: Lock Screen&quot;}

[else]

Several applications are currently open on the laptop:

&gt; [[Video - Sec_Feeds_20191109.mp4-&gt;Victim&#39;s Laptop: Security Video]]
&gt; [[Email - &quot;Fwd: Referral needed to complete your application&quot;-&gt;Victim&#39;s Laptop: Referral Email]]
&gt; [[Email - &quot;Draft: URGENT Security tip URGENT&quot;-&gt;Victim&#39;s Laptop: Bartender Email]]
&gt; [[Chat - {player.technician}-&gt;Victim&#39;s Laptop: Technician Chat]]

[continue]

[[Examine the rest of the A/V closer.-&gt;AV Closet]]</tw-passagedata><tw-passagedata pid="75" name="AV Closet: Wires" tags="" position="625,716.3333333333334" size="100,100">{embed passage:&#39;Take Turn&#39;}

The thick yellow cable runs down the wall before disappearing into a [[small hole-&gt;AV Closet: Wire Hole]] in the back of the A/V closet.

[if !keys.security_feeds]
The end of the cable is currently plugged into the [[laptop&#39;s-&gt;AV Closet: Laptop]] HDMI port.
[else]
_You have unplugged the end of the cable from the laptop and plugged it into the [[server tower&#39;s-&gt;AV Closet: Server Tower]] HDMI port instead._
[continue]

[if !keys.security_feeds]
You notice that there is an open HDMI port on the front of the server tower that the laptop is resting on.

[[Plug the cable into the server.-&gt;AV Closet: Toggle Wire]]
[else]
If you wish, you can plug it back into the laptop&#39;s open HDMI port.

[[Plug the cable into the laptop.-&gt;AV Closet: Toggle Wire]]
[continue]

[[Examine the rest of the A/V Closet.-&gt;AV Closet]]</tw-passagedata><tw-passagedata pid="76" name="AV Closet: Toggle Wire" tags="" position="750,695" size="100,100">keys.security_feeds:!keys.security_feeds

--

[if keys.security_feeds]
You plug the thick yellow cable into the server tower&#39;s HDMI port.
[else]
You plug the thick yellow cable back into the laptop&#39;s HDMI port.
[continue]

[[Keep examining the cable.-&gt;AV Closet: Wires]]</tw-passagedata><tw-passagedata pid="77" name="AV Closet: Wire Hole" tags="" position="616,572" size="100,100">{embed passage:&#39;Take Turn&#39;}

You examine the hole through which the cable disappears more closely. It&#39;s a clean job, and seems to have been professionally cut for the purpose of running cables such as these.

Based on your understanding of the Outer Rim&#39;s layout, you&#39;d guess that the security office is on the other side of this wall.

[[Keep examining the cable.-&gt;AV Closet: Wires]]</tw-passagedata><tw-passagedata pid="78" name="Victim&#39;s Laptop: Lock Screen" tags="" position="302,515" size="100,100">[align center]

**Enter Password** \
**Hint: Diamond Dog**

{text input for: &#39;password&#39;, required:false}

[[Submit-&gt;Victim&#39;s Laptop: Validate Password]]

[continue]</tw-passagedata><tw-passagedata pid="79" name="Victim&#39;s Laptop: Validate Password" tags="" position="313,640" size="100,100">keys.laptop:password === &quot;Chewbangles&quot; || password === &quot;chewbangles&quot; || password === &quot;CHEWBANGLES&quot;

--

[if keys.laptop]

You got it! The lock screen disappears and the laptop&#39;s desktop fades in to replace it.
[else]

The password field shudders and flashes red. It seems like that wasn&#39;t the right password.

[continue]

[[Continue-&gt;AV Closet: Laptop]]</tw-passagedata><tw-passagedata pid="80" name="Victim&#39;s Laptop: Security Video" tags="" position="106,771" size="100,100">{embed passage:&#39;Take Turn&#39;}

You click over to the video file. The video is sliced into four quadrants, with each quadrant showing a recording from one of the Outer Rim&#39;s security cameras.

The park in the footage is shrouded in darkness and devoid of guests. It looks this footage was recorded in the evening after the park had closed for the day.

Based on the application settings, it appears that the video has been configured to play on a continual loop through the laptop&#39;s HDMI port.


[[Examine the other applications.-&gt;AV Closet: Laptop]]</tw-passagedata><tw-passagedata pid="81" name="Victim&#39;s Laptop: Referral Email" tags="" position="108,659" size="100,100">{embed passage:&#39;Take Turn&#39;}

A forwarded email is open in the email client&#39;s reading pane.

***

&lt;blockquote&gt;

**Subject:** FWD: Referral needed to complete your application

Dear {player.birthday},

Thank you for your application to Juillard Drama. We are dedicated to helping actors just like yourself hone their skills both in the classroom and on the stage. We encourage people from all backgrounds to apply to our program, as we believe that the diverse stories of the future must be told by equally diverse storytellers.

This means that we must consider each applicant on a case-by-case basis. In your application, you state that the majority of your dramatic experience has come via on-the-job learning in your role as an improvisational performer at Dizzyland California. While we agree that this is valuable experience that could form the basis of a future in the dramatic arts, we will need further evidence of your passion and ability before we will be able to consider your application to our program. 

Please have a supervisor or close mentor who is familiar with your work write a referral letter in which they describe your performance in this role. Please have them reference your application ID number in their letter: #2761995

They may mail this referral letter to our admissions department at the following address:

Admissions Department \
The Juilliard School \
60 Lincoln Center Plaza \
New York, NY 10023

We will be happy to consider your application further once we have received said letter.

Sincerely, \
{npc.birthday_admissions} \
Director, Admissions

***


[[Examine the other applications.-&gt;AV Closet: Laptop]]</tw-passagedata><tw-passagedata pid="82" name="Victim&#39;s Laptop: Bartender Email" tags="" position="109,544" size="100,100">{embed passage:&#39;Take Turn&#39;}

An unsent draft email is open in the email client&#39;s composition view.

***

&lt;blockquote&gt;

~~Unsaved Draft~~ \
**Subject:** URGENT Security tip URGENT \
**To:** &#96;security@dizzyland.com&#96; \
**From:** &#96;anonymous@securemail.com&#96;

To whom it may concern,

I am writing to let you know of illegal activity occurring on Dizzyland property. I have reason to believe that Dizzyland employees are engaged in selling illegal narcotics to park guests while on duty in their roles as representatives of the Walt Dizzy Corporation.

This operation is being spearheaded by an employee by the name of {player.bartender} who works at the Outer Rim in Dizzyland California. They stash their earnings in a RoboBank toy that they keep behind the bar that only they have the key to, and they hide their product in a tub in the maintenance workshop behind the Kestrel ride.  If you investigate these things, I am sure you will find enough evidence to justify taking action against {player.bartender}.

Please excuse me making this report anonymously. {player.bartender} has threatened me to keep me silent, and I am afraid of what might happen to me.

Thank you for taking this matter seriously.
&lt;/blockquote&gt;

***


[[Examine the other applications.-&gt;AV Closet: Laptop]]</tw-passagedata><tw-passagedata pid="83" name="Victim&#39;s Laptop: Technician Chat" tags="" position="106,884" size="100,100">{embed passage:&#39;Take Turn&#39;}

***

[align center]
**Yesterday - 5:32 PM**
[align right]
Yo nerd!
[align left]
yo
[align left]
whats up?
[align right]
I was trying to use the printer in the break room but I think it jammed
[align right]
Can you fix it?
[align left]
kiiiinda busy right now
[align right]
This is important. I want to get it in the mail today
[align left]
lol ok grandpa
[align left]
gimme a few minutes to put a bow on what im doing
[align left]
should be able to check it out at like... 6?
[align right]
Works for me
[align center]
**Yesterday - 6:37 PM**
[align left]
uhhh so weird question
[align left]
did you mess with any of my stuff while you were in here?
[align left]
i think i may have lost a LOT of work so like
[align left]
if you did touch something lmk and maybe i can fix it
[align left]
hellloo??
[continue]

***

[[Examine the other applications.-&gt;AV Closet: Laptop]]</tw-passagedata><tw-passagedata pid="84" name="Loading Bay: Roll-Up Door" tags="" position="837,318" size="100,100">{embed passage:&#39;Take Turn&#39;}

The loading bay&#39;s roll-up door is made of overlapping sheets of corrugated steel. The mechanism to open the door is controlled by a [[small button pad-&gt;Loading Bay: Control Panel]] mounted between the roll-up door and the [[employee exit-&gt;Staff Exit]].

A metal chain is looped through a handle at the bottom of the door and [[a large iron ring sunk into the concrete floor-&gt;Loading Bay: Iron Ring]].

[[Explore the rest of the loading bay.-&gt;Loading Bay]]</tw-passagedata><tw-passagedata pid="85" name="Loading Bay: Pallets" tags="" position="753,448" size="100,100">{embed passage:&#39;Take Turn&#39;}

Six large wooden pallets sit along the loading bay&#39;s back wall. Each pallet is stacked high with brown carboard boxes of merchandise. The boxes on each pallet have been bound together with industrial amounts of plastic wrap to prevent them falling off in transit.

You stretch out the plastic wrap and try to squint through it to read the labels on the boxes inside. While two of the pallets contain various clothing items, the other four appear to be a new shipment of RoboBank toys.

As you&#39;re straightening out the plastic wrap of the final pallet, a long strip of it comes away in your hand. Looking closer, you realize that the plastic wrap on this pallet appears to have slashed repeatedly with a sharp object, shredding the outer layer into thin ribbons and carving deep lines into several of the boxes held within.

Apart from the cut marks, the boxes seem to be undisturbed. As far as you can tell, none of them have have been opened or removed from the pallet.

[[Explore the rest of the loading bay.-&gt;Loading Bay]]</tw-passagedata><tw-passagedata pid="86" name="Loading Bay: Market Door" tags="" position="950,608" size="100,100">{embed passage:&#39;Take Turn&#39;}

The door to [[Unkar&#39;s Antiquity Market-&gt;Market]] is made of heavy fireproof steel. While the other side of the door is painted to match the rest of the market, the side facing the loading dock is a bland, industrial gray. Its only adornment is a sign reading ~~Quiet! Guests inside!~~

As you reach your hand out to open the door, you notice some something reddish-brown smeared across the push bar. You kneel down to examine the smears closer, and the smell clears all doubt from your mind: it&#39;s blood.

[[Explore the rest of the loading bay.-&gt;Loading Bay]]</tw-passagedata><tw-passagedata pid="87" name="Emergency Exit: Locked" tags="" position="1078,343" size="100,100">You push on the door to the emergency exit, but it does not budge. It appears it cannot be opened from this side.

[[Keep exploring the loading bay.-&gt;Loading Bay]]</tw-passagedata><tw-passagedata pid="88" name="Loading Bay: Control Panel" tags="" position="752,189" size="100,100">{embed passage:&#39;Take Turn&#39;}

The control panel for the loading bay&#39;s roll-up door contains just two buttons: an arrow pointing up, and an arrow pointing down.

[[Press the up arrow.-&gt;Loading Bay: Open the Doors]]

{reveal link: &#39;Press the down arrow.&#39;, text: &#39;Nothing happens.&#39;}.

[[Keep investigating the roll-up door.-&gt;Loading Bay: Roll-Up Door]]</tw-passagedata><tw-passagedata pid="89" name="Loading Bay: Iron Ring" tags="" position="702,325" size="100,100">{embed passage:&#39;Take Turn&#39;}

A small square of the loading bay&#39;s smooth concrete floor has been cut away to form a hole about four inches deep, into which a heavy iron ring has been set. 

A metal chain connects the ring to the bottom of the bay&#39;s roll-up steel door, and the two ends of the chain are locked together by a large steel padlock.

[if keys.master_key]
_You compare silver key with the red fob to the padlock, but clearly too small to fit._
[continue]

[if keys.toy_key]
_You hold the plastic key from the RoboBank box up to the keyhole. Unsurprisingly, it doesn&#39;t fit. You&#39;re not sure why you even tried._
[continue]

You push the chain aside with your hand, and a flash of color catches your eye. Peering into the cutaway in the floor, you notice an [[orange plastic boxcutter-&gt;Loading Bay: Boxcutter]] that has slipped into the hole in the floor.

[[Keep investigating the roll-up door.-&gt;Loading Bay: Roll-Up Door]]</tw-passagedata><tw-passagedata pid="90" name="Loading Bay: Open the Doors" tags="" position="622,195" size="100,100">{embed passage:&#39;Take Turn&#39;}

The engine that powers the bay doors whirs into life with a deep, droning thrum that shakes the whole loading bay. There&#39;s no way that someone could open this door without half the park hearing it.

The bay door begin to creep upwards. Suddenly, the chain locking it to the floor snaps tight, the engine&#39;s safety mechanism engages, and the door crashes back down with an ear-splitting clatter.

[[Keep examining the control panel.-&gt;Loading Bay: Control Panel]]</tw-passagedata><tw-passagedata pid="91" name="Loading Bay: Boxcutter" tags="" position="552,334" size="100,100">{embed passage:&#39;Take Turn&#39;}

You pull the boxcutter out of the hole in the floor. It is made of highlighter orange plastic with a black thumb lever that extends and retracts the blade into the housing.

The blade is currently extended, and you notice several dark red flecks along the sides of the blade. You run your thumb over one of the flecks and sniff it. No doubt about it -- that&#39;s blood.

[[Keep investigating the iron ring.-&gt;Loading Bay: Iron Ring]]</tw-passagedata><tw-passagedata pid="92" name="Loading Bay: Shelves" tags="" position="758,575" size="100,100">{embed passage:&#39;Take Turn&#39;}

Three warehouse-grade shelving units sit along the loading bay&#39;s back wall. Each unit is made of anodyzed blue steel and is stacked high with cardboard boxes of merchandise. Standing at over twenty feet tall, the shelves reach all the way to the loading bay&#39;s ceiling.

To assist in reaching the higher shelves, an extensible metal ladder is propped alongside the end unit. It&#39;s a heavy, no-nonsense model, and it has clearly seen a lot of use over the years -- its bright yellow paint is covered with scuffs and scrapes from heavy use. While it is currently retracted down to a sensible twelve-foot height, the ladder could easily reach all the way to the highest shelves if fully extended.

You walk your way up the line of the shelving units, reading the sides of boxes to check their contents. It seems like most of the shelves contain clothing items in various sizes. One unit is dedicated to toys and games, with a wealth of miniature plasma pistols and 6-inch Chewbangles action figures. You do not notice any RoboBank boxes, however -- if there ever were any RoboBanks on these shelves, they&#39;ve all been moved into the market for display and sale by now.

[[Explore the rest of the loading bay.-&gt;Loading Bay]]</tw-passagedata><tw-passagedata pid="93" name="Parking Lot: Examine the Loading Dock" tags="" position="358,105" size="100,100">{embed passage:&#39;Take Turn&#39;}

From out here, the illusion that the Outer Rim is situated on a war-torn alien planet is completely broken.

While the other side of the loading dock&#39;s building has been decorated with molded cement and sculpted polyurethane to sell the illusion of stepping into the Star Fights universe, this side is completely spartan. Apart from the roll-up metal doors of the loading bay itself, the building is a two-story rectangle of matte gray nothingness, with barely a hint of the world of imagination and adventure that lies just beyond it.

The Kestrel&#39;s radio antenna is the only part of the Outer Rim high enough to be visible over the loading bay&#39;s flat, undecorated roof.

[[Keep investigating the parking lot.-&gt;Parking Lot]]</tw-passagedata><tw-passagedata pid="94" name="Victim&#39;s Car: Fast Food Bag" tags="" position="274,398" size="100,100">{embed passage:&#39;Take Turn&#39;}

You peel back the top of the fast food bag and peer inside.

You&#39;re a little disappointed to see that it really does just contain the remains of a fast food meal: a crumpled burger wrapper, a half-finished box of fries, an empty soda cup, and a couple unused ketchup packets. The logo on the bag and cup identify the meal&#39;s source as a popular local burger chain, not one of the vendors who operate at Dizzyland. 

Based on the smell (or lack thereof), it seems like the food hasn&#39;t been sitting here very long. Most likely, it was Richard&#39;s dinner last night. Not the most luxurious option as far as last meals go.

[[Examine the rest of the car.-&gt;Victim&#39;s Car]]</tw-passagedata><tw-passagedata pid="95" name="Victim&#39;s Car: Shopping Bag" tags="" position="413,399" size="100,100">{embed passage:&#39;Take Turn&#39;}

The shopping bag contains a sheet of stamps, an open box of envelopes, and a receipt indicating that Richard purchased both items from the post office in downtown Anaheim at 7:05 PM last night.

One stamp is missing from the sheet. You count the envelopes in the box, and confirm that it is also short by one.

[[Examine the rest of the car.-&gt;Victim&#39;s Car]]</tw-passagedata><tw-passagedata pid="96" name="Victim&#39;s Car: Glove Compartment" tags="" position="236,263" size="100,100">{embed passage:&#39;Take Turn&#39;}

You pop open the glove compartment and rifle through its contents. It mostly contains the unexceptional odds-and-ends you&#39;d find in any glove compartment: an insurance card; a CD copy of Dr Dre&#39;s _The Chronic_; several years worth of car registration records.

However, you also find a small black leather notebook. The front of the notebook contains a pre-printed financial planner for helping with simple monthly budgeting, while the rest of the notebook is filled with basic lined pages. Flipping through the notebook, it appears that Richard has been using it as a creative writing journal for the last few months.

As you reach to the end of the notebook, you discover an [[unsealed envelope-&gt;Victim&#39;s Notebook: Envelope]] tucked into its back cover.

&gt; [[Financial Planner-&gt;Victim&#39;s Notebook: Budget]]
&gt; [[6/22/2019 - Poetry-&gt;Victim&#39;s Notebook: Poetry 1]]
&gt; [[7/7/2019 - Poetry-&gt;Victim&#39;s Notebook: Poetry 2]]
&gt; [[9/1/2019 - Poetry-&gt;Victim&#39;s Notebook: Poetry 3]]

[[Examine the rest of the car.-&gt;Victim&#39;s Car]]</tw-passagedata><tw-passagedata pid="97" name="Victim&#39;s Notebook: Poetry 1" tags="" position="66,183" size="100,100">{embed passage:&#39;Take Turn&#39;}

[align center]

***

_Truth - 6/22/2019_ 

Do you remember when we first met?

I saw you first \
Buck-toothed and clown-shoed \
But I could see the truth beneath \
Your goodness \
Your beauty \
I watched you from afar \
Your eyes covered \
Did you watch me back? \
Did you look inside my soul? \
Did you see what lies within \
The truth

Still now, {player.actor} \
When we lie awake \
Can you feel it? \
When we kiss \
Do you taste it? \
Do you still love me? \
Could you still love me?

***

[continue]

[[Read the other notebook entries.-&gt;Victim&#39;s Car: Glove Compartment]]</tw-passagedata><tw-passagedata pid="98" name="Victim&#39;s Notebook: Poetry 2" tags="" position="67,301" size="100,100">{embed passage:&#39;Take Turn&#39;}

[align center]

***

_Vision - 7/7/2019_ 

You walk towards me \
A vision \
A nightmare \
Robed in armors that hide your face \
And your form \
And yet I know you \
I could never not know you \
{player.actor} \
What do you come to offer me?

Do you offer me \
Absolution? \
No \
But perhaps you can offer me \
Peace \
And beauty \
And a certain kindness \
In the time that we have left

***

[continue]

[[Read the other notebook entries.-&gt;Victim&#39;s Car: Glove Compartment]]</tw-passagedata><tw-passagedata pid="99" name="Victim&#39;s Notebook: Poetry 3" tags="" position="68,417" size="100,100">{embed passage:&#39;Take Turn&#39;}

[align center]

***

_Dream - 9/1/2019_ 

I saw you in a dream last night \
Standing on some far away hill \
Talking to a shadowed stranger \
I could not see his face

I called out \
But you did not hear \
And I just watched from afar

A passing breeze caught at your hair \
The sun stroked at your cheek \
Your face was seared into my heart

Then you turned, and for one moment \
One brilliant, fractured sliver of time \
Your eyes met with mine \
And I awoke with your name \
Humming against my lips

{player.birthday}


***

[continue]

[[Read the other notebook entries.-&gt;Victim&#39;s Car: Glove Compartment]]</tw-passagedata><tw-passagedata pid="100" name="Victim&#39;s Notebook: Budget" tags="" position="69,69" size="100,100">{embed passage:&#39;Take Turn&#39;}

[align center]

***

&lt;table style=&quot;width: 100%&quot;&gt;
&lt;tbody&gt;
   &lt;tr&gt;
    &lt;td&gt;&lt;/td&gt;
    &lt;td&gt;Takehome&lt;/td&gt;
    &lt;td&gt;Expenses&lt;/td&gt;
    &lt;td&gt;Savings&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;January&lt;/td&gt;
    &lt;td&gt;$2,879&lt;/td&gt;
    &lt;td&gt;$3,713&lt;/td&gt;
    &lt;td&gt;$11,283&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;February&lt;/td&gt;
    &lt;td&gt;$2,879&lt;/td&gt;
    &lt;td&gt;$4,101&lt;/td&gt;
    &lt;td&gt;$10,061&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;March&lt;/td&gt;
    &lt;td&gt;$2,879&lt;/td&gt;
    &lt;td&gt;$3,574&lt;/td&gt;
    &lt;td&gt;$9,366&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;April&lt;/td&gt;
    &lt;td&gt;$3,154&lt;/td&gt;
    &lt;td&gt;$3,766&lt;/td&gt;
    &lt;td&gt;$8,754&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;May&lt;/td&gt;
    &lt;td&gt;$3,154&lt;/td&gt;
    &lt;td&gt;$3,854&lt;/td&gt;
    &lt;td&gt;$8,054&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;June&lt;/td&gt;
    &lt;td&gt;$3,154&lt;/td&gt;
    &lt;td&gt;$3,682&lt;/td&gt;
    &lt;td&gt;$7,526&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;July&lt;/td&gt;
    &lt;td&gt;$3,154&lt;/td&gt;
    &lt;td&gt;$3,601&lt;/td&gt;
    &lt;td&gt;$7,079&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;August&lt;/td&gt;
    &lt;td&gt;$3,154&lt;/td&gt;
    &lt;td&gt;$3,642&lt;/td&gt;
    &lt;td&gt;$6,591&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;September&lt;/td&gt;
    &lt;td&gt;$3,154&lt;/td&gt;
    &lt;td&gt;$2,464&lt;/td&gt;
    &lt;td&gt;$7,281&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;October&lt;/td&gt;
    &lt;td&gt;$3,154&lt;/td&gt;
    &lt;td&gt;$2,340&lt;/td&gt;
    &lt;td&gt;$8,095&lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


***

[continue]

[[Read the other notebook entries.-&gt;Victim&#39;s Car: Glove Compartment]]</tw-passagedata><tw-passagedata pid="101" name="Victim&#39;s Notebook: Envelope" tags="" position="226,76" size="100,100">{embed passage:&#39;Take Turn&#39;}

You slide open the flap of the envelope and peer inside. It appears to contain a stack of glossy, postcard-sized photo prints.

You tip the photos into your hand and examine them further. Each photo appears to be a zoomed-in view of {player.guard} interacting with a park guest. The photographer seemed to be most interested in moments of close physical proximity between the guard and the guests.

In one photo, {player.guard} is leaning over a guest&#39;s shoulder to point out a location on a map the guest is holding. In another, they are bending down to pick some trash off of the ground, but if the photo was cropped more aggressively, you imagine it could suggest that they were crouching solely to get a better look at a nearby guest&#39;s prodigious backside.

Based on the lighting and background in each photo, they seem to have been taken over a period of several hours, if not days.

[[Examinine the rest of the notebook.-&gt;Victim&#39;s Car: Glove Compartment]]</tw-passagedata><tw-passagedata pid="102" name="Emergency Exit: Alarm" tags="" position="1157,27" size="100,100">{embed passage:&#39;Take Turn&#39;}

The alarm is a small electronic unit clad in a firetruck red metal case. It has both a built-in speaker and light, and there is a small keyhole for an emergency override key. 

[if keys.master_key]
_You try to slot the key that you took from the pond into the override keyhole, but it is too large to fit._
[continue]

[if keys.toy_key]
_You compare the plastic key from the RoboBank box to the override keyhole, but the hole is much too small for the key._
[continue]

You give the alarm a gentle tap, and you are surprised to feel it shift slightly in its bearings. Probing further, you give it the alarm a gentle tug, and the whole unit tips forwards, revealing a palm-sized hole in the wall behind it.

You examine the now-exposed back of the alarm and discover two things about it: it is not wired into anything, and the space where a 9 volt backup battery should sit is completely empty. Peering into the hole behind the alarm, you spot a loose power cable that is clearly supposed to plug into the alarm, but which is currently disconnected.

[[Keep examining the emergency exit.-&gt;Emergency Exit]]</tw-passagedata><tw-passagedata pid="103" name="Emergency Exit: Open the Door" tags="" position="1039,32" size="100,100">keys.emergency_exit: true

--

You cover your ears with your hands and press the push bar down with your hip. Despite what the sign on the door says, no alarm sounds.

You take your hands off of your ears and push the door open all the way, revealing the industrial interior of the Outer Rim&#39;s loading bay.

_You grab a nearby piece of cardboard and tuck it into the door frame to prop the door open in case you have to come back through the emergency exit later._

[[Continue into the loading bay.-&gt;Loading Bay]]</tw-passagedata><tw-passagedata pid="104" name="Workshop: Tool Library" tags="" position="2528,341" size="100,100">
{embed passage:&#39;Take Turn&#39;}

The workshop&#39;s tool library is meticulously organized. Dozens of hammers, screwdrivers, wrenches, drills, and power tools in all shapes and sizes have been hung from hooks or squirreled away into drawers and cubbies placed along the wall. When the call comes in that the Centennial Kestrel has broken down and you only have ten minutes before a hundred impatient guests start to notice that the line isn&#39;t moving, you want to know where your tools are.

A massive [[industrial parts washer-&gt;Workshop: Parts Washer]] is installed next to the tool racks.

[[Explore the rest of the workshop.-&gt;Workshop]]
</tw-passagedata><tw-passagedata pid="105" name="Workshop: Part Shelves" tags="" position="2518,112" size="100,100">
{embed passage:&#39;Take Turn&#39;}

The workshop&#39;s shelving units are are loaded down with nuts, bolts, screws, and electrical components, not to mention various containers of paints, oils, and industrial lubricants. 

Most of the shelves&#39; contents are stored in their original packaging. However, the back shelf is loaded with various [[opaque plastic tubs-&gt;Workshop: Tubs]], containing supplies that have been ordered in industrial quantities direct from the manufacturer. 

[[Explore the rest of the workshop.-&gt;Workshop]]</tw-passagedata><tw-passagedata pid="106" name="Workshop: Tubs" tags="" position="2297,101" size="100,100">{embed passage:&#39;Take Turn&#39;}

Each tub has been labeled on two sides with block capital letters punched into strips of adhesive red plastic. You sort through the tubs one by one, reading their labels and popping open the tops to examine their contents.

In addition to bulk supplies of various nails, screws, and fasteners, many of the tubs contain the raw components required to fabricate and repair the impressive props that litter the Outer Rim. You open tubs of liquid latex, casting foam, urethane rubber, and various sealants.

[if keys.label]

_You pull the label that you took from {player.bartender}&#39;s costume pocket and compare it to the tubs on the shelf. It doesn&#39;t take you long to find where it came from: [[a tub marked ~~FINISHING WAX~~ is missing one of its labels-&gt;Workshop: Drugs Tub]]._

[else]

You&#39;re eventually forced to admit that there are simply too many tubs for you to examine one-by-one like this. There are hundreds of tubs on the shelf, and it would take you all day if you were to continue brute forcing your way through them.

[continue]

[[Investigate the other shelves.-&gt;Workshop: Part Shelves]]</tw-passagedata><tw-passagedata pid="107" name="Workshop: Parts Washer" tags="" position="2696,355" size="100,100">{embed passage:&#39;Take Turn&#39;}

The parts washer is a seven-foot tall black monolith with a swing-out door capable of fitting even the largest mechanical components inside for cleaning. Its imposing frame would look right at home on the set of a Star Fights film, possibly standing in for a server bank or weapons locker in the background of the Dread Star.

You heave open the door to the parts washer. A massive pneumatic actuator that has been strapped into the center platform for cleaning, taking up most of the washer&#39;s main compartment. Based on its size, you assume the actuator must be part of the Centennial Kestrel ride -- there&#39;s nothing else in the Outer Rim big enough to require a motor that large.

In addition to the main compartment, the washer contains a mesh drawer with a latching top into which smaller components can be placed. This allows the machine to clean them without risking them bouncing around and damaging the its expensive insides. The drawer currently contains several large bolts, a handful of washers, and a flathead screwdriver with a narrow, eight-inch shank.

[[Keep investigating the tool library.-&gt;Workshop: Tool Library]]</tw-passagedata><tw-passagedata pid="108" name="Dressing Room: Birthday&#39;s Costume" tags="" position="3106,369" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

{player.birthday}&#39;s costume is one of the more elaborate in the Outer Rim. They play the role of street meat hawker {player.birthday_character}, an alien merchant with two long, yellow tentacles growing out of their head and running down their back.

To pull off this effect, their costume involves an elaborate headpiece to which the vinyl-covered tentacles are attached, along with a special belt containing concealed clips that the tentacles clip into at the waist. These clips provide the performer some extra support, taking some of the weight off of their neck and preventing the loose appendages from flopping all over the place and inhibiting their freedom of movement.

The rest of their costume is comprised of some heavy faux-leather overalls, a loose cotton shirt, and a half a pound of yellow makeup, some of which has found its way onto the collar and sleeves of the shirt.

[[Examine the other costumes.-&gt;Dressing Room]]</tw-passagedata><tw-passagedata pid="109" name="Dressing Room: Actor&#39;s Costume" tags="" position="3107,497" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

{player.actor} portrays one of the coolest characters in the whole Star Fights canon -- the mysterious Mantanorian bounty hunter {player.actor_character}!

{player.actor_character} is a fan-favorite character, and it&#39;s not hard to see why. With their hardened demeanor and custom body armor complete with jetpack and full-face visor, {player.actor_character} is the definition of cool. (At least, the definition of cool in the eyes of American boys ages eight to twelve.)

The Outer Rim&#39;s production staff spared no expense when it came to replicating the costume of this legendary antihero. The armor plates and helmet have been forged out of an aluminum alloy, strapped together with real leather, and layered over a heavy shirt and pants. The visor itself is made of darkened plastic sprayed with a reflective coating to totally obscure the identity of the performer behind the mask.

The whole getup has been through a weathering process to give the impression that it has really seen action in a years-long galactic civil war. The armor&#39;s olive green paint is scuffed and scratched, and there is an ashen dent in the chest-plate where it appears to have taken direct hit from a plasma bolt. The leather straps also have also been scraped and gouged in a few places, although this looks more like wear from recent use than artful distressing.

The shirt and pants are mostly kept clean for the benefit of the performer underneath, although they have picked up a good deal of dust, and there are a couple of reddish brown streaks on the right pant leg.

[[Examine the other costumes.-&gt;Dressing Room]]</tw-passagedata><tw-passagedata pid="110" name="Dressing Room: Bartender&#39;s Costume" tags="" position="3108,630" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

{player.bartender} is lucky. Where some of their coworkers have to spend their days with tentacles stuck to their lips with spirit gum or buried under head-to-toe fur in the southern Californian sun, their character is canonically human and thus blessedly free from any wigs or prosthetics.  

Even better, {player.bartender}&#39;s character is a smuggler, and their costume reflects that: the combination of black vest, white shirt, and leather boots is both striking and classic.

The vest is a modified flight jacket, with [[pockets of various sizes-&gt;Dressing Room: Bartender&#39;s Pockets]] running up and down its front.

[[Examine the other costumes.-&gt;Dressing Room]]</tw-passagedata><tw-passagedata pid="111" name="Workshop: Drugs Tub" tags="" position="2146,106" size="100,100">{embed passage:&#39;Take Turn&#39;}

You pop the lid off of the tub marked ~~Finishing Wax~~. You&#39;re not entirely surprised to discover that it contains no such thing. Rather, you see that it is full of individually packed zip-top bags of white powder.

[[Examine the other tubs.-&gt;Workshop: Tubs]]</tw-passagedata><tw-passagedata pid="112" name="Dressing Room: Bartender&#39;s Pockets" tags="" position="3271,630" size="100,100">_findLabel: !keys.label
keys.label:true

--

{embed passage:&#39;Take Turn&#39;}

[if _findLabel]

_You dig through each of the vest&#39;s pockets. Most of them are empty, but you find something in the last pocket: a stripe of adhesive label, with the words ~~FINISHING WAX~~ stamped into it in white block letters._

[else]

_You dig through the vest&#39;s pockets again. Now that you&#39;ve taken the ~~FINISHING WAX~~ label, there&#39;s nothing left but lint._

[continue]

[[Keep examining {player.bartender}&#39;s costume.-&gt;Dressing Room: Bartender&#39;s Costume]]</tw-passagedata><tw-passagedata pid="113" name="Locker Room: Lockers" tags="" position="2465,636" size="100,100">{embed passage:&#39;Take Turn&#39;}

The locker room wall is taken up by a massive bank of uniformly-sized lockers, one for every staff member who works at the Outer Rim. There are over fifty lockers in the bank, each protected by a combination lock. Thankfully, the police have been through the locker room ahead of you, and they have taken the liberty of labeling and unlocking each suspect&#39;s locker to aid in the investigation.

&gt; [[Search Richard Inglesias&#39; locker-&gt;Richard&#39;s Locker]]
&gt; [[Search {player.actor}&#39;s locker-&gt;Actor&#39;s Locker]]
&gt; [[Search {player.bartender}&#39;s locker-&gt;Bartender&#39;s Locker]]
&gt; [[Search {player.birthday}&#39;s locker-&gt;Birthday&#39;s Locker]]
&gt; [[Search {player.guard}&#39;s locker-&gt;Security&#39;s Locker]]
&gt; [[Search {player.shopkeeper}&#39;s locker-&gt;Shopkeeper&#39;s Locker]]
&gt; [[Search {player.technician}&#39;s locker-&gt;Technician&#39;s Locker]]


[[Keep investigating the rest of the locker room.-&gt;Locker Room]]</tw-passagedata><tw-passagedata pid="114" name="Locker Room: Showers" tags="" position="2313,443" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

You examine each of the shower stalls in turn. They are, to your eyes, pretty much standard-issue. In each stall, a locking door opens into a small dressing area with a tiny seat and a couple of towel hooks situated outside of the shower&#39;s splash radius.

The stall floors are covered in small tiles that appear clean and well-maintained. Set into the center of each stall floor is a six-inch, round metal drain grate. You notice a streak of some oily, yellow substance on the edge of the grate on the rightmost shower.

You try the handle of each shower in turn, and verify that they each work as expected.

[[Investigate the rest of the locker room.-&gt;Locker Room]]</tw-passagedata><tw-passagedata pid="115" name="Locker Room: Towels" tags="" position="2315,575" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

There are two large bins of towels stationed next to the shower stall. In one bin, clean towels are neatly stacked up and ready to be used. In the other, dirty towels have been tossed into a loose, wet pile.

You turn out the contents of each bin to look for clues. 

The clean towels reveal up nothing noteworthy as you unfurl them. The dirty towels are only slightly more interesting, but are significantly less pleasant to sort through. The cleaning staff would have already taken these away to be washed by now on any normal day, and the pile is starting to smell a little musty from sitting out so long.

Still, you diligently work your way through the pile, peeling apart and examining each wet towel one-by-one. One of the first towels you pull off the pile is streaked with bright yellow stains, but apart from that, the dirty towels contain nothing but old water and hints of chemical-smelling masculine body wash.

[[Investigate the rest of the locker room.-&gt;Locker Room]]</tw-passagedata><tw-passagedata pid="116" name="Locker Room: Bench" tags="" position="2596,634" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

The bench is about ten feet long and made of heavy, blue-painted wood. The bare steel legs have been bolted into the locker room&#39;s concrete floor with four heavy metal nuts each.

While examining the nuts, you notice an [[orange pill bottle-&gt;Locker Room: Pills]] that has rolled against one of the bench legs.

[[Investigate the rest of the locker room.-&gt;Locker Room]]</tw-passagedata><tw-passagedata pid="117" name="Locker Room: Pills" tags="" position="2718,679" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

The pill bottle rattles as you pick it up.  You turn it over to read the label stuck to its side.

***

&lt;blockquote&gt;

{player.actor} \
Anaheim, CA

XANAX \
alprazolam tablets \
.25 mg

TAKE ONE TABLET BY MOUTH 3 TIMES DAILY

Store at controlled room temperature, 20° to 25°C (68° to 77° F).

Protect from light.

Qty 90

WARNING: CONSULT PHYSICIAN BEFORE USE. NOT FOR USE BY CHILDREN OR THOSE WITH PRE-EXISTING MEDICAL CONDITIONS. NOT FOR USE BY WOMEN WHO ARE PREGNANT OR NURSING. DISCONTNUE USE IMMEDIATELY AND CALL A PHYSICIAN IF YOU EXPERIENCE ANY ADVERSE REACTION. DO NOT COMBINE WITH ALCOHOL. THIS PRODUCT MAY CAUSE DROWSINESS OR LOSS OF COORDINATION. DO NOT DRIVE A MOTOR VEHICLE OR OPERATE MACHINERY AFTER USE.

&lt;/blockquote&gt;

***

You pop the top off of the bottle, and confirm that it contains a few dozen pills with the words ~~XANAX .25~~ stamped into their chalk-white tops.

[[Keep examining the bench.-&gt;Locker Room: Bench]]</tw-passagedata><tw-passagedata pid="118" name="Richard&#39;s Locker" tags="" position="2626,824" size="100,100">{embed passage:&#39;Take Turn&#39;}

As part of the park&#39;s managerial staff, Richard did not have to change for work, and so his locker is clean and orderly in the way of things that see regular but minimal use.

Despite its limited use, the locker is not entirely empty. A [[bulky leather jacket-&gt;Richard&#39;s Locker: Jacket]] hangs from a hook, and a [[red plastic RoboBank toy-&gt;Richard&#39;s Locker: Robobank]] sits on the shelf at the top of the locker.

Next to the RoboBank is a pack of [[Star Fights-themed playing cards-&gt;Richard&#39;s Locker: Cards]].

[[Examine the other lockers.-&gt;Locker Room: Lockers]]</tw-passagedata><tw-passagedata pid="119" name="Actor&#39;s Locker" tags="" position="2216,831" size="100,100">{embed passage:&#39;Take Turn&#39;}

{player.actor}&#39;s locker is like a tiny dressing room unto itself. It contains not one, but two separate mirrors: a long one hung on the back of the locker door, and a smaller freestanding mirror sat on the shelf next to a variety of lotions, makeup, and other cosmetics.

A collection of photos has been artfully arranged around the border of the larger mirror. Each photo seems to have been taken at Dizzyland, and they all feature {player.actor} in some capacity: eating ice cream with friends; screaming as they hit the water on Splash Canyon; striding purposefully across the courtyard of The Outer Rim in full costume as {player.actor_character}; standing backstage wearing half of a squirrel costume, with a fuzzy, bucktoothed head tucked under their arm.

You notice that [[one of the photos-&gt;Actor&#39;s Locker: Photo]] appears to have been scribbled over with a permanent marker.

[[Examine the other lockers.-&gt;Locker Room: Lockers]]</tw-passagedata><tw-passagedata pid="120" name="Birthday&#39;s Locker" tags="" position="2505,824" size="100,100">{embed passage:&#39;Take Turn&#39;}

{player.birthday}&#39;s contains nothing out of the ordinary, at least at first glance. A spare change of clothes is neatly folded at the bottom of the locker, and a zip-up hoodie hangs from a hook above it.

The small shelf at the top of the locker contains two items: [[a glossy pamphlet-&gt;Birthday&#39;s Locker: Pamphlet]] of some kind and a [[small blue envelope-&gt;Birthday&#39;s Locker: Card]].

[[Examine the other lockers.-&gt;Locker Room: Lockers]]</tw-passagedata><tw-passagedata pid="121" name="Security&#39;s Locker" tags="" position="2753,832" size="100,100">{embed passage:&#39;Take Turn&#39;}

You pull open the door to {player.guard}&#39;s locker to discover that it is completely, utterly empty.

You close the locker to double-check the label on the outside. No doubt about it -- this is {player.guard}&#39;s locker, alright.

You open the locker back up to examine it once more. Apart from a thin layer of dust, there is absolutely nothing in this locker.

[[Examine the other lockers.-&gt;Locker Room: Lockers]]</tw-passagedata><tw-passagedata pid="122" name="Shopkeeper&#39;s Locker" tags="" position="2883,942" size="100,100">{embed passage:&#39;Take Turn&#39;}

{player.shopkeeper}&#39;s locker is a mess, stuffed high with dirty sweatshirts and old underwear.

You wrinkle your nose and sift through the unsavory pile. While it is mostly just a collection of crumpled and sweat-ripened laundry, you do pull out one item of interest: the detached strap of a brand-name DSLR camera.

The shelf at the top of the locker is blessedly clearer. A small stack of paperback novels takes up one side of the shelf. Flicking through them, you see they are all Star Fights novels. A lot of the classics are represented here: _Splinter of the Third Eye_; _Heir to the Dark Throne_; _Rebel Squadron_. There&#39;s even the recent [[_Tales from Lolo&#39;s_-&gt;Shopkeeper&#39;s Locker: Novel]], a tie-in novel released alongside the Outer Rim&#39;s opening that fleshes out the backstories of the characters who populate the park region.

[[Examine the other lockers.-&gt;Locker Room: Lockers]]</tw-passagedata><tw-passagedata pid="123" name="Technician&#39;s Locker" tags="" position="2876,829" size="100,100">{embed passage:&#39;Take Turn&#39;}

You swing open the door to {player.technician}&#39;s locker.

Immediately, your eyes are drawn to the full-length poster taped to the inside of the locker door. It appears to be a recruiting poster for Dizzyland&#39;s prestigious team of Imagineers, the elite corps of engineers and designers who design and build all of the Dizzyland rides. Flat, retro-style artwork of astronauts and rocket ships flank the iconic silhouette of the Dizzyland magic castle, and bold text underneath entreats the viewer to ~~Be part of the magic~~. Based on its many creases and bent corners, you&#39;d estimate this poster to be at least twenty years old. 

The shelves of {player.technician}&#39;s locker are piled high with various textbooks and technical how-to manuals. They cover a wide variety of topics, from electrical engineering and software design to stage makeup and special effects.

Next to the textbooks is a framed photograph. Two young children smile goofy gap-toothed smiles at the camera while wearing identical outfits and haircuts. They are holding up opposite ends of a banner that reads ~~Culver City Junior Robotics League~~.


[[Examine the other lockers.-&gt;Locker Room: Lockers]]</tw-passagedata><tw-passagedata pid="124" name="Bartender&#39;s Locker" tags="" position="2355,829" size="100,100">{embed passage:&#39;Take Turn&#39;}

{player.bartender}&#39;s locker is mostly empty and unadorned. The bottom of the locker is taken up by a [[purple canvas backpack-&gt;Bartender&#39;s Locker: Backpack]], and the upper shelf has a small collection of personal effects: deoderant, a comb, some hairspray, and so on. Nestled between these toiletries is an [[old school flip phone-&gt;Bartender&#39;s Locker: Phone]].

[[Examine the other lockers.-&gt;Locker Room: Lockers]]</tw-passagedata><tw-passagedata pid="125" name="Shopkeeper&#39;s Locker: Novel" tags="" position="3011,979" size="100,100">{embed passage:&#39;Take Turn&#39;}

You crack open the copy of _Tales from Lolo&#39;s_. While all of the books in {player.shopkeeper}&#39;s locker appear to be well-worn, this one has been fully dog-eared and notated. Someone has been through it with a yellow highlighter, marking up various passages and character details. While most of the notations have to do with Unkar, the proprietor of the local curiosity shop and gray market bazaar, there are highlighted sections involving almost all of Battooine&#39;s most famous denizens.

You are surprised when you turn a page and something circular and metallic falls out of the book and clatters to the floor. Bending down to pick it up, you realize that it is a large bronze coin.

Stamped onto the coin&#39;s surface are the words:

[align center]

~~To thine own self be true~~ \
~~18 Months~~ \
~~Recovery~~

[continue]

[[Keep investigating {player.shopkeeper}&#39;s locker.-&gt;Shopkeeper&#39;s Locker]]</tw-passagedata><tw-passagedata pid="126" name="Richard&#39;s Locker: Jacket" tags="" position="2639,974" size="100,100">_keysFound: !keys.car
keys.car: true

--

{embed passage:&#39;Take Turn&#39;}

[if _keysFound]
You rifle through the various flaps and pockets of Richard&#39;s leather jacket.

_To your delight, you discover a set of car keys zipped into the breast of the jacket. You retrieve the keys from the jacket pocket and drop them into your own._
[else]
_You search through Richard&#39;s jacket once more, but it appears you have already found everything of interest in the garment._
[continue]

[[Keep investigating Richard&#39;s locker.-&gt;Richard&#39;s Locker]]

</tw-passagedata><tw-passagedata pid="127" name="Richard&#39;s Locker: Robobank" tags="" position="2764,962" size="100,100">{embed passage:&#39;Take Turn&#39;}

The RoboBank is a recent addition to the Star Fights toy line-up, a kind of high-tech piggy bank in the shape of the robot character RT-2D. Kids can drop their allowance through a slot in the top of the trashcan-shaped robot&#39;s head, prompting the toy to respond with a dramatic series of lights and whistles rewarding them for their fiscal responsibility.

The model in Richard&#39;s locker is painted a bright hot rod red, a discrepancy from RT-2D&#39;s famous blue color scheme. You wonder if Richard was able to get this unit on discount.

You heft the RoboBank to check the weight of its contents, and you are surprised to find that the RoboBank&#39;s bottom panel flaps open as you lift it.

You flip the unit open to examine it closer. While normally the flap would be held shut by a latch controlled by a small keyhole, it appears that this unit was left unlocked. Peering through the open flap, you confirm that this RoboBank is completely empty.

[if keys.toy_key]
_Out of interest, you try the plastic key from the RoboBank box in the keyhole. It fits, but refuses to turn. You consider forcing it, but you worry that the cheap plastic would just snap off in the lock._
[continue]

[if keys.master_key]
_You pull the key that you retrieved from the pond out of your pocket and try it in the RoboBank&#39;s keyhole. It&#39;s a perfect fit. Twisting the key, you find that it easily locks and unlocks the bank&#39;s bottom panel._
[continue]

[[Keep investigating Richard&#39;s locker.-&gt;Richard&#39;s Locker]]

</tw-passagedata><tw-passagedata pid="128" name="Richard&#39;s Locker: Cards" tags="" position="2721,1094" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

The box declares that it contains _Officially Licensed Star Fights™ Playing Cards_ and promises that its owner will be able to &quot;Play classic games with over 50 classic characters from the Star Fights™ universe!&quot; However, when you pop open the top of the box, you discover that it is empty.

As you are putting the box back where you found it, you spot a wet ring on the locker shelf that you previously missed. It looks like condensation off of a glass or bottle, but the source is nowhere to be found.

You run a finger over the the ring and sniff it. You wrinkle your nose as the acrid whiff of hard alcohol hits your sinuses.

[[Keep investigating Richard&#39;s locker.-&gt;Richard&#39;s Locker]]

</tw-passagedata><tw-passagedata pid="129" name="Birthday&#39;s Locker: Pamphlet" tags="" position="2419,964" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

You hold the pamphlet up to the light to get a better look at it. It appears to be an admissions brochure for a pre-eminent drama school.

***

[align center]

**Juilliard Drama**

It all begins with YOU.

Our four-year acting program offers a wide variety of opportunities for undergraduate and graduate students to develop their craft, apply their rigorous training, and experience the wider theater community. Our school is dedicated to preparing 21st-century actors and playwrights like yourself tell diverse stories that speak to our collective imagination and shared humanity.

Apply today!

[continue]

***

[[Keep investigating {player.birthday}&#39;s locker.-&gt;Birthday&#39;s Locker]]

</tw-passagedata><tw-passagedata pid="130" name="Birthday&#39;s Locker: Card" tags="" position="2529,954" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

You pick up the blue envelope and turn it over in your hands. It is unaddressed, and the flap has already been torn open.

You shake out the envelope&#39;s contents, which turn out to be a Star Fights greeting card. The cover features an image of the Dread Star space station, under which are emblazoned the words: &quot;That&#39;s no moon...&quot;

{reveal link: &#39;Open the card.&#39;, passage:&quot;Birthday&#39;s Locker: Card Interior&quot;}

[[Keep investigating {player.birthday}&#39;s locker.-&gt;Birthday&#39;s Locker]]

</tw-passagedata><tw-passagedata pid="131" name="Birthday&#39;s Locker: Card Interior" tags="" position="2531,1064" size="100,100">&quot;...It&#39;s your birthday!&quot;

Underneath this groan-worthy punchline is a handwritten message:

***

_Happy birthday, {player.birthday}!_

_Its great seeing you around the park. Love what you&#39;re doing with {player.birthday_character}. Let me know if you ever want some tips about Twi&#39;lit culture so you can represent it more authentically. Management might not care, but the guests really appreciate it!_

_See you around!_

_-{player.shopkeeper}_

***</tw-passagedata><tw-passagedata pid="132" name="Bartender&#39;s Locker: Backpack" tags="" position="2296,954" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

You unzip the pockets of {player.bartender}&#39;s purple backpack and search through its contents. 

The backpack&#39;s main compartment is empty apart from a fine dusting of white powder. However, you find a snapback baseball cap zipped into the bag&#39;s front pocket. The cap is black with the silhouette of an apple embroidered into the front with gold thread.

[[Keep investigating {player.bartender}&#39;s locker.-&gt;Bartender&#39;s Locker]]</tw-passagedata><tw-passagedata pid="133" name="Bartender&#39;s Locker: Phone" tags="" position="2348,1074" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

You flip open the phone, and its screen flares into life. Despite its retro flip design and physical number pad, the phone appears to be a relatively recent model -- more budget offering than vintage tech.

There is a single text message thread saved in the phone&#39;s storage.

***

[align center]
**(323) 555-0120** \
**Yesterday - 1:12 PM**

[align right]
Still good to meet today?

[align left]
Fsho

[align left]
Just got a fresh batch in

[align left]
This shit is lit

[align left]
Could cut it 10x and no one would notice

[align right]
Word

[align right]
Same place as last time?

[align left]
You know it

[align right]
Be there in 15

[align left]
Aite

[align left]
See you then

[align left]
Apple Street for life

[align right]
Yeah man

[align right]
For life

[continue]

***

[[Keep investigating {player.bartender}&#39;s locker.-&gt;Bartender&#39;s Locker]]

</tw-passagedata><tw-passagedata pid="134" name="Actor&#39;s Locker: Photo" tags="" position="2171,981" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

You peel the photo off of the mirror and examine it more closely.

{player.actor} is standing close to a man, whose arm is around their shoulders. They&#39;re both casually dressed, and you recognize the room behind them as the Outer Rim&#39;s employee break room.

Unfortunately, someone has taken a permanent marker to the photo, scribbling heavily over the man&#39;s face and upper body as to render him effectively anonymous.

You turn the photo over and spot some writing on the back. It reads:

***

[align center]
_Richard and {player.actor}, 5/30/2019_ \
_First cast party at the Outer Rim_ \
_May the Fizz be with you!_
[continue]

***

[[Keep investigating {player.actor}&#39;s locker.-&gt;Actor&#39;s Locker]]</tw-passagedata><tw-passagedata pid="135" name="Break Room: Couch" tags="" position="3265,1397" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

The couch has has been in circulation for years, moving between break rooms and back offices across Dizzyland before ending up here. Its faded polka dot fabric is threadbare in places, and the cushions all sag towards the middle of the couch.

Despite it all, this couch remains extremely comfortable. Richard was known to use it as an unofficial office, and would frequently spend his work days building schedules and responding to emails on his laptop from this couch. Although you find a power cord plugged into the outlet behind the couch, there is no sign of the laptop itself.

You run your hands between each of the couch cushions, but all you find is a couple of quarters and an old candy wrapper.

[[Investigate the rest of the break room.-&gt;Break Room]]</tw-passagedata><tw-passagedata pid="136" name="Break Room: Kitchenette" tags="" position="3420,1396" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

The kitchenette is small but relatively well stocked. It features a sink, a microwave, and a coffee maker, along with a diverse collection of plates, bowls, and mugs. There is even a cutlery draw stocked with several plastic cutting boards and a [[variety of knives-&gt;Break Room: Knives]].

A [[soda vending machine-&gt;Break Room: Vending Machine]] stands to one side of the kitchenette.

[[Investigate the rest of the break room.-&gt;Break Room]]</tw-passagedata><tw-passagedata pid="137" name="Break Room: Notice Board" tags="" position="3582,1391" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

The notice board contains the usual mix of corporate and personal postings, as state mandated notices about employee rights and emergency procedure instructions sit side-by-side with &quot;for sale&quot; notices and outdated event invitations.

There is one notice that catches your eye, a one-page printout that reads in large, red letters:

***
[align center]

STOP TAMPERING WITH THE EMERGENCY EXIT!

We know its quicker to get to the parking lot through the service corridor, but the emergency exit is for EMERGENCIES ONLY. I don&#39;t care how easy it is, tampering with emergency equipment is a CRIME and anyone caught doing it will be fired.

YOU HAVE BEEN WARNED!!!

[continue]
***

[[Investigate the rest of the break room.-&gt;Break Room]]</tw-passagedata><tw-passagedata pid="138" name="Break Room: Vending Machine" tags="" position="3420,1546" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

The vending machine is a large model, offering more than a dozen varieties of soft drinks to parched Dizzyland staff members, all for the low, low price of $1.75 per drink.

All of the drinks are brands owned by one of Dizzyland&#39;s official beverage partners, and many of them have special Dizzyland-specific packaging. Even the bottles of mineral water have the grinning, bug-eyed face of Ricky the Rat plastered across their labels, as if that might make you more excited about quenching your thirst with a bottle of overpriced tap water.

[[Keep investigating the kitchenette.-&gt;Break Room: Kitchenette]]</tw-passagedata><tw-passagedata pid="139" name="Break Room: Knives" tags="" position="3540,1546" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

You pull the knives out the drawer and examine each of them in turn, inspecting their sizes, feeling their weight in your hand, and running your thumb gently against their blades to test their sharpness.

The kitchenette is equipped with a surprising variety of knives, including a chef&#39;s knife, a paring knife, several mismatched steak knives, and a long, serrated bread knife. Despite their differing sizes and utilities, however, all of the knives are utterly, uselessly, and uniformly blunt.

[[Keep investigating the kitchenette.-&gt;Break Room: Kitchenette]]</tw-passagedata><tw-passagedata pid="140" name="Break Room: Trash Can" tags="" position="3725,1391" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

You empty out the trash can and sort through its contents on the break room floor. In addition to usual assortment of crushed cans, plastic bottles, and old chip packets, you find two items of interest: a [[crumpled computer printout-&gt;Break Room: Letter]] and a [[receipt-&gt;Break Room: Receipt]].

[[Investigate the rest of the break room.-&gt;Break Room]]</tw-passagedata><tw-passagedata pid="141" name="Break Room: Letter" tags="" position="3672,1544" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

The printout is heavily crumpled, and in several places the paper is torn and the ink has streaked, possibly as the result of a printer malfunction. Although these defects make the text harder to read, with a little effort you can make out most of what it is saying.

You smooth out the paper&#39;s wrinkles against the floor, and you notice several yellow stains along its blank back side as you do so.

***

Dear {npc.birthday_admissions},

I am writing to you in response to a request I received for a referral letter regarding an application to your school, application ID #2761995.

I am afraid I cannot in good faith give my referral for the applicant in question.

While said applicant has demonstrated some enthusiasm to experiment with character and engage in both scripted and improvised dramatic scenes in their work around the park, their natural ability is lacking and their overall performance has been very weak in comparison to their peers.

Additionally, we have had various performance and disciplinary issues with this applicant. While I am legally forbidden to give details here, I trust you will understand that I do not make these claims lightly.

Similarly, I trust that you will keep the referral between us. I hope you understand that it could cause further issues in my workplace if the applicant in question were made aware of the contents of this letter.

I am sorry I could not offer you better news regarding this candidate.

Sincerely,

***

There is no signature on the document, but there is space under the letter&#39;s closing for one to be hand-written in.

[[Examine the other contents of the trash can.-&gt;Break Room: Trash Can]]</tw-passagedata><tw-passagedata pid="142" name="Break Room: Receipt" tags="" position="3807,1541" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

***

[align center]
**World&#39;s Market** \
9041 Lakewood Blvd

Tue 11/12/2019 8:37 PM

============================================
[continue]

[align left]

TORTLLA CHIP x2 @ $3.99 \
LAY CHIP BBQ x2 @ $2.99 \
GUACAMOLE 8OZ x1 @ $4.49 \
SALSA HOT x1 @ $3.99 \
SALSA VERDE x1 @ $3.99 \
WHISKEY W GRSE x1 @ $22.99 \
BAG L VTTN x1 @ $1,418.80

[continue]

[align center]
============================================
[continue]

[align left]
SUBTOTAL: $1,468.22 \
9.5% TAX: $139.48
TOTAL: $1,607.70

CREDIT CARD: $1,607.70 \
CARD TYPE: VISA \
CARDHOLDER: {player.actor} \
TOTAL PAYMENT: $1,607.70

CHANGE: $0.00
[continue]

***


[[Examine the other contents of the trash can.-&gt;Break Room: Trash Can]]</tw-passagedata><tw-passagedata pid="143" name="Bathroom: Trash" tags="" position="3915,1387" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

You take the lid off the trash can and start to dig through its contents. Blessedly, it seems to have been emptied recently, so there isn&#39;t too much to sort through.

In addition to the usual collection of balled-up paper towels and spare squares of toilet paper, you find that most of the trash can is taken up by the [[box from a RoboBank toy-&gt;Bathroom: RoboBank Box]]. The box is large enough that there&#39;s no way it could have fit through the flap on the trash can lid -- someone must have fully removed the lid to fit the box into the can.

[[Investigate the rest of the bathroom.-&gt;Staff Bathroom]]</tw-passagedata><tw-passagedata pid="144" name="Bathroom: Sink" tags="" position="4058,1378" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

The sink, like the rest of the bathroom, is sparse but clean. To Dizzyland&#39;s credit, one side of the sink contains a basket of free feminine hygiene products, while the other side hosts a basket containing a stack of loose paper towels.

As you examine the two baskets, you notice some bright red spots along the side of the paper towels. Upon close inspection, they appear to be small drips of dried blood.

[[Investigate the rest of the bathroom.-&gt;Staff Bathroom]]</tw-passagedata><tw-passagedata pid="145" name="Bathroom: Cabinet" tags="" position="4195,1378" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

You open the cabinet under the sink and take inventory of its contents. Some spare rolls of toilet paper, a bottle of toilet cleaner, a plunger -- nothing out of the ordinary there.

There is also a small first aid kit, which you remove from the cabinet and unzip to examine in more detail. It&#39;s a simple household kit, with nothing particularly potent or interesting inside: a collection of single-use packets of pain relievers, antacids, anti-inflammatories; a pair of latex exam gloves; a roll of gauze; a tube of antibiotic ointment; a box of adhesize bandages in various sizes.

You notice that the bandages are in mild disarray. The top of the box has popped open, and several bandages have spilled out and intermingled with the rest of the kit. Those that have remained in the box appear to have been stuffed in at random, with the sizes all mixed together and many of their corners crumpled and bent.

[[Investigate the rest of the bathroom.-&gt;Staff Bathroom]]</tw-passagedata><tw-passagedata pid="146" name="Workshop: Robot" tags="" position="2851,178" size="100,100">
--
{embed passage:&#39;Take Turn&#39;}

[if !keys.upload]

The figure slumped on the workbench turns out to be a half-completed animatronic robot. Whereas most of the robots at the park are covered in a thick vinyl skin and costumed to make them resemble iconic Dizzy characters, this one is still essentially naked, with all of its wires and servos exposed to the elements. With its shiny steel armature and skeletal features, it looks less like a beloved cartoon character and more like a robot sent from the future to kill someone&#39;s mom.

Fortunately for you, it does not appear to have any power right now. Even the bare LEDs that pass for its eyes are dark and lifeless.

[else]

_The half-completed robot is sitting up straight now that you have uploaded data to it. The LEDs that pass for its eyes glow bright red within their steel sockets._

As you approach it, something clicks inside the robot, and a voice emanates from its chest in a dull monotone:

{embed passage: &#39;Robot: Full Phrase&#39;}

[[Wave your hand in front of the robot&#39;s face.-&gt;Workshop: Robot (Wave)]]

[continue]

[[Explore the rest of the workshop.-&gt;Workshop]]</tw-passagedata><tw-passagedata pid="147" name="Workshop: Computer" tags="" position="2897,305" size="100,100">
{embed passage:&#39;Take Turn&#39;}

The computer terminal is a new model, an industrial workstation designed for crunching large amounts of data. To your surprise, it is powered on and unlocked.

Two applications are currently running on the terminal, a chat app and some kind of command line utility.

&gt; [[Chat - Richard-&gt;Workshop Computer: Richard Chat]]
&gt; [[Chat - {npc.imagineer}-&gt;Workshop Computer: Coworker Chat]]
&gt; [[Command Line Utility-&gt;Workshop Computer: Upload Utility]]

[[Explore the rest of the workshop.-&gt;Workshop]]</tw-passagedata><tw-passagedata pid="148" name="Workshop Computer: Richard Chat" tags="" position="3266,330" size="100,100">{embed passage:&#39;Take Turn&#39;}

***

[align center]
**Yesterday - 5:32 PM**
[align left]
Yo nerd!
[align right]
yo
[align right]
whats up?
[align left]
I was trying to use the printer in the break room but I think it jammed
[align left]
Can you fix it?
[align right]
kiiiinda busy right now
[align left]
This is important. I want to get it in the mail today
[align right]
lol ok grandpa
[align right]
gimme a few minutes to put a bow on what im doing
[align right]
should be able to check it out at like... 6?
[align left]
Works for me
[align center]
**Yesterday - 6:37 PM**
[align right]
uhhh so weird question
[align right]
did you mess with any of my stuff while you were in here?
[align right]
i think i may have lost a LOT of work so like
[align right]
if you did touch something lmk and maybe i can fix it
[align right]
hellloo??
[continue]

***

[[Examine the other applications.-&gt;Workshop: Computer]]</tw-passagedata><tw-passagedata pid="149" name="Workshop Computer: Coworker Chat" tags="" position="3436,305" size="100,100">{embed passage:&#39;Take Turn&#39;}

***

[align center]
**Yesterday - 2:17 PM**
[align left]
Big day tomorrow?
[align right]
you know it!
[align left]
Think you&#39;re ready? I know you&#39;ve been working on this for a while
[align right]
i think so?
[align left]
You should KNOW so
[align left]
I know you&#39;re proud of this tech, but stringing together a bunch of Markhov chains isn&#39;t going to make you an Imagineer.
[align right]
hey now
[align right]
you of all people should know this isn&#39;t just markhov chains
[align right]
sure, its a little rudimentary right now
[align right]
but given a large enough data set, this could be the future of guest interactions at dizzy parks!
[align right]
why bother hiring a bunch of drama burnouts to play your characters when you can have a perfect, interactive recreation instead?
[align right]
if your boss can&#39;t see that, then he isn&#39;t much of an imagineer imo
[align left]
Yeah yeah
[align left]
Just make sure it&#39;s impressive yeah?
[align left]
You&#39;re not gonna get another shot at this
[align right]
no pressure (◔_◔)
[align center]
**Yesterday - 6:45 PM**
[align right]
WELL THIS IS FUCKED UP
[align left]
What&#39;s up?
[align right]
okay so i cant prove this
[align right]
but i think my boss maybe... deleted my data set while he was in here?
[align left]
What?
[align right]
yeah...
[align right]
fuyck
[align left]
Can you get it back before the showcase?
[align right]
i dont know
[align right]
hrm, looks like there are some recordings still saved on the drive
[align right]
guess ill get those processing and cross my fingers they&#39;re workable
[align left]
Good luck
[align right]
thanks
[align right]
i think ill need it
[continue]

***

[[Examine the other applications.-&gt;Workshop: Computer]]</tw-passagedata><tw-passagedata pid="150" name="Workshop Computer: Upload Utility" tags="" position="3216,142" size="100,100">{embed passage:&#39;Take Turn&#39;}

***

[align left]
&#96;ANALYSIS COMPLETE. SYMBOLS IDENTIFIED:&#96; \
&#96;SENTENCES: 5026&#96; \
&#96;NOUNS: 7269&#96; \
&#96;VERBS: 4955 &#96; \
&#96;ADJECTIVES: 3424&#96;

&#96;WOULD YOU LIKE TO:&#96; \
&#96;A) UPLOAD DATA TO UNIT&#96; \
&#96;B) DISCARD AND RE-RECORD&#96;

[align right]
&#96;bkghlblh&#96;

[align left]
&#96;DISCARDING DATA.&#96;

&#96;ENTERING AMBIENT RECORDING MODE...&#96;

&#96;RECORDING FINISHED.&#96;

&#96;WOULD YOU LIKE TO:&#96;

&#96;A) ANALYZE RECORDING&#96; \
&#96;B) DISCARD AND RE-RECORD&#96;

[align right]
&#96;A&#96;

[align left]
&#96;ANALYZING...&#96; \
&#96;DO NOT LOCK OR SHUT DOWN COMPUTER WHILE ANALYSIS IS IN PROGRESS...&#96;

&#96;ANALYSIS COMPLETE. SYMBOLS IDENTIFIED:&#96; \
&#96;SENTENCES: 14&#96; \
&#96;NOUNS: 7&#96; \
&#96;VERBS: 3 &#96; \
&#96;ADJECTIVES: 4&#96;

[if !keys.upload]
&#96;WOULD YOU LIKE TO:&#96; \
&#96;A)&#96; {link to: &#39;Workshop Computer: Perform Upload&#39;, label: &#39;&#96;UPLOAD DATA TO UNIT&#96;&#39;} \
&#96;B) DISCARD AND RE-RECORD&#96;
[else]
&#96;WOULD YOU LIKE TO:&#96; \
&#96;A) UPLOAD DATA TO UNIT&#96; \
&#96;B) DISCARD AND RE-RECORD&#96;
[continue]

[if keys.upload]
[align right]
&#96;a&#96;

[if keys.upload]
[align left]
&#96;UPLOADING...&#96;

&#96;SAMPLES UPLOADED.&#96;
[continue]

***

[[Examine the other applications.-&gt;Workshop: Computer]]</tw-passagedata><tw-passagedata pid="151" name="Workshop Computer: Perform Upload" tags="" position="3044,120" size="100,100">keys.upload: true

--

{embed passage:&#39;Take Turn&#39;}

You carefully type the &#39;A&#39; key and hit enter.

The terminal thinks for a moment, then confirms your selection. Suddenly, you hear a whir to your left, as the [[robot-&gt;Workshop: Robot]] on the workbench jerks to life.

[[Keep examining the computer.-&gt;Workshop: Computer]]</tw-passagedata><tw-passagedata pid="152" name="Robot: Full Phrase" tags="" position="3601,126" size="100,100">robot.nouns: [player.bartender, &quot;Richard&quot;, &quot;you&quot;, &quot;drugs&quot;, &quot;container&quot;, &quot;labels&quot;, &quot;business&quot;, &quot;menu&quot;]
robot.verbs: [&quot;finish&quot;, &quot;store&quot;, &quot;deal&quot;, &quot;love&quot;]
robot.adjectives: [&quot;new&quot;, &quot;good&quot;, &quot;strong&quot;, &quot;same&quot;, &quot;special&quot;, &quot;rich&quot;]
--
{embed passage: &#39;Robot: Greeting&#39;} {embed passage: &#39;Robot: Sentence&#39;}</tw-passagedata><tw-passagedata pid="153" name="Robot: Greeting" tags="" position="3732,124" size="100,100">_noun: robot.nouns[random.d8-1]
_verb: robot.verbs[random.d4-1]
_adjective: robot.adjectives[random.d6-1]
_greeting: random.d6

--

[if _greeting === 1]
&#96;Howdy, {_noun}&#96;
[if _greeting === 2]
&#96;Yo, {_noun}&#96;
[if _greeting === 3]
&#96;Sorry.&#96;
[if _greeting === 4]
&#96;It&#39;s {_adjective}.&#96;
[if _greeting === 5]
&#96;Nice.&#96;
[if _greeting === 6]
&#96;Yup.&#96;
[continue]</tw-passagedata><tw-passagedata pid="154" name="Robot: Sentence" tags="" position="3866,128" size="100,100">d4s: random.d4
d6s: random.d6
d8s: random.d8
_noun: robot.nouns[random.d8-1]
_noun2: robot.nouns[random.d8-1]
_verb: robot.verbs[random.d4-1]
_verb2: robot.verbs[random.d4-1]
_adjective: robot.adjectives[random.d6-1]
_adjective2: robot.adjectives[random.d6-1]
_sentence: random.d10

--

[if _sentence === 1]
&#96;What took {_noun}?&#96;
[if _sentence === 2]
&#96;I had some {_noun} to {_verb}.&#96;
[if _sentence === 3]
&#96;How&#39;s the {_adjective} {_noun}?&#96;
[if _sentence === 4]
&#96;They&#39;re meant to be extra {_adjective}.&#96;
[if _sentence === 5]
&#96;Going to {_verb} it in the {_adjective} {_noun}?&#96;
[if _sentence === 6]
&#96;Damn, one of the {_noun} came off.&#96;
[if _sentence === 7]
&#96;I&#39;ll {_verb} with that later.&#96;
[if _sentence === 8]
&#96;Good doing {_noun} with {_noun2}.&#96;
[if _sentence === 9]
&#96;More {_noun} for the {_adjective} {_noun2}.&#96;
[if _sentence === 10]
&#96;We&#39;re gonna be {_adjective}.&#96;
[continue]</tw-passagedata><tw-passagedata pid="155" name="Workshop: Robot (Wave)" tags="" position="2698,100" size="100,100">You wave your hand in front of the robot&#39;s glowing eyes. You hear a click from inside the robot, and it &quot;speaks&quot; again in the same digital monotone:

{embed passage: &#39;Robot: Full Phrase&#39;}

[[Wave your hand in front of the robot again.-&gt;Workshop: Robot (Wave)]]

[[Explore the rest of the workshop.-&gt;Workshop]]</tw-passagedata><tw-passagedata pid="156" name="Water Feature: Bag" tags="" position="1523,1680" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

You haul the bag out of the pond and examine it. It looks like a fashionable design, and based on the designer&#39;s name on the label, it was likely very expensive as well.

You unlatch the bag&#39;s clasps and peer inside. It&#39;s stuffed full of loose cash, mostly twenties and fifties. You&#39;d estimate there must be at least ten thousand dollars in here.

[[Keep examing the pond.-&gt;Water Feature]]</tw-passagedata><tw-passagedata pid="157" name="Bathroom: RoboBank Box" tags="" position="3916,1525" size="100,100">_find_toy_key:!keys.toy_key
keys.toy_key:true

--

{embed passage:&#39;Take Turn&#39;}

According to the front of the box, it once contained the red model of RoboBank. However, when you open the top of the RoboBank box you discover the toy itself has already been removed.

[if _find_toy_key]
_Instead, you find a small red plastic key, and a folded up receipt. You pocket the key and unfold the receipt._
[else]
_Now that you&#39;ve removed the plastic key, the box contains only the folded-up receipt._
[continue]

***

[align center]
**Unkar&#39;s Antiquity Market** \
Dizzyland California \
1313 Dizzyland Dr

Tue 11/12/2019 3:37 PM

============================================
[continue]

[align left]

ROBOBNK RED x1 @ $49.99

[continue]

[align center]
============================================
[continue]

[align left]
SUBTOTAL: $49.99 \
7.75% TAX: $3.87 \
TOTAL: $53.86

CREDIT CARD: $53.86 \
CARD TYPE: MC \
CARDHOLDER: Richard Inglesias \
TOTAL PAYMENT: $53.86

CHANGE: $0.00
[continue]

***


[[Examine the rest of the trash.-&gt;Bathroom: Trash]]</tw-passagedata><tw-passagedata pid="158" name="Cantina: Drinks" tags="" position="2943,1553" size="100,100">keys.drink_smell:true

--

{embed passage:&#39;Take Turn&#39;}

You examine the array of snacks and drinks that remain intact on the bar.

There is a small collection of different beverages, all served in official Lolo&#39;s Cantina glassware. As one of the only places in Dizzyland that serves alcohol to the guests, Lolo&#39;s stocks a full bar, including various signature cocktails and a number of beers brewed specially for the Outer Rim by local craft breweries.

The dirty glasses on the bar are representative of just about the whole menu, with half-drunk beers mingling with a variety of radioactively-colored cocktails. There is also a half-empty cup of the lethally sweet Hyperspace Hibiscus non-alcoholic cocktail. And although official Dizzyland guidelines prohobit serving unmixed hard alcohol, you notice four empty shot glasses on the bar.

You study each of the drinks in turn, but to the best of your ability, you do not detect that any of them have been drugged or otherwise tampered with.

[if keys.blood_smell]
_As you sniff the cup of Hyperspace Hibiscus, though, you come to a realization: it smells exactly like the stain on Richard&#39;s shirt!_
[continue]

In addition to the drinks, there are several open containers of chips and dips on the bar. Based on their non-Dizzyland packaging, the snacks seem to have been bought elsewhere and just opened at the party.

[[Investigate the rest of the cantina.-&gt;Cantina]]</tw-passagedata><tw-passagedata pid="159" name="Bar: Receipt Spike" tags="" position="3064,1700" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

You pick up the receipt spike and turn it over in your hands. It&#39;s made of solid metal, and you&#39;re surprised by its heft as you lift it off the counter.

Like most receipt spikes, this one is comprised of a long, vertical spike mounted on a heavy stand to prevent it from tipping. Its sharp tip allows the bartender to impale completed orders and unwanted receipts onto the spike, where they will safely remain until it is time to count up all the orders at the end of the day

Whereas most receipt spikes are a plain columns of sharpened metal, this one appears to be more ornate. It has a slightly (some might say viciously) flanged tip, and lines of ornate filigree run down the sides of the spike itself.

You slide the assembled receipts off of the spike in order to examine its design more closely. Now that it has been fully revealed, you realize the the spike is meant to resemble the wrist blades of the feared Mantanorian bounty hunters. The attention to detail of the Dizzyland prop crew never ceases to impress!

[[Keep investigating behind the bar.-&gt;Bar]]</tw-passagedata><tw-passagedata pid="160" name="Bar: Cabinets" tags="" position="3214,1700" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

You dig through each of the cabinets in turn. Most seem to be used to store extra bar supplies, and you discover various bar cloths, boxes of latex gloves, and tubes of cleaning powders as you go through them.

One cabinet at the end of the bar catches your eye, though, as it contains a single red RoboBank toy. This piggy bank-style toy is modeled in the shape of the popular Star Fights character RT-2D, and encourages kids to practice good financial habits by entrusting their money to the stalwart robotic companion.

Based on the tab of white card poking out of the RoboBank&#39;s battery compartment, this model appears to be brand new and unused.

A hinged panel on the bottom of the toy is locked shut by a small keyhole. Presumably, this is how a kid would retrieve their money when it came time to liquidate their savings for some new toy or video game.

[if keys.toy_key &amp;&amp; !keys.master_key]
_You try the plastic key from the RoboBank box in the keyhole. It fits perfectly, and with a quick twist you have unlocked and opened the bottom panel._
[continue]

[if keys.master_key]
_You try the key you retrieved from the pond in the keyhole. It fits perfectly, and with a quick twist you have unlocked and opened the bottom panel._
[continue]

[if keys.master_key || keys.toy_key]
_You flip the RoboBank upside down and peer through the open panel. It&#39;s mostly empty, but you spot a few loose bills hiding at the bottom of the bank. You pull them out and count them: less than two hundred dollars in twenties and fifties._
[continue]

[if keys.toy_key &amp;&amp; keys.master_key]
_Out of interest, you try the plastic key from the RoboBank box in the keyhole as well. This key fits just as well as the silver key did, and you confirm that it is also able to lock and unlock this RoboBank unit with ease._
[continue]

[[Keep investigating behind the bar.-&gt;Bar]]</tw-passagedata><tw-passagedata pid="161" name="Snack Cart: Sign" tags="" position="2346,1758" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

You lean the sign away from the cart, far enough for you to read the writing upon it:

***

[align center]

**By order of the Dark Empire:**

**This snack cart is temporarily closed.** \
**Please order inside!**

[continue]

***

As you tip back the sign, you notice a [[folded piece of paper-&gt;Snack Cart: Note]] trapped underneath it.

[[Keep investigating the snack cart.-&gt;Snack Cart]]</tw-passagedata><tw-passagedata pid="162" name="Snack Cart: Note" tags="" position="2494,1759" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

You pick the note up from the dust and unfold it. It is handwritten on a piece of lined notebook paper.

***

Hi {player.birthday}!

Don&#39;t forget about your birthday bash tonight. We&#39;ll start in Lolo&#39;s right after the park closes. Invite whoever you want. Well, maybe not {player.shopkeeper}, unless you want your ear talked off. It&#39;s your party though, so...

Oh, and don&#39;t worry about getting caught; I&#39;ve got a plan for that!

See you tonight :)

-Richard

***

[[Keep investigating the snack cart.-&gt;Snack Cart]]</tw-passagedata><tw-passagedata pid="163" name="Kestrel: Cockpit" tags="" position="1881,458" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

You step from the Centennial Kestrel&#39;s lounge into its cockpit. This is where the actual ride takes place, as four guests at a time get to pilot the Kestrel through a classic smuggling-run-gone-wrong scenario. 

The Dizzyland designers had to make several tweaks to accomodate the ride&#39;s requirements. Whereas the film version of the Kestrel canonically only has seats for the pilot and co-pilot, the ride version has been expanded to include stations for a gunner and engineer as well.

Additionally, the cockpit&#39;s viewscreen has been replaced with a huge, curved projection screen, allowing the guests to seemingly fly the ship across the length of the galaxy without ever leaving the safety of Anaheim, California.

At the end of the ride, the screen also displays arcade style scores for each of the players, encouraging guests to fly multiple times to attempt to beat their own high scores (and those of their friends).

It seems that no one has ridden the ride since last night&#39;s party. As such, the viewscreen is still displaying the scores of the last guests to ride it:

***

[align center]
**&#96;Scores&#96;** \
&#96;Snake Eyes (Pilot) - 12360&#96; \
&#96;{player.shopkeeper} (Gunner) - 12359&#96; \
&#96;{player.birthday} (Co-Pilot) - 10015&#96; \
&#96;{player.technician} (Engineer) - 8560&#96;
[continue]

***

[[Return to the Kestrel&#39;s lounge.-&gt;Kestrel: Lounge]]</tw-passagedata><tw-passagedata pid="164" name="Kestrel: Body" tags="" position="1661,689" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

Richard Inglesias has looked better. His body is slumped sideways on one of the lounge&#39;s circular couches, and while the lower half of his face is obscured by a thick, dark beard, what you can see of his expression suggests he didn&#39;t go quietly. His eyes are rolled back into his skull, the corners of his mouth are twisted, and [[his fingers-&gt;Kestrel: Fingers]] are tensed into twisted claws. There is visible bruising on Richard&#39;s face, and his lower lip is badly swollen.

While you&#39;d need the results of a proper autopsy to be sure, his cause of death seems readily apparent -- Richard&#39;s [[collared shirt-&gt;Kestrel: Shirt]] has been perforated with [[twelve narrow holes-&gt;Kestrel: Wounds]], through which he has lost a massive amount of blood. 

Richard&#39;s [[cell phone-&gt;Kestrel: Phone]] has fallen out of his pocket and onto the couch cushions.

[[Keep investigating the Kestrel&#39;s lounge.-&gt;Kestrel: Lounge]]</tw-passagedata><tw-passagedata pid="165" name="Kestrel: Cards" tags="" position="1766,457" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

You do your best to gather the cards up off of the floor and wipe the worst of the blood off of them. Fortunately, the cards have a spill-resistant plastic coating, and they clean up quite nicely.

The cards are from a deck of Star Fights-themed playing cards sold at Unkar&#39;s Antiquity Market. Richard was known to carry them with him and toy with them whenever he was bored or stressed, which meant he was playing with them most of the time he wasn&#39;t actively working.

The cards all feature characters and photos from the various Star Fights movies, with all of the most famous characters and ships given top-billing on the face cards. These include:

* **King of Clubs - Emperor Palpating**: The Dark Empire&#39;s wizened and near-immortal leader
* **Queen of Clubs - The Dread Star**: A planet-sized space station armed with a powerful doomsday laser. Its inclusion makes for an unfortunate reminder of the lack of prominent female characters in the original Star Fights trilogy
* **Jack of Clubs - Dark Father**: The Emperor&#39;s fearsome, half-cybernetic enforcer. Last survivor of an ancient race of warrior wizards

* **King of Hearts - Lou Starleaper**: Plucky farmgirl protagonist and hero of the Galactic Rebellion
* **Queen of Hearts - Prince Levi**: Diplomatic envoy turned master strategist. Lou&#39;s long-lost twin
* **Jack of Hearts - Dash Holdo**: Lovable rogue with a heart of gold. Captain of the Centennial Kestrel

* **King of Diamonds - Chewbangles**: A bipedal dog-man who communicates only in barks and whines. Co-pilot of the Centennial Kestrel and Dash Holdo&#39;s best friend
* **Queen of Diamonds - RT-2D**: A fan-favorite, trash can-shaped robot. Somehow the only character to appear in all nine mainline films
* **Jack of Diamonds - C-3DO**: A robot built for diplomacy and translation, skills which you might hope would be more relevant in an intergalactic, cross-species rebellion than they appear to be in any of the movies 

* **King of Spades - Z-Wing**: Lou Starleaper&#39;s ride of choice, and one of the most iconic ships in the whole Star Fights franchise 
* **Queen of Spades - Centennial Kestrel**: Dash Holdo&#39;s famous contraband runner. The ship you&#39;re currently standing in
* **Jack of Spades - DIE Fighter**: The dime-a-dozen dogfighters of the Dark Empire. Cannon fodder, essentially

[[Keep investigating the Kestrel&#39;s lounge.-&gt;Kestrel: Lounge]]</tw-passagedata><tw-passagedata pid="166" name="Kestrel: Bottle" tags="" position="1994,461" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

You scoop the liquor bottle up off of the ground and examine it. The label declares it to be a bottle of Wild Grouse, a cheap-but-not-too-cheap brand of bourbon.

The bottle sloshes as you pick it up. You hold it up to the light, and see that it is less than half full. Based on the limited amount of spilled liquor on the floor, it seems like it was mostly empty before it was knocked over.

[[Keep investigating the Kestrel&#39;s lounge.-&gt;Kestrel: Lounge]]</tw-passagedata><tw-passagedata pid="167" name="Kestrel: Fingers" tags="" position="1489,526" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

Richard&#39;s hands have seized into tense, spidery claws. His fingernails are ragged and in some cases have torn away from the nail bed, leaving them blackened with dried blood.

Intrigued, you examine his nails more closely. Some of them seem to have scraps of something other than blood caught underneath them: tufts of brown leather mingled with flecks of greenish paint.

[[Keep examining Richard&#39;s body.-&gt;Kestrel: Body]]</tw-passagedata><tw-passagedata pid="168" name="Kestrel: Phone" tags="" position="1643,534" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

You pick up Richard&#39;s phone and tap the home button to wake it up. It requires a fingerprint to unlock, but fortunately you&#39;re sitting right next to Richard&#39;s body, and you assume he won&#39;t mind you borrowing his thumb to help further the search for his killer.

With the phone unlocked, you have access to his recent text message history:

&gt; [[Texts - {player.actor}-&gt;Richard&#39;s Phone: Actor]]
&gt; [[Texts - {player.bartender}-&gt;Richard&#39;s Phone: Bartender]]

[[Keep examining Richard&#39;s body.-&gt;Kestrel: Body]]</tw-passagedata><tw-passagedata pid="169" name="Kestrel: Shirt" tags="" position="1494,651" size="100,100">_shirt_closed:!keys.shirt
keys.shirt: true

--

{embed passage:&#39;Take Turn&#39;}

Richard&#39;s collared work shirt should be light blue with a subtle pattern of white flowers, but the whole shirtfront has been soaked through with [[dark red blood-&gt;Kestrel: Blood]].

[if _shirt_closed]
You notice that Richard&#39;s top four buttons are undone, causing his collar to slump to one side and exposing his clavicle. You undo the rest of the buttons and open his shirt all of the way, giving you a better view of the [[wounds-&gt;Kestrel: Wounds]] that pepper his torso and revealing a tattoo of a snake on his right pectoral.
[else]
_Richard&#39;s top four buttons were undone when you first arrived, and you have since unbuttoned the rest of his shirt, giving you a better view of the [[wounds-&gt;Kestrel: Wounds]] that pepper his torso and revealing a tattoo of a snake on his right pectoral._
[continue]


[[Keep examining Richard&#39;s body.-&gt;Kestrel: Body]]</tw-passagedata><tw-passagedata pid="170" name="Kestrel: Wounds" tags="" position="1493,781" size="100,100">--

{embed passage:&#39;Take Turn&#39;}

Richard&#39;s shirt has been perforated with twelve narrow holes, through which he has lost a staggering amount of blood. The wounds are spread all over his upper torso, and with each one leaving a ragged hole less than a centimeter wide in his shirt.

[if !keys.shirt]
The incisions are so small that it is hard to make out any more detail about the wounds while [[Richard&#39;s shirt-&gt;Kestrel: Shirt]] is still buttoned up.
[else]
_With [[Richard&#39;s shirt-&gt;Kestrel: Shirt]] opened up, you are able to more closely examine each of his injuries. The wounds seem to match the general size and profile of the holes in his shirt: twelve small, round wounds are peppered across his chest. Each wound seems deep but clean; you do not notice any burns or discoloration around the entry points._

_You roll Richard onto his front and confirm that there are no exit wounds on his back. Although each of his wounds are deep, none of them went far enough to exit out the back of his torso._
[continue]

[[Keep examining Richard&#39;s body.-&gt;Kestrel: Body]]</tw-passagedata><tw-passagedata pid="171" name="Richard&#39;s Phone: Bartender" tags="" position="1457,394" size="100,100">{embed passage:&#39;Take Turn&#39;}

***

[align center]
**Yesterday - 1:42 PM**

[align left]
Got the new ingredients for the special menu

[align right]
Very nice.

[align right]
Same deal as before?

[align left]
You know it.

[align right]
And the same supplier?

[align right]
No gang shit right?

[align left]
Nah

[align left]
Private supplier

[align left]
Just this guy I know

[align right]
That&#39;s good.

[align right]
I&#39;ll meet you later to check it out.

[align left]
Roger that

[align center]
**Yesterday - 5:45 PM**

[align right]
You good to meet me in 15?

[align right]
Workshop should be empty by then.

[align left]
Sounds good

[align left]
I&#39;ll grab the stuff and meet you there

[continue]

***

[[Examine the other texts.-&gt;Kestrel: Phone]]</tw-passagedata><tw-passagedata pid="172" name="Richard&#39;s Phone: Actor" tags="" position="1636,386" size="100,100">{embed passage:&#39;Take Turn&#39;}

***

[align center]
**Yesterday - 6:32 PM**

[align right]
You leave already?

[align left]
uh yeah

[align left]
im at home already

[align left]
you make the shift schedules, you should know this

[align right]
You know it&#39;s {player.birthday}&#39;s party tonight right?

[align left]
mhmmm

[align left]
yeah ill take the rain check

[align right]
Come oooon. It&#39;ll be fun

[align left]
yeah, im sure it will be real fun for YOU

[align left]
i for one dont need to see that

[align right]
Please? It won&#39;t be the same without you

[align left]
god youre the worst

[align right]
:))))))))

[align left]
fucking

[align left]
fine, ill come. but youll owe me

[align right]
You&#39;re the best!!

[align right]
If you&#39;re driving anyway, can you pick up some supplies?

[align right]
We&#39;re gonna need snacks

[align right]
You know what they have here is awful

[align left]
are. you. for. real???

[align right]
I&#39;ll owe you double!!

[align left]
yeah you will

[align right]
Could you maybe also pick me up some whiskey?

[align right]
I killed my bottle last week

[align left]
...sure

[align right]
Just stick it in my locker. You remember the combo?

[align left]
yes i remember the combo

[align right]
You&#39;re the best!!!

[align center]
**Yesterday - 9:02 PM**

[align left]
im here

[align left]
come let me in

[align left]
stupid door locked already

[align right]
On the way!

[continue]

***

[[Examine the other texts.-&gt;Kestrel: Phone]]</tw-passagedata><tw-passagedata pid="173" name="Kestrel: Blood" tags="" position="1369,529" size="100,100">keys.blood_smell: true

--

{embed passage:&#39;Take Turn&#39;}

As you look closer at the stains on Richard&#39;s shirt, you realize that there are two separate shades of red overlaid on top of each other. There is the deep, dark color of the blood that has leaked from his wounds, and then there is a lighter, pinker substance that has been splattered across his shirt.

[if !keys.drink_smell]
You lean in close and give the lighter stain a sniff. It has a fruity, sugary smell that you can&#39;t quite place.
[else]
_You lean in close and give the lighter stain a sniff. You realize that it smells exactly like the Hyperspace Hibiscus drink served in Lolo&#39;s Cantina._
[continue]

[[Keep examining Richard&#39;s shirt.-&gt;Kestrel: Shirt]]</tw-passagedata><tw-passagedata pid="174" name="Show Turns" tags="" position="286,1210" size="100,100">_turnsRemaining:turns.max - turns.current
_displayTurns:_turnsRemaining
_displayTurns (_displayTurns &lt; 0): 0

_trackTurns:turns.max &gt; 0
config.header.right (_trackTurns): &quot;Turns remaining: {_displayTurns}&quot;
--</tw-passagedata><tw-passagedata pid="175" name="Verify Time Up" tags="" position="890,1105" size="100,100">Did you run out of time during your investigation? Saying yes will end the current round of investigation and return you to the welcome page.

&gt; [[Yes, I ran out of time.-&gt;Time Up]]
&gt; {back link, label:&#39;I still have time. Take me back to the investigation!&#39;}</tw-passagedata><tw-passagedata pid="176" name="Verify Reset" tags="" position="561,1309" size="100,100">Are you sure you want to reset the game? This will discard any progress you have made so far.

&gt; {restart link, label: &#39;Yes, I really want to reset my game.&#39;}
&gt; [[On second thought, I&#39;m good.-&gt;Welcome]]</tw-passagedata><tw-passagedata pid="177" name="AV Closet: Server Tower" tags="" position="460,516" size="100,100">{embed passage:&#39;Take Turn&#39;}

The server tower is an extra-large computer workstation clad in a heavy, black-painted metal case. It appears to be designed to store a huge amount of media files; you count at least a dozen hard drives through a clear acrylic panel set into the side of the case. You also spy four dark, thin cables running from a hole in the wall into the back of the server.

A label on the front of the tower reads:

[align center]
~~Security Server~~ \
~~Archive &amp; Live Feeds~~ \
~~Tampering Forbidden~~
[continue]

A somewhat grungey [[laptop-&gt;AV Closet: Laptop]] is perched on top of the server tower.

[if !keys.security_feeds]
A [[thick yellow cable-&gt;AV Closet: Wires]] is plugged into the side of the laptop, suspiciously close to an open HDMI slot on the front of the server.
[else]
_You have plugged the [[thick yellow cable-&gt;AV Closet: Wires]] into the HDMI slot on the front of the server._
[continue]


[[Examine the rest of the A/V Closet.-&gt;AV Closet]]</tw-passagedata><tw-passagedata pid="178" name="Security Office: Under Desk" tags="" position="751.6666666666669,1700.0000000000005" size="100,100">{embed passage:&#39;Take Turn&#39;}

You duck down under the desk. There is nothing on the floor apart from a thin layer of dust, a discarded push-pin, and a faded gum wrapper.

A thick yellow cable drops down from the control board above and and disappears into a whole in the wall. Based on your understanding of the Outer Rim&#39;s layout, you&#39;d guess that the A/V closet is on the other side of this wall.

[[Stand back up.-&gt;Security Office: Control Board]]</tw-passagedata><tw-passagedata pid="179" name="Security Office: Loop" tags="" position="208.3333333333334,1485.0000000000005" size="100,100">{embed passage:&#39;Take Turn&#39;}

You watch the feed on the monitors for several minutes. Although the red text in the corner of each monitor reads &#39;LIVE&#39;, the long shadows and dark windows in the footage suggest that it is anything but.

A slight flicker on one of the monitors catches your eye, and you turn to focus exclusively on that monitor. A few minutes later, you spot the flicker again. One moment, a bird is perched on the snack cart outside of Lolo&#39;s Cantina. A frame later the bird has disappeared entirely. 

It appears that the real security feed has been replaced with some kind of loop.

[[Stop watching the monitors.-&gt;Security Office: Monitors]]</tw-passagedata></tw-storydata><script>!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=28)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=t.set=t.defaults=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.init=function(){var e=(0,u.ifid)(),t=(0,u.name)();if(void 0===t)throw new Error("Cannot set up state: the story has no name");d="chapbook-state-"+t+"-"+e},t.reset=m,t.sameObject=function(e,t){for(var n=e.split("."),r=t.split("."),o=0;o<n.length&&o<r.length;o++)if(n[o]!==r[o])return!1;return!0},t.setDefault=function(e,t){var n=y(e);f('Defaulting "'+e+'" to '+JSON.stringify(t)),(0,i.default)(h,e,t),v(window,e),null==n&&s.default.emit("state-change",{name:e,value:t,previous:n})},t.setLookup=function(e,t){var n=y(e);f("Adding lookup variable "+e),(0,i.default)(g,e,t),function(e,t){if(!e[t]){for(var n=t.split("."),r=n[n.length-1],o=0;o<n.length-1;o++)e[n[o]]=e[n[o]]||{},e=e[n[o]];Object.defineProperty(e,r,{get:function(){return y(t)},set:function(){throw new Error("Chapbook lookup variables may only be read.")},configurable:!0})}}(window,e),null==n&&s.default.emit("state-change",{name:e,value:y(e),previous:n})},t.saveToObject=k,t.restoreFromObject=w,t.canSaveToStorage=x,t.saveToStorage=_,t.canRestoreFromStorage=function(){return x()&&null!==window.localStorage.getItem(d)},t.restoreFromStorage=function(){f("Restoring variables from local storage"),w(JSON.parse(window.localStorage.getItem(d))),f("Restore complete")},t.purgeFromStorage=function(e){e||f("Purging variables from local storage");w(JSON.parse(window.localStorage.getItem(d))),e||f("Purge complete")},t.varNames=function(e){function t(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Object.keys(e).reduce(function(o,i){if("object"===r(e[i])&&e[i]&&!Array.isArray(e[i]))t(e[i],n?n+"."+i:i,o);else{var a=n?n+"."+i:i;-1===o.indexOf(a)&&o.push(a)}return o},o)}if(e)return t(h,null,t(p,null)).sort();return t(p).sort()};var o=c(n(34)),i=c(n(35)),a=c(n(37)),s=c(n(1)),l=c(n(4)),u=n(6);function c(e){return e&&e.__esModule?e:{default:e}}var f=(0,l.default)("state").log,d=void 0,p={},h={},g={};function v(e,t){if(!e[t]){Object.defineProperty(e,t,{get:function(){return y(t)},set:function(e){b(t,e)},configurable:!0});var n=t.split(".");n.length>1&&(n.pop(),v(e,n.join(".")))}}function m(){!function e(t,n){Object.keys(t).forEach(function(o){var i,l,u=""===n?o:n+"."+o;if("object"!==r(t[o])||Array.isArray(t[o])){var c=t[o];delete t[o],i=window,l=n,(0,a.default)(i,l),s.default.emit("state-change",{name:u,value:y(u),previous:c})}else e(t[o],u)})}(p,""),s.default.emit("state-reset"),y("config.state.autosave")&&_()}function b(e,t){var n=y(e);(0,i.default)(p,e,t),v(window,e),t!==n&&s.default.emit("state-change",{name:e,previous:n,value:t}),y("config.state.autosave")&&_()}function y(e){var t=(0,o.default)(g,e);if("function"==typeof t)return t(y,b);var n=(0,o.default)(p,e);return null==n?(0,o.default)(h,e):n}function k(){return Object.assign({},p)}function w(e){m(),Object.keys(e).forEach(function(t){return b(t,e[t])})}function x(){try{return window.localStorage.setItem("chapbook-test","a"),window.localStorage.removeItem("chapbook-test"),!0}catch(e){return!1}}function _(){f("Saving to local storage: "+JSON.stringify(k())),window.localStorage.setItem(d,JSON.stringify(k())),f("Save complete")}t.defaults={"config.state.autosave":!0},t.set=b,t.get=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(30),i=(r=o)&&r.__esModule?r:{default:r};t.default=(0,i.default)()},function(e,t,n){"use strict";n.r(t),n.d(t,"h",function(){return s}),n.d(t,"createElement",function(){return s}),n.d(t,"cloneElement",function(){return f}),n.d(t,"createRef",function(){return I}),n.d(t,"Component",function(){return N}),n.d(t,"render",function(){return D}),n.d(t,"rerender",function(){return g}),n.d(t,"options",function(){return o});var r=function(){},o={},i=[],a=[];function s(e,t){var n,s,l,u,c=a;for(u=arguments.length;u-- >2;)i.push(arguments[u]);for(t&&null!=t.children&&(i.length||i.push(t.children),delete t.children);i.length;)if((s=i.pop())&&void 0!==s.pop)for(u=s.length;u--;)i.push(s[u]);else"boolean"==typeof s&&(s=null),(l="function"!=typeof e)&&(null==s?s="":"number"==typeof s?s=String(s):"string"!=typeof s&&(l=!1)),l&&n?c[c.length-1]+=s:c===a?c=[s]:c.push(s),n=l;var f=new r;return f.nodeName=e,f.children=c,f.attributes=null==t?void 0:t,f.key=null==t?void 0:t.key,void 0!==o.vnode&&o.vnode(f),f}function l(e,t){for(var n in t)e[n]=t[n];return e}function u(e,t){null!=e&&("function"==typeof e?e(t):e.current=t)}var c="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function f(e,t){return s(e.nodeName,l(l({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}var d=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,p=[];function h(e){!e._dirty&&(e._dirty=!0)&&1==p.push(e)&&(o.debounceRendering||c)(g)}function g(){for(var e;e=p.pop();)e._dirty&&T(e)}function v(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function m(e){var t=l({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function b(e){var t=e.parentNode;t&&t.removeChild(e)}function y(e,t,n,r,o){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)u(n,null),u(r,e);else if("class"!==t||o)if("style"===t){if(r&&"string"!=typeof r&&"string"!=typeof n||(e.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var i in n)i in r||(e.style[i]="");for(var i in r)e.style[i]="number"==typeof r[i]&&!1===d.test(i)?r[i]+"px":r[i]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var a=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,k,a):e.removeEventListener(t,k,a),(e._listeners||(e._listeners={}))[t]=r}else if("list"!==t&&"type"!==t&&!o&&t in e){try{e[t]=null==r?"":r}catch(e){}null!=r&&!1!==r||"spellcheck"==t||e.removeAttribute(t)}else{var s=o&&t!==(t=t.replace(/^xlink:?/,""));null==r||!1===r?s?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof r&&(s?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function k(e){return this._listeners[e.type](o.event&&o.event(e)||e)}var w=[],x=0,_=!1,S=!1;function j(){for(var e;e=w.shift();)o.afterMount&&o.afterMount(e),e.componentDidMount&&e.componentDidMount()}function O(e,t,n,r,o,i){x++||(_=null!=o&&void 0!==o.ownerSVGElement,S=null!=e&&!("__preactattr_"in e));var a=C(e,t,n,r,i);return o&&a.parentNode!==o&&o.appendChild(a),--x||(S=!1,i||j()),a}function C(e,t,n,r,o){var i=e,a=_;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||o)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),M(e,!0))),i.__preactattr_=!0,i;var s,l,u=t.nodeName;if("function"==typeof u)return function(e,t,n,r){var o=e&&e._component,i=o,a=e,s=o&&e._componentConstructor===t.nodeName,l=s,u=m(t);for(;o&&!l&&(o=o._parentComponent);)l=o.constructor===t.nodeName;o&&l&&(!r||o._component)?($(o,u,3,n,r),e=o.base):(i&&!s&&(z(i),e=a=null),o=P(t.nodeName,u,n),e&&!o.nextBase&&(o.nextBase=e,a=null),$(o,u,1,n,r),e=o.base,a&&e!==a&&(a._component=null,M(a,!1)));return e}(e,t,n,r);if(_="svg"===u||"foreignObject"!==u&&_,u=String(u),(!e||!v(e,u))&&(s=u,(l=_?document.createElementNS("http://www.w3.org/2000/svg",s):document.createElement(s)).normalizedNodeName=s,i=l,e)){for(;e.firstChild;)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),M(e,!0)}var c=i.firstChild,f=i.__preactattr_,d=t.children;if(null==f){f=i.__preactattr_={};for(var p=i.attributes,h=p.length;h--;)f[p[h].name]=p[h].value}return!S&&d&&1===d.length&&"string"==typeof d[0]&&null!=c&&void 0!==c.splitText&&null==c.nextSibling?c.nodeValue!=d[0]&&(c.nodeValue=d[0]):(d&&d.length||null!=c)&&function(e,t,n,r,o){var i,a,s,l,u,c=e.childNodes,f=[],d={},p=0,h=0,g=c.length,m=0,y=t?t.length:0;if(0!==g)for(var k=0;k<g;k++){var w=c[k],x=w.__preactattr_,_=y&&x?w._component?w._component.__key:x.key:null;null!=_?(p++,d[_]=w):(x||(void 0!==w.splitText?!o||w.nodeValue.trim():o))&&(f[m++]=w)}if(0!==y)for(var k=0;k<y;k++){l=t[k],u=null;var _=l.key;if(null!=_)p&&void 0!==d[_]&&(u=d[_],d[_]=void 0,p--);else if(h<m)for(i=h;i<m;i++)if(void 0!==f[i]&&(S=a=f[i],O=o,"string"==typeof(j=l)||"number"==typeof j?void 0!==S.splitText:"string"==typeof j.nodeName?!S._componentConstructor&&v(S,j.nodeName):O||S._componentConstructor===j.nodeName)){u=a,f[i]=void 0,i===m-1&&m--,i===h&&h++;break}u=C(u,l,n,r),s=c[k],u&&u!==e&&u!==s&&(null==s?e.appendChild(u):u===s.nextSibling?b(s):e.insertBefore(u,s))}var S,j,O;if(p)for(var k in d)void 0!==d[k]&&M(d[k],!1);for(;h<=m;)void 0!==(u=f[m--])&&M(u,!1)}(i,d,n,r,S||null!=f.dangerouslySetInnerHTML),function(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||y(e,r,n[r],n[r]=void 0,_);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||y(e,r,n[r],n[r]=t[r],_)}(i,t.attributes,f),_=a,i}function M(e,t){var n=e._component;n?z(n):(null!=e.__preactattr_&&u(e.__preactattr_.ref,null),!1!==t&&null!=e.__preactattr_||b(e),A(e))}function A(e){for(e=e.lastChild;e;){var t=e.previousSibling;M(e,!0),e=t}}var E=[];function P(e,t,n){var r,o=E.length;for(e.prototype&&e.prototype.render?(r=new e(t,n),N.call(r,t,n)):((r=new N(t,n)).constructor=e,r.render=L);o--;)if(E[o].constructor===e)return r.nextBase=E[o].nextBase,E.splice(o,1),r;return r}function L(e,t,n){return this.constructor(e,n)}function $(e,t,n,r,i){e._disable||(e._disable=!0,e.__ref=t.ref,e.__key=t.key,delete t.ref,delete t.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r)),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===o.syncComponentUpdates&&e.base?h(e):T(e,1,i)),u(e.__ref,e))}function T(e,t,n,r){if(!e._disable){var i,a,s,u=e.props,c=e.state,f=e.context,d=e.prevProps||u,p=e.prevState||c,h=e.prevContext||f,g=e.base,v=e.nextBase,b=g||v,y=e._component,k=!1,_=h;if(e.constructor.getDerivedStateFromProps&&(c=l(l({},c),e.constructor.getDerivedStateFromProps(u,c)),e.state=c),g&&(e.props=d,e.state=p,e.context=h,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(u,c,f)?k=!0:e.componentWillUpdate&&e.componentWillUpdate(u,c,f),e.props=u,e.state=c,e.context=f),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!k){i=e.render(u,c,f),e.getChildContext&&(f=l(l({},f),e.getChildContext())),g&&e.getSnapshotBeforeUpdate&&(_=e.getSnapshotBeforeUpdate(d,p));var S,C,A=i&&i.nodeName;if("function"==typeof A){var E=m(i);(a=y)&&a.constructor===A&&E.key==a.__key?$(a,E,1,f,!1):(S=a,e._component=a=P(A,E,f),a.nextBase=a.nextBase||v,a._parentComponent=e,$(a,E,0,f,!1),T(a,1,n,!0)),C=a.base}else s=b,(S=y)&&(s=e._component=null),(b||1===t)&&(s&&(s._component=null),C=O(s,i,f,n||!g,b&&b.parentNode,!0));if(b&&C!==b&&a!==y){var L=b.parentNode;L&&C!==L&&(L.replaceChild(C,b),S||(b._component=null,M(b,!1)))}if(S&&z(S),e.base=C,C&&!r){for(var N=e,D=e;D=D._parentComponent;)(N=D).base=C;C._component=N,C._componentConstructor=N.constructor}}for(!g||n?w.push(e):k||(e.componentDidUpdate&&e.componentDidUpdate(d,p,_),o.afterUpdate&&o.afterUpdate(e));e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);x||r||j()}}function z(e){o.beforeUnmount&&o.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?z(n):t&&(null!=t.__preactattr_&&u(t.__preactattr_.ref,null),e.nextBase=t,b(t),E.push(e),A(t)),u(e.__ref,null)}function N(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{},this._renderCallbacks=[]}function D(e,t,n){return O(n,e,{},!1,t,!1)}function I(){return{}}l(N.prototype,{setState:function(e,t){this.prevState||(this.prevState=this.state),this.state=l(l({},this.state),"function"==typeof e?e(this.state,this.props):e),t&&this._renderCallbacks.push(t),h(this)},forceUpdate:function(e){e&&this._renderCallbacks.push(e),T(this,2)},render:function(){}});var R={h:s,createElement:s,cloneElement:f,createRef:I,Component:N,render:D,rerender:g,options:o};t.default=R},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.warn=t.log=t.defaults=void 0,t.default=function(e){return{log:function(t){l(e,t)},warn:function(t){u(e,t)}}};var r,o=n(1),i=(r=o)&&r.__esModule?r:{default:r},a=n(0);t.defaults={"config.logger.show.parse":!1,"config.logger.show.render":!1,"config.logger.show.sound":!1,"config.logger.show.state":!1,"config.logger.show.story":!1,"config.logger.show.style":!1};function s(e){return e+": "}function l(e,t){(0,a.get)("config.logger.show."+e)&&console.log(s(e)+t),i.default.emit("log",{source:e,message:t})}function u(e,t){console.warn(s(e)+t),i.default.emit("log-warning",{source:e,message:t})}t.log=l,t.warn=u,window.logger={log:l,warn:u}},function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=document.createElement(e);return Object.keys(t).forEach(function(e){void 0!==t[e]&&r.setAttribute(e,t[e])}),n.forEach(function(e){"string"==typeof e?r.appendChild(document.createTextNode(e)):r.appendChild(e)}),r}Object.defineProperty(t,"__esModule",{value:!0}),t.domify=r,t.default=function(){return r.apply(void 0,arguments).outerHTML}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.passages=void 0,t.loadFromData=function(e){["name","creator","ifid","options"].forEach(function(t){return u[t]=e.getAttribute(t)}),u.startNode=parseInt(e.getAttribute("startnode")),u.creatorVersion=e.getAttribute("creator-version");var t=function(e){return e.map(function(e){return e.textContent})};u.customScripts=t((0,a.selectAll)(e,'[type="text/twine-javascript"]')),u.customStyles=t((0,a.selectAll)(e,'[type="text/twine-css"]')),c=(0,a.selectAll)(e,"tw-passagedata").map(function(e){var t={id:parseInt(e.getAttribute("pid")),name:e.getAttribute("name"),source:e.textContent},n=e.getAttribute("tags");return t.tags=n?n.split(" "):[],t})},t.init=function(){(0,s.setDefault)("trail",[d().name]),(0,s.setDefault)("config.testing","string"==typeof u.options&&-1!==u.options.indexOf("debug")||!1),document.title=u.name},t.runCustomScripts=function(){l.log("Running custom scripts ("+u.customScripts.length+")"),u.customScripts.forEach(function(e){new Function(e).apply(window)})},t.addCustomStyles=function(){l.log("Adding custom styles ("+u.customStyles.length+")"),u.customStyles.forEach(function(e){var t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t)})},t.ifid=function(){return u.ifid},t.name=function(){return u.name},t.exportedPassages=f,t.startPassage=d,t.passageNamed=function(e){return c.find(function(t){return t.name===e})},t.passageWithId=function(e){return c.find(function(t){return t.id===e})};var r,o=n(4),i=(r=o)&&r.__esModule?r:{default:r},a=n(7),s=n(0);var l=(0,i.default)("story"),u={customScripts:[],customStyles:[]},c=[];function f(){return c}function d(){return c.find(function(e){return e.id===u.startNode})}t.passages=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.select=function(e,t){return e.querySelector(t)},t.selectAll=function(e,t){return Array.from(e.querySelectorAll(t))}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);n(46);t.default=class extends r.Component{constructor(e){super(e),this.state={open:void 0===this.props.initiallyOpen||this.props.initiallyOpen}}toggle(){this.setState({open:!this.state.open})}render(){return(0,r.h)("div",{class:"panel"+(this.state.open?" open":"")},(0,r.h)("h2",null,(0,r.h)("button",{onClick:()=>this.toggle()},this.props.title)),this.state.open&&(0,r.h)("div",{class:"content"},this.props.children))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0,t.render=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,a.default)((0,i.default)(e),(0,s.get)("config.template.inserts")||[],(0,s.get)("config.template.modifiers")||[],t)};var r=l(n(60)),o=l(n(84)),i=l(n(94)),a=l(n(96)),s=n(0);function l(e){return e&&e.__esModule?e:{default:e}}t.defaults={"config.template.inserts":r.default,"config.template.modifiers":o.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0,t.init=function(){(0,s.init)(),(0,l.init)(),h=document.querySelector("#page article"),v=document.querySelector("#page #spinner"),g={},["header","footer"].forEach(function(e){g[e]={container:document.querySelector("#page "+e)},["left","center","right"].forEach(function(t){g[e][t]=document.querySelector("#page "+e+" ."+t)})}),o.default.on("state-change",function(e){var t=e.name;return y("trail"===t)}),["change","click"].forEach(function(e){document.body.addEventListener(e,function(e){for(var t=e.target;t;)t.dataset&&Object.keys(t.dataset).some(function(e){return/^cb[A-Z]/.test(e)})&&o.default.emit("dom-"+e.type,t),t=t.parentNode})})},t.changeBody=function(e){(0,d.selectAll)(h,"input").forEach(function(e){e.setAttribute("value",e.value)}),(0,d.selectAll)(h,"select").forEach(function(e){for(var t=0;t<e.options.length;t++)t===e.options.selectedIndex?e.options[t].setAttribute("selected",""):e.options[t].removeAttribute("selected")});var t={x:window.scrollX,y:window.scrollY},n=h.innerHTML,r=document.createElement("div");for(;h.firstChild;)r.insertBefore(h.firstChild,r.firstChild);h.innerHTML=n,e(r),window.scrollX=t.x,window.scrollY=t.y,b(h,r.innerHTML,(0,a.get)("config.body.transition.name"),(0,a.get)("config.body.transition.duration"))};var r=p(n(20)),o=p(n(1)),i=n(64),a=n(0),s=n(66),l=n(69),u=n(6),c=n(11),f=p(n(71));n(72);var d=n(7);function p(e){return e&&e.__esModule?e:{default:e}}var h=void 0,g=void 0,v=void 0,m={crossfade:i.crossfade,fadeInOut:i.fadeInOut,none:i.none};t.defaults={"config.body.transition.name":"crossfade","config.body.transition.duration":"500ms","config.header.left":"","config.header.center":"","config.header.right":"","config.header.transition.name":"none","config.header.transition.duration":"500ms","config.footer.left":"_{story.name}_","config.footer.center":"","config.footer.right":"{restart link}","config.footer.transition.name":"none","config.footer.transition.duration":"500ms"};function b(e,t,n,r){m[n]?m[n](e,t,r):m.none(e,t)}var y=(0,r.default)(function(e){if(e.some(function(e){return e[0]})){var t=(0,a.get)("trail"),n=(0,u.passageNamed)(t[t.length-1]);if(!n)throw new Error('There is no passage named "'+t[t.length-1]+'".');window.scrollTo(0,0),b(h,(0,c.render)(n.source),(0,a.get)("config.body.transition.name"),(0,a.get)("config.body.transition.duration")),(0,f.default)(h,v)}["header","footer"].forEach(function(e){g[e].container.classList.remove("has-content"),["left","center","right"].forEach(function(t){var n=(0,c.render)((0,a.get)("config."+e+"."+t));""!==n&&g[e].container.classList.add("has-content"),b(g[e][t],n,(0,a.get)("config."+e+".transition.name"),(0,a.get)("config."+e+".transition.duration"))})})})},function(e,t,n){"use strict";e.exports=function(e,t,n){n=Object.assign({},r,n||{});let o=0,a=function(e){let t={ms:.001,s:1,m:60,h:3600};return t.d=e.hoursPerDay*t.h,t.w=e.daysPerWeek*t.d,t.mth=e.daysPerYear/e.monthsPerYear*t.d,t.y=e.daysPerYear*t.d,t}(n),s=e.toLowerCase().replace(/[^.\w+-]+/g,"").match(/[-+]?[0-9.]+[a-z]+/g);null!==s&&s.forEach(e=>{let t=e.match(/[0-9.]+/g)[0],n=e.match(/[a-z]+/g)[0];o+=function(e,t,n){return e*n[i(t)]}(t,n,a)});if(t)return function(e,t,n){return e/n[i(t)]}(o,t,a);return o};const r={hoursPerDay:24,daysPerWeek:7,weeksPerMonth:4,monthsPerYear:12,daysPerYear:365.25},o={ms:["ms","milli","millisecond","milliseconds"],s:["s","sec","secs","second","seconds"],m:["m","min","mins","minute","minutes"],h:["h","hr","hrs","hour","hours"],d:["d","day","days"],w:["w","week","weeks"],mth:["mon","mth","mths","month","months"],y:["y","yr","yrs","year","years"]};function i(e){for(let t of Object.keys(o))if(o[t].indexOf(e)>-1)return t;throw new Error(`The unit [${e}] is not supported by timestring`)}},function(e,t){function n(e,t){if(!e)throw new Error(t||"AssertionError")}n.notEqual=function(e,t,r){n(e!=t,r)},n.notOk=function(e,t){n(!e,t)},n.equal=function(e,t,r){n(e==t,r)},n.ok=n,e.exports=n},function(e,t,n){"use strict";
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */e.exports=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderLink=a,t.default=function(e){return e.replace(/\[\[(.*?)\]\]/g,function(e,t){var n=t,r=t.indexOf("|");if(-1!==r)n=t.substr(0,r),t=t.substr(r+1);else{var o=t.indexOf("->");if(-1!==o)n=t.substr(0,o),t=t.substr(o+2);else{var i=t.indexOf("<-");-1!==i&&(n=t.substr(i+2),t=t.substr(0,i))}}return a(t,n||t)})};var r,o=n(5),i=(r=o)&&r.__esModule?r:{default:r};function a(e,t){return/^\w+:\/\/\/?\w/i.test(e)?(0,i.default)("a",{href:e},[t||e]):(0,i.default)("a",{href:"javascript:void(0)","data-cb-go":e},[t||e])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.history=t.defaults=void 0,t.rewindTo=function(e){if(!s[e])throw new Error("There is no history at index "+e+" to rewind to.");l=!1,(0,a.restoreFromObject)(s[e].state),s.length=e+1,l=!0,i.default.emit("backstage-recorder-update")},t.init=function(){i.default.on("state-change",c),i.default.on("state-reset",u)};var r,o=n(1),i=(r=o)&&r.__esModule?r:{default:r},a=n(0);t.defaults={"config.backstage.trail.maxLength":100};var s=t.history=[],l=!0;function u(){l&&(t.history=s=[],i.default.emit("backstage-recorder-update"))}function c(e){var t=e.name,n=e.value;l&&(s.length===(0,a.get)("config.backstage.trail.maxLength")&&s.shift(),s.push({change:{name:t,value:n},state:(0,a.saveToObject)()}),i.default.emit("backstage-recorder-update"))}},function(e,t,n){(function(t){var n=1/0,r="[object Symbol]",o=/[&<>"'`]/g,i=RegExp(o.source),a="object"==typeof t&&t&&t.Object===Object&&t,s="object"==typeof self&&self&&self.Object===Object&&self,l=a||s||Function("return this")();var u,c=(u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},function(e){return null==u?void 0:u[e]}),f=Object.prototype.toString,d=l.Symbol,p=d?d.prototype:void 0,h=p?p.toString:void 0;function g(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&f.call(e)==r}(e))return h?h.call(e):"";var t=e+"";return"0"==t&&1/e==-n?"-0":t}e.exports=function(e){var t;return(e=null==(t=e)?"":g(t))&&i.test(e)?e.replace(o,c):e}}).call(this,n(19))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[],n=!1;return function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];n||(n=!0,Promise.resolve().then(function(){try{e(t)}catch(e){window.setTimeout(function(){throw e},0)}t=[],n=!1})),t.push(o)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="<span"+Object.keys(t).reduce(function(e,n){return e+" "+n+'="'+t[n]+'"'},"")+">",r=n+e.replace(/[\r\n]{2,}/g,"</span>$&"+n)+"</span>";return r=r.replace(/(<span.*?>)\s*(#+)/gi,"$2 $1")}},function(e,t,n){e.exports=function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,n){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}var r,o=(function(e){function t(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}e.exports={defaults:{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},getDefaults:t,changeDefaults:function(t){e.exports.defaults=t}}}(r={exports:{}},r.exports),r.exports),i=(o.defaults,o.getDefaults,o.changeDefaults,/[&<>"']/),a=/[&<>"']/g,s=/[<>"']|&(?!#?\w+;)/,l=/[<>"']|&(?!#?\w+;)/g,u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c=function(e){return u[e]},f=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function d(e){return e.replace(f,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}var p=/(^|[^\[])\^/g,h=/[^\w:]/g,g=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,v={},m=/^[^:]+:\/*[^/]*$/,b=/^([^:]+:)[\s\S]*$/,y=/^([^:]+:\/*[^/]*)[\s\S]*$/;function k(e,t){v[" "+e]||(m.test(e)?v[" "+e]=e+"/":v[" "+e]=w(e,"/",!0));var n=-1===(e=v[" "+e]).indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(b,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(y,"$1")+t:e+t}function w(e,t,n){var r=e.length;if(0===r)return"";for(var o=0;o<r;){var i=e.charAt(r-o-1);if(i!==t||n){if(i===t||!n)break;o++}else o++}return e.substr(0,r-o)}var x={escape:function(e,t){if(t){if(i.test(e))return e.replace(a,c)}else if(s.test(e))return e.replace(l,c);return e},unescape:d,edit:function(e,t){e=e.source||e,t=t||"";var n={replace:function(t,r){return r=(r=r.source||r).replace(p,"$1"),e=e.replace(t,r),n},getRegex:function(){return new RegExp(e,t)}};return n},cleanUrl:function(e,t,n){if(e){var r;try{r=decodeURIComponent(d(n)).replace(h,"").toLowerCase()}catch(e){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}t&&!g.test(n)&&(n=k(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n},resolveUrl:k,noopTest:{exec:function(){}},merge:function(e){for(var t,n,r=1;r<arguments.length;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},splitCells:function(e,t){var n=e.replace(/\|/g,function(e,t,n){for(var r=!1,o=t;--o>=0&&"\\"===n[o];)r=!r;return r?"|":" |"}).split(/ \|/),r=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n},rtrim:w,findClosingBracket:function(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=e.length,r=0,o=0;o<n;o++)if("\\"===e[o])o++;else if(e[o]===t[0])r++;else if(e[o]===t[1]&&--r<0)return o;return-1},checkSanitizeDeprecation:function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},repeatString:function(e,t){if(t<1)return"";for(var n="";t>1;)1&t&&(n+=e),t>>=1,e+=e;return n+e}},_=o.defaults,S=x.rtrim,j=x.splitCells,O=x.escape,C=x.findClosingBracket;function M(e,t,n){var r=t.href,o=t.title?O(t.title):null,i=e[1].replace(/\\([\[\]])/g,"$1");return"!"!==e[0].charAt(0)?{type:"link",raw:n,href:r,title:o,text:i}:{type:"image",raw:n,href:r,title:o,text:O(i)}}var A=function(){function e(e){this.options=e||_}var t=e.prototype;return t.space=function(e){var t=this.rules.block.newline.exec(e);if(t)return t[0].length>1?{type:"space",raw:t[0]}:{raw:"\n"}},t.code=function(e,t){var n=this.rules.block.code.exec(e);if(n){var r=t[t.length-1];if(r&&"paragraph"===r.type)return{raw:n[0],text:n[0].trimRight()};var o=n[0].replace(/^ {4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?o:S(o,"\n")}}},t.fences=function(e){var t=this.rules.block.fences.exec(e);if(t){var n=t[0],r=function(e,t){var n=e.match(/^(\s+)(?:```)/);if(null===n)return t;var r=n[1];return t.split("\n").map(function(e){var t=e.match(/^\s+/);if(null===t)return e;var n=t[0];return n.length>=r.length?e.slice(r.length):e}).join("\n")}(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim():t[2],text:r}}},t.heading=function(e){var t=this.rules.block.heading.exec(e);if(t){var n=t[2].trim();if(/#$/.test(n)){var r=S(n,"#");this.options.pedantic?n=r.trim():r&&!/ $/.test(r)||(n=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n}}},t.nptable=function(e){var t=this.rules.block.nptable.exec(e);if(t){var n={type:"table",header:j(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[],raw:t[0]};if(n.header.length===n.align.length){var r,o=n.align.length;for(r=0;r<o;r++)/^ *-+: *$/.test(n.align[r])?n.align[r]="right":/^ *:-+: *$/.test(n.align[r])?n.align[r]="center":/^ *:-+ *$/.test(n.align[r])?n.align[r]="left":n.align[r]=null;for(o=n.cells.length,r=0;r<o;r++)n.cells[r]=j(n.cells[r],n.header.length);return n}}},t.hr=function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}},t.blockquote=function(e){var t=this.rules.block.blockquote.exec(e);if(t){var n=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],text:n}}},t.list=function(e){var t=this.rules.block.list.exec(e);if(t){var n,r,o,i,a,s,l,u,c=t[0],f=t[2],d=f.length>1,p={type:"list",raw:c,ordered:d,start:d?+f.slice(0,-1):"",loose:!1,items:[]},h=t[0].match(this.rules.block.item),g=!1,v=h.length;o=this.rules.block.listItemStart.exec(h[0]);for(var m=0;m<v;m++){if(n=h[m],c=n,m!==v-1){if((i=this.rules.block.listItemStart.exec(h[m+1]))[1].length>o[0].length||i[1].length>3){h.splice(m,2,h[m]+"\n"+h[m+1]),m--,v--;continue}(!this.options.pedantic||this.options.smartLists?i[2][i[2].length-1]!==f[f.length-1]:d===(1===i[2].length))&&(a=h.slice(m+1).join("\n"),p.raw=p.raw.substring(0,p.raw.length-a.length),m=v-1),o=i}r=n.length,~(n=n.replace(/^ *([*+-]|\d+[.)]) ?/,"")).indexOf("\n ")&&(r-=n.length,n=this.options.pedantic?n.replace(/^ {1,4}/gm,""):n.replace(new RegExp("^ {1,"+r+"}","gm"),"")),s=g||/\n\n(?!\s*$)/.test(n),m!==v-1&&(g="\n"===n.charAt(n.length-1),s||(s=g)),s&&(p.loose=!0),this.options.gfm&&(l=/^\[[ xX]\] /.test(n),u=void 0,l&&(u=" "!==n[1],n=n.replace(/^\[[ xX]\] +/,""))),p.items.push({type:"list_item",raw:c,task:l,checked:u,loose:s,text:n})}return p}},t.html=function(e){var t=this.rules.block.html.exec(e);if(t)return{type:this.options.sanitize?"paragraph":"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):O(t[0]):t[0]}},t.def=function(e){var t=this.rules.block.def.exec(e);if(t){t[3]&&(t[3]=t[3].substring(1,t[3].length-1));var n=t[1].toLowerCase().replace(/\s+/g," ");return{tag:n,raw:t[0],href:t[2],title:t[3]}}},t.table=function(e){var t=this.rules.block.table.exec(e);if(t){var n={type:"table",header:j(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[]};if(n.header.length===n.align.length){n.raw=t[0];var r,o=n.align.length;for(r=0;r<o;r++)/^ *-+: *$/.test(n.align[r])?n.align[r]="right":/^ *:-+: *$/.test(n.align[r])?n.align[r]="center":/^ *:-+ *$/.test(n.align[r])?n.align[r]="left":n.align[r]=null;for(o=n.cells.length,r=0;r<o;r++)n.cells[r]=j(n.cells[r].replace(/^ *\| *| *\| *$/g,""),n.header.length);return n}}},t.lheading=function(e){var t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1]}},t.paragraph=function(e){var t=this.rules.block.paragraph.exec(e);if(t)return{type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1]}},t.text=function(e,t){var n=this.rules.block.text.exec(e);if(n){var r=t[t.length-1];return r&&"text"===r.type?{raw:n[0],text:n[0]}:{type:"text",raw:n[0],text:n[0]}}},t.escape=function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:O(t[1])}},t.tag=function(e,t,n){var r=this.rules.inline.tag.exec(e);if(r)return!t&&/^<a /i.test(r[0])?t=!0:t&&/^<\/a>/i.test(r[0])&&(t=!1),!n&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?n=!0:n&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(n=!1),{type:this.options.sanitize?"text":"html",raw:r[0],inLink:t,inRawBlock:n,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):O(r[0]):r[0]}},t.link=function(e){var t=this.rules.inline.link.exec(e);if(t){var n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;var r=S(n.slice(0,-1),"\\");if((n.length-r.length)%2==0)return}else{var o=C(t[2],"()");if(o>-1){var i=0===t[0].indexOf("!")?5:4,a=i+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,a).trim(),t[3]=""}}var s=t[2],l="";if(this.options.pedantic){var u=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);u&&(s=u[1],l=u[3])}else l=t[3]?t[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(s=this.options.pedantic&&!/>$/.test(n)?s.slice(1):s.slice(1,-1)),M(t,{href:s?s.replace(this.rules.inline._escapes,"$1"):s,title:l?l.replace(this.rules.inline._escapes,"$1"):l},t[0])}},t.reflink=function(e,t){var n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){var r=(n[2]||n[1]).replace(/\s+/g," ");if(!(r=t[r.toLowerCase()])||!r.href){var o=n[0].charAt(0);return{type:"text",raw:o,text:o}}return M(n,r,n[0])}},t.strong=function(e,t,n){void 0===n&&(n="");var r=this.rules.inline.strong.start.exec(e);if(r&&(!r[1]||r[1]&&(""===n||this.rules.inline.punctuation.exec(n)))){t=t.slice(-1*e.length);var o,i="**"===r[0]?this.rules.inline.strong.endAst:this.rules.inline.strong.endUnd;for(i.lastIndex=0;null!=(r=i.exec(t));)if(o=this.rules.inline.strong.middle.exec(t.slice(0,r.index+3)))return{type:"strong",raw:e.slice(0,o[0].length),text:e.slice(2,o[0].length-2)}}},t.em=function(e,t,n){void 0===n&&(n="");var r=this.rules.inline.em.start.exec(e);if(r&&(!r[1]||r[1]&&(""===n||this.rules.inline.punctuation.exec(n)))){t=t.slice(-1*e.length);var o,i="*"===r[0]?this.rules.inline.em.endAst:this.rules.inline.em.endUnd;for(i.lastIndex=0;null!=(r=i.exec(t));)if(o=this.rules.inline.em.middle.exec(t.slice(0,r.index+2)))return{type:"em",raw:e.slice(0,o[0].length),text:e.slice(1,o[0].length-1)}}},t.codespan=function(e){var t=this.rules.inline.code.exec(e);if(t){var n=t[2].replace(/\n/g," "),r=/[^ ]/.test(n),o=/^ /.test(n)&&/ $/.test(n);return r&&o&&(n=n.substring(1,n.length-1)),n=O(n,!0),{type:"codespan",raw:t[0],text:n}}},t.br=function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}},t.del=function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2]}},t.autolink=function(e,t){var n,r,o=this.rules.inline.autolink.exec(e);if(o)return"@"===o[2]?(n=O(this.options.mangle?t(o[1]):o[1]),r="mailto:"+n):(n=O(o[1]),r=n),{type:"link",raw:o[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}},t.url=function(e,t){var n;if(n=this.rules.inline.url.exec(e)){var r,o;if("@"===n[2])r=O(this.options.mangle?t(n[0]):n[0]),o="mailto:"+r;else{var i;do{i=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(i!==n[0]);r=O(n[0]),o="www."===n[1]?"http://"+r:r}return{type:"link",raw:n[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}},t.inlineText=function(e,t,n){var r,o=this.rules.inline.text.exec(e);if(o)return r=t?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):O(o[0]):o[0]:O(this.options.smartypants?n(o[0]):o[0]),{type:"text",raw:o[0],text:r}},e}(),E=x.noopTest,P=x.edit,L=x.merge,$={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:E,table:E,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};$.def=P($.def).replace("label",$._label).replace("title",$._title).getRegex(),$.bullet=/(?:[*+-]|\d{1,9}[.)])/,$.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,$.item=P($.item,"gm").replace(/bull/g,$.bullet).getRegex(),$.listItemStart=P(/^( *)(bull)/).replace("bull",$.bullet).getRegex(),$.list=P($.list).replace(/bull/g,$.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+$.def.source+")").getRegex(),$._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",$._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,$.html=P($.html,"i").replace("comment",$._comment).replace("tag",$._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),$.paragraph=P($._paragraph).replace("hr",$.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",$._tag).getRegex(),$.blockquote=P($.blockquote).replace("paragraph",$.paragraph).getRegex(),$.normal=L({},$),$.gfm=L({},$.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),$.gfm.nptable=P($.gfm.nptable).replace("hr",$.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",$._tag).getRegex(),$.gfm.table=P($.gfm.table).replace("hr",$.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",$._tag).getRegex(),$.pedantic=L({},$.normal,{html:P("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",$._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:E,paragraph:P($.normal._paragraph).replace("hr",$.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",$.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var T={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:E,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",strong:{start:/^(?:(\*\*(?=[*punctuation]))|\*\*)(?![\s])|__/,middle:/^\*\*(?:(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)|\*(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)*?\*)+?\*\*$|^__(?![\s])((?:(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)*?_)+?)__$/,endAst:/[^punctuation\s]\*\*(?!\*)|[punctuation]\*\*(?!\*)(?:(?=[punctuation_\s]|$))/,endUnd:/[^\s]__(?!_)(?:(?=[punctuation*\s])|$)/},em:{start:/^(?:(\*(?=[punctuation]))|\*)(?![*\s])|_/,middle:/^\*(?:(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)|\*(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)*?\*)+?\*$|^_(?![_\s])(?:(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)*?_)+?_$/,endAst:/[^punctuation\s]\*(?!\*)|[punctuation]\*(?!\*)(?:(?=[punctuation_\s]|$))/,endUnd:/[^\s]_(?!_)(?:(?=[punctuation*\s])|$)/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:E,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\s*punctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};T.punctuation=P(T.punctuation).replace(/punctuation/g,T._punctuation).getRegex(),T._blockSkip="\\[[^\\]]*?\\]\\([^\\)]*?\\)|`[^`]*?`|<[^>]*?>",T._overlapSkip="__[^_]*?__|\\*\\*\\[^\\*\\]*?\\*\\*",T._comment=P($._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),T.em.start=P(T.em.start).replace(/punctuation/g,T._punctuation).getRegex(),T.em.middle=P(T.em.middle).replace(/punctuation/g,T._punctuation).replace(/overlapSkip/g,T._overlapSkip).getRegex(),T.em.endAst=P(T.em.endAst,"g").replace(/punctuation/g,T._punctuation).getRegex(),T.em.endUnd=P(T.em.endUnd,"g").replace(/punctuation/g,T._punctuation).getRegex(),T.strong.start=P(T.strong.start).replace(/punctuation/g,T._punctuation).getRegex(),T.strong.middle=P(T.strong.middle).replace(/punctuation/g,T._punctuation).replace(/overlapSkip/g,T._overlapSkip).getRegex(),T.strong.endAst=P(T.strong.endAst,"g").replace(/punctuation/g,T._punctuation).getRegex(),T.strong.endUnd=P(T.strong.endUnd,"g").replace(/punctuation/g,T._punctuation).getRegex(),T.blockSkip=P(T._blockSkip,"g").getRegex(),T.overlapSkip=P(T._overlapSkip,"g").getRegex(),T._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,T._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,T._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,T.autolink=P(T.autolink).replace("scheme",T._scheme).replace("email",T._email).getRegex(),T._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,T.tag=P(T.tag).replace("comment",T._comment).replace("attribute",T._attribute).getRegex(),T._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,T._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,T._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,T.link=P(T.link).replace("label",T._label).replace("href",T._href).replace("title",T._title).getRegex(),T.reflink=P(T.reflink).replace("label",T._label).getRegex(),T.reflinkSearch=P(T.reflinkSearch,"g").replace("reflink",T.reflink).replace("nolink",T.nolink).getRegex(),T.normal=L({},T),T.pedantic=L({},T.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:P(/^!?\[(label)\]\((.*?)\)/).replace("label",T._label).getRegex(),reflink:P(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",T._label).getRegex()}),T.gfm=L({},T.normal,{escape:P(T.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),T.gfm.url=P(T.gfm.url,"i").replace("email",T.gfm._extended_email).getRegex(),T.breaks=L({},T.gfm,{br:P(T.br).replace("{2,}","*").getRegex(),text:P(T.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var z={block:$,inline:T},N=o.defaults,D=z.block,I=z.inline,R=x.repeatString;function q(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function F(e){var t,n,r="",o=e.length;for(t=0;t<o;t++)n=e.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}var U=function(){function t(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||N,this.options.tokenizer=this.options.tokenizer||new A,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var t={block:D.normal,inline:I.normal};this.options.pedantic?(t.block=D.pedantic,t.inline=I.pedantic):this.options.gfm&&(t.block=D.gfm,this.options.breaks?t.inline=I.breaks:t.inline=I.gfm),this.tokenizer.rules=t}t.lex=function(e,n){var r=new t(n);return r.lex(e)},t.lexInline=function(e,n){var r=new t(n);return r.inlineTokens(e)};var n,r,o,i=t.prototype;return i.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens,!0),this.inline(this.tokens),this.tokens},i.blockTokens=function(e,t,n){var r,o,i,a;for(void 0===t&&(t=[]),void 0===n&&(n=!0),e=e.replace(/^ +$/gm,"");e;)if(r=this.tokenizer.space(e))e=e.substring(r.raw.length),r.type&&t.push(r);else if(r=this.tokenizer.code(e,t))e=e.substring(r.raw.length),r.type?t.push(r):((a=t[t.length-1]).raw+="\n"+r.raw,a.text+="\n"+r.text);else if(r=this.tokenizer.fences(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.heading(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.nptable(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.hr(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.blockquote(e))e=e.substring(r.raw.length),r.tokens=this.blockTokens(r.text,[],n),t.push(r);else if(r=this.tokenizer.list(e)){for(e=e.substring(r.raw.length),i=r.items.length,o=0;o<i;o++)r.items[o].tokens=this.blockTokens(r.items[o].text,[],!1);t.push(r)}else if(r=this.tokenizer.html(e))e=e.substring(r.raw.length),t.push(r);else if(n&&(r=this.tokenizer.def(e)))e=e.substring(r.raw.length),this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});else if(r=this.tokenizer.table(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.lheading(e))e=e.substring(r.raw.length),t.push(r);else if(n&&(r=this.tokenizer.paragraph(e)))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.text(e,t))e=e.substring(r.raw.length),r.type?t.push(r):((a=t[t.length-1]).raw+="\n"+r.raw,a.text+="\n"+r.text);else if(e){var s="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(s);break}throw new Error(s)}return t},i.inline=function(e){var t,n,r,o,i,a,s=e.length;for(t=0;t<s;t++)switch((a=e[t]).type){case"paragraph":case"text":case"heading":a.tokens=[],this.inlineTokens(a.text,a.tokens);break;case"table":for(a.tokens={header:[],cells:[]},o=a.header.length,n=0;n<o;n++)a.tokens.header[n]=[],this.inlineTokens(a.header[n],a.tokens.header[n]);for(o=a.cells.length,n=0;n<o;n++)for(i=a.cells[n],a.tokens.cells[n]=[],r=0;r<i.length;r++)a.tokens.cells[n][r]=[],this.inlineTokens(i[r],a.tokens.cells[n][r]);break;case"blockquote":this.inline(a.tokens);break;case"list":for(o=a.items.length,n=0;n<o;n++)this.inline(a.items[n].tokens)}return e},i.inlineTokens=function(e,t,n,r){var o;void 0===t&&(t=[]),void 0===n&&(n=!1),void 0===r&&(r=!1);var i,a,s,l=e;if(this.tokens.links){var u=Object.keys(this.tokens.links);if(u.length>0)for(;null!=(i=this.tokenizer.rules.inline.reflinkSearch.exec(l));)u.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,i.index)+"["+R("a",i[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(i=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,i.index)+"["+R("a",i[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;e;)if(a||(s=""),a=!1,o=this.tokenizer.escape(e))e=e.substring(o.raw.length),t.push(o);else if(o=this.tokenizer.tag(e,n,r))e=e.substring(o.raw.length),n=o.inLink,r=o.inRawBlock,t.push(o);else if(o=this.tokenizer.link(e))e=e.substring(o.raw.length),"link"===o.type&&(o.tokens=this.inlineTokens(o.text,[],!0,r)),t.push(o);else if(o=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(o.raw.length),"link"===o.type&&(o.tokens=this.inlineTokens(o.text,[],!0,r)),t.push(o);else if(o=this.tokenizer.strong(e,l,s))e=e.substring(o.raw.length),o.tokens=this.inlineTokens(o.text,[],n,r),t.push(o);else if(o=this.tokenizer.em(e,l,s))e=e.substring(o.raw.length),o.tokens=this.inlineTokens(o.text,[],n,r),t.push(o);else if(o=this.tokenizer.codespan(e))e=e.substring(o.raw.length),t.push(o);else if(o=this.tokenizer.br(e))e=e.substring(o.raw.length),t.push(o);else if(o=this.tokenizer.del(e))e=e.substring(o.raw.length),o.tokens=this.inlineTokens(o.text,[],n,r),t.push(o);else if(o=this.tokenizer.autolink(e,F))e=e.substring(o.raw.length),t.push(o);else if(n||!(o=this.tokenizer.url(e,F))){if(o=this.tokenizer.inlineText(e,r,q))e=e.substring(o.raw.length),s=o.raw.slice(-1),a=!0,t.push(o);else if(e){var c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}throw new Error(c)}}else e=e.substring(o.raw.length),t.push(o);return t},n=t,o=[{key:"rules",get:function(){return{block:D,inline:I}}}],(r=null)&&e(n.prototype,r),o&&e(n,o),t}(),B=o.defaults,H=x.cleanUrl,Z=x.escape,W=function(){function e(e){this.options=e||B}var t=e.prototype;return t.code=function(e,t,n){var r=(t||"").match(/\S*/)[0];if(this.options.highlight){var o=this.options.highlight(e,r);null!=o&&o!==e&&(n=!0,e=o)}return r?'<pre><code class="'+this.options.langPrefix+Z(r,!0)+'">'+(n?e:Z(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:Z(e,!0))+"</code></pre>\n"},t.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},t.html=function(e){return e},t.heading=function(e,t,n,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},t.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},t.list=function(e,t,n){var r=t?"ol":"ul",o=t&&1!==n?' start="'+n+'"':"";return"<"+r+o+">\n"+e+"</"+r+">\n"},t.listitem=function(e){return"<li>"+e+"</li>\n"},t.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},t.paragraph=function(e){return"<p>"+e+"</p>\n"},t.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},t.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},t.tablecell=function(e,t){var n=t.header?"th":"td",r=t.align?"<"+n+' align="'+t.align+'">':"<"+n+">";return r+e+"</"+n+">\n"},t.strong=function(e){return"<strong>"+e+"</strong>"},t.em=function(e){return"<em>"+e+"</em>"},t.codespan=function(e){return"<code>"+e+"</code>"},t.br=function(){return this.options.xhtml?"<br/>":"<br>"},t.del=function(e){return"<del>"+e+"</del>"},t.link=function(e,t,n){if(null===(e=H(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<a href="'+Z(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>"},t.image=function(e,t,n){if(null===(e=H(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},t.text=function(e){return e},e}(),V=function(){function e(){}var t=e.prototype;return t.strong=function(e){return e},t.em=function(e){return e},t.codespan=function(e){return e},t.del=function(e){return e},t.html=function(e){return e},t.text=function(e){return e},t.link=function(e,t,n){return""+n},t.image=function(e,t,n){return""+n},t.br=function(){return""},e}(),J=function(){function e(){this.seen={}}var t=e.prototype;return t.serialize=function(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},t.getNextSafeSlug=function(e,t){var n=e,r=0;if(this.seen.hasOwnProperty(n)){r=this.seen[e];do{n=e+"-"+ ++r}while(this.seen.hasOwnProperty(n))}return t||(this.seen[e]=r,this.seen[n]=0),n},t.slug=function(e,t){void 0===t&&(t={});var n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)},e}(),G=o.defaults,X=x.unescape,Y=function(){function e(e){this.options=e||G,this.options.renderer=this.options.renderer||new W,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new V,this.slugger=new J}e.parse=function(t,n){var r=new e(n);return r.parse(t)},e.parseInline=function(t,n){var r=new e(n);return r.parseInline(t)};var t=e.prototype;return t.parse=function(e,t){void 0===t&&(t=!0);var n,r,o,i,a,s,l,u,c,f,d,p,h,g,v,m,b,y,k="",w=e.length;for(n=0;n<w;n++)switch((f=e[n]).type){case"space":continue;case"hr":k+=this.renderer.hr();continue;case"heading":k+=this.renderer.heading(this.parseInline(f.tokens),f.depth,X(this.parseInline(f.tokens,this.textRenderer)),this.slugger);continue;case"code":k+=this.renderer.code(f.text,f.lang,f.escaped);continue;case"table":for(u="",l="",i=f.header.length,r=0;r<i;r++)l+=this.renderer.tablecell(this.parseInline(f.tokens.header[r]),{header:!0,align:f.align[r]});for(u+=this.renderer.tablerow(l),c="",i=f.cells.length,r=0;r<i;r++){for(s=f.tokens.cells[r],l="",a=s.length,o=0;o<a;o++)l+=this.renderer.tablecell(this.parseInline(s[o]),{header:!1,align:f.align[o]});c+=this.renderer.tablerow(l)}k+=this.renderer.table(u,c);continue;case"blockquote":c=this.parse(f.tokens),k+=this.renderer.blockquote(c);continue;case"list":for(d=f.ordered,p=f.start,h=f.loose,i=f.items.length,c="",r=0;r<i;r++)v=f.items[r],m=v.checked,b=v.task,g="",v.task&&(y=this.renderer.checkbox(m),h?v.tokens.length>0&&"text"===v.tokens[0].type?(v.tokens[0].text=y+" "+v.tokens[0].text,v.tokens[0].tokens&&v.tokens[0].tokens.length>0&&"text"===v.tokens[0].tokens[0].type&&(v.tokens[0].tokens[0].text=y+" "+v.tokens[0].tokens[0].text)):v.tokens.unshift({type:"text",text:y}):g+=y),g+=this.parse(v.tokens,h),c+=this.renderer.listitem(g,b,m);k+=this.renderer.list(c,d,p);continue;case"html":k+=this.renderer.html(f.text);continue;case"paragraph":k+=this.renderer.paragraph(this.parseInline(f.tokens));continue;case"text":for(c=f.tokens?this.parseInline(f.tokens):f.text;n+1<w&&"text"===e[n+1].type;)f=e[++n],c+="\n"+(f.tokens?this.parseInline(f.tokens):f.text);k+=t?this.renderer.paragraph(c):c;continue;default:var x='Token with "'+f.type+'" type was not found.';if(this.options.silent)return void console.error(x);throw new Error(x)}return k},t.parseInline=function(e,t){t=t||this.renderer;var n,r,o="",i=e.length;for(n=0;n<i;n++)switch((r=e[n]).type){case"escape":o+=t.text(r.text);break;case"html":o+=t.html(r.text);break;case"link":o+=t.link(r.href,r.title,this.parseInline(r.tokens,t));break;case"image":o+=t.image(r.href,r.title,r.text);break;case"strong":o+=t.strong(this.parseInline(r.tokens,t));break;case"em":o+=t.em(this.parseInline(r.tokens,t));break;case"codespan":o+=t.codespan(r.text);break;case"br":o+=t.br();break;case"del":o+=t.del(this.parseInline(r.tokens,t));break;case"text":o+=t.text(r.text);break;default:var a='Token with "'+r.type+'" type was not found.';if(this.options.silent)return void console.error(a);throw new Error(a)}return o},e}(),K=x.merge,Q=x.checkSanitizeDeprecation,ee=x.escape,te=o.getDefaults,ne=o.changeDefaults,re=o.defaults;function oe(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(n=t,t=null),t=K({},oe.defaults,t||{}),Q(t),n){var r,o=t.highlight;try{r=U.lex(e,t)}catch(e){return n(e)}var i=function(e){var i;if(!e)try{i=Y.parse(r,t)}catch(t){e=t}return t.highlight=o,e?n(e):n(null,i)};if(!o||o.length<3)return i();if(delete t.highlight,!r.length)return i();var a=0;return oe.walkTokens(r,function(e){"code"===e.type&&(a++,setTimeout(function(){o(e.text,e.lang,function(t,n){if(t)return i(t);null!=n&&n!==e.text&&(e.text=n,e.escaped=!0),0==--a&&i()})},0))}),void(0===a&&i())}try{var s=U.lex(e,t);return t.walkTokens&&oe.walkTokens(s,t.walkTokens),Y.parse(s,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+ee(e.message+"",!0)+"</pre>";throw e}}return oe.options=oe.setOptions=function(e){return K(oe.defaults,e),ne(oe.defaults),oe},oe.getDefaults=te,oe.defaults=re,oe.use=function(e){var t=K({},e);if(e.renderer&&function(){var n=oe.defaults.renderer||new W,r=function(t){var r=n[t];n[t]=function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var s=e.renderer[t].apply(n,i);return!1===s&&(s=r.apply(n,i)),s}};for(var o in e.renderer)r(o);t.renderer=n}(),e.tokenizer&&function(){var n=oe.defaults.tokenizer||new A,r=function(t){var r=n[t];n[t]=function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var s=e.tokenizer[t].apply(n,i);return!1===s&&(s=r.apply(n,i)),s}};for(var o in e.tokenizer)r(o);t.tokenizer=n}(),e.walkTokens){var n=oe.defaults.walkTokens;t.walkTokens=function(t){e.walkTokens(t),n&&n(t)}}oe.setOptions(t)},oe.walkTokens=function(e,t){for(var r,o=n(e);!(r=o()).done;){var i=r.value;switch(t(i),i.type){case"table":for(var a,s=n(i.tokens.header);!(a=s()).done;){var l=a.value;oe.walkTokens(l,t)}for(var u,c=n(i.tokens.cells);!(u=c()).done;)for(var f,d=n(u.value);!(f=d()).done;){var p=f.value;oe.walkTokens(p,t)}break;case"list":oe.walkTokens(i.items,t);break;default:i.tokens&&oe.walkTokens(i.tokens,t)}}},oe.parseInline=function(e,t){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");t=K({},oe.defaults,t||{}),Q(t);try{var n=U.lexInline(e,t);return t.walkTokens&&oe.walkTokens(n,t.walkTokens),Y.parseInline(n,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+ee(e.message+"",!0)+"</pre>";throw e}},oe.Parser=Y,oe.parser=Y.parse,oe.Renderer=W,oe.TextRenderer=V,oe.Lexer=U,oe.lexer=U.lex,oe.Tokenizer=A,oe.Slugger=J,oe.parse=oe,oe}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0,t.init=function(){(p=document.createElement("div")).setAttribute("hidden",!0),p.dataset.cbSounds="",document.body.appendChild(p),i.default.on("state-change",function(e){var t=e.name,n=e.value,o=(0,s.sameObject)(t,"sound.ambient"),i=(0,s.sameObject)(t,"sound.effect");if(o){var a=(0,s.get)("sound.ambient");a&&Object.keys(a).forEach(function(e){a[e].url&&h(e,a[e].url,!1),a[e].volume&&m(e,a[e].volume),void 0!==a[e].muted&&b(e,a[e].muted),a[e].playing&&g(e,!0).catch(function(t){return f('Could not resume playing ambient sound "'+e+'" ('+t.message+")")})})}if(i){var l=(0,s.get)("sound.effect");l&&Object.keys(l).forEach(function(e){l[e].url&&h(e,l[e].url,!0),l[e].volume&&m(e,l[e].volume),void 0!==l[e].muted&&b(e,l[e].muted),l[e].playing&&g(e,!1).then(function(){return(0,s.set)("sound.effect."+e+".playing",!1)}).catch(function(t){return f('Could not resume playing sound effect "'+e+'" ('+t.message)})})}if(!o&&!i){var u=/^sound\.(ambient|effect)\.(.+?)\.(.+)$/i.exec(t);if(u)switch(u[3].toLowerCase()){case"playing":n?"ambient"===u[1]?g(u[2],!0,(0,r.default)((0,s.get)(u[2]+".transitionDuration")||(0,s.get)("sound.transitionDuration")||"0s","ms")):g(u[2],!1).then(function(){return(0,s.set)(t,!1)}):"ambient"===u[1]?v(u[2],(0,r.default)((0,s.get)(u[2]+".transitionDuration")||(0,s.get)("sound.transitionDuration")||"0s","ms")):v(u[2]);break;case"url":h(u[2],n,"effect"===u[1]);break;case"volume":m(u[2],n)}}})};var r=l(n(13)),o=l(n(4)),i=l(n(1)),a=l(n(99)),s=n(0);function l(e){return e&&e.__esModule?e:{default:e}}var u=(0,o.default)("sound"),c=u.log,f=u.warn,d={},p=void 0;t.defaults={"sound.mute":!1,"sound.volume":1,"sound.transitionDuration":"1s"};function h(e,t,n){d[e]?(d[e].setAttribute("src",t),n?d[e].setAttribute("preload","auto"):d[e].removeAttribute("preload"),c('Updated <audio> element in sound bank for "'+e+'" to use '+t)):(d[e]=document.createElement("audio"),d[e].setAttribute("src",t),n&&d[e].setAttribute("preload","auto"),p.appendChild(d[e]),c('Added new <audio> element to sound bank for "'+e+'" for '+t))}function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!d[e])throw new Error("There is no sound loaded named "+e+".");return c('Playing sound "'+e+'" (looping: '+t+")"),n>0&&(d[e].volume=0,(0,a.default)(d[e],1,n)),t?(d[e].loop=!0,d[e].play()):(d[e].loop=!1,new Promise(function(t,n){try{d[e].addEventListener("ended",function n(){d[e].removeEventListener("ended",n),t()}),d[e].play().catch(function(e){return n(e)})}catch(e){n(e)}}))}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!d[e])throw new Error("There is no sound loaded named "+e+".");if(t<=0)d[e].pause(),d[e].currentTime=0;else{var n=d[e].volume;(0,a.default)(d[e],0,t).then(function(){d[e].pause(),d[e].volume=n,d[e].currentTime=0})}}function m(e,t){if(!d[e])throw new Error("There is no sound loaded named "+e+".");if(t<0||t>1)throw new Error("A sound volume must be between 0 and 1.");d[e].volume=t}function b(e,t){if(!d[e])throw new Error("There is no sound loaded named "+e+".");d[e].muted=t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0,t.default=function(e){e("random.coinFlip",function(){var e=l();return(0,o.default)(u),e>.5}),e("random.fraction",function(){var e=l();return(0,o.default)(u),e}),[4,5,6,8,10,12,20,25,50,100,1e3].forEach(function(t){e("random.d"+t,function(){var e=1+Math.round(l()*(t-1));return(0,o.default)(u),e})})};var r=s(n(106)),o=s(n(20)),i=s(n(1)),a=n(0);function s(e){return e&&e.__esModule?e:{default:e}}t.defaults={"config.random.seed":function(){return new Date},"config.random.privateState":null};var l=(0,r.default)(new Date,{state:!0});function u(){(0,a.set)("config.random.privateState",l.state())}i.default.on("state-change",function(e){var t=e.name,n=e.value;"config.random.seed"===t&&(l=(0,r.default)(n,{state:!0}))})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0,t.style=d,t.init=function(){(0,a.init)(),f.dataset.cbAuthorStyles="",document.head.appendChild(f),o.default.on("state-change",function(e){var t=e.name,n=e.value;if((0,i.sameObject)(t,"config.style.backdrop")&&(u("Setting backdrop color"),d("#backdrop",{"background-color":(0,s.parseColor)((0,i.get)("config.style.backdrop")).color})),(0,i.sameObject)(t,"config.style.page.fork.divider.color")&&(u("Setting fork divider color"),d("#page .fork p a + a",{"border-top-color":(0,s.parseColor)((0,i.get)("config.style.page.fork.divider.color")).color})),(0,i.sameObject)(t,"config.style.page.fork.divider.size")&&(u("Setting fork divider size"),d("#page .fork p a + a",{"border-top-width":(0,i.get)("config.style.page.fork.divider.size")+"px"})),(0,i.sameObject)(t,"config.style.page.fork.divider.style")&&(u("Setting fork divider style"),d("#page .fork p a + a",{"border-top-style":(0,i.get)("config.style.page.fork.divider.style")})),(0,i.sameObject)(t,"config.style.page.style")||(0,i.sameObject)(t,"config.style.page.style.borderColor"))switch(u("Setting page style"),(0,i.get)("config.style.page.style")){case"none":d("#page",{border:"none","box-shadow":"none"});break;case"shadow":d("#page",{border:"none","box-shadow":"0 4px 8px hsla(0, 0%, 0%, 0.25)"});break;case"thick-line":d("#page",{border:"4px solid "+(0,s.parseColor)((0,i.get)("config.style.page.style.borderColor")).color,"box-shadow":"none"});break;case"thin-line":d("#page",{border:"1px solid "+(0,s.parseColor)((0,i.get)("config.style.page.style.borderColor")).color,"box-shadow":"none"})}if((0,i.sameObject)(t,"config.style.page.verticalAlign"))switch(u("Setting page vertical alignment"),(0,i.get)("config.style.page.verticalAlign")){case"top":d("#page article",{"align-items":"flex-start"});break;case"center":d("#page article",{"align-items":"center"});break;case"bottom":d("#page article",{"align-items":"flex-end"})}if(/^config\.style\.page\..*\.((line)?color|font)$/i.test(t)&&p(t,n),(0,i.sameObject)(t,"config.style.page")){["config.style.page","config.style.page.header","config.style.page.footer"].forEach(function(e){var t=(0,i.get)(e);t&&function(e,t){["color","font","lineColor"].forEach(function(n){t[n]&&p(e+"."+n,t[n]),t.link&&(t.link[n]&&p(e+".link."+n,t.link[n]),t.link.active&&t.link.active[n]&&p(e+".link.active."+n,t.link.active[n]))})}(e,t)})}})};var r=l(n(4)),o=l(n(1)),i=n(0),a=n(117),s=n(118);function l(e){return e&&e.__esModule?e:{default:e}}var u=(0,r.default)("style").log,c=(t.defaults={"config.style.backdrop":"gray-0","config.style.page.style":"shadow","config.style.page.style.borderColor":"gray-2","config.style.page.font":"Iowan Old Style/Constantia/Georgia/serif 18","config.style.page.color":"gray-9 on white","config.style.page.fork.divider.color":"gray-3","config.style.page.fork.divider.style":"dashed","config.style.page.fork.divider.size":1,"config.style.page.link.color":"gray-9","config.style.page.link.lineColor":"red-8","config.style.page.link.font":"underline","config.style.page.link.active.color":"red-8 on red-0","config.style.page.verticalAlign":"center","config.style.page.header.font":"16","config.style.page.header.link.font":"small caps","config.style.page.footer.font":"16","config.style.page.footer.link.font":"small caps"},{}),f=document.createElement("style");function d(e,t){c[e]=c[e]||{},Object.assign(c[e],t),function(){f.innerHTML=Object.keys(c).reduce(function(e,t){return e+(n=t,r=c[t],n+"{"+Object.keys(r).sort().reduce(function(e,t){return r[t]?e+t+":"+r[t].toString()+";":e},"")+"}");var n,r},"")}()}function p(e,t){var n="#page",r=e.replace(/^config\.style\.page\./i,"").split(".");switch("header"===r[0].toLowerCase()?(n+=" header",r.shift()):"footer"===r[0].toLowerCase()&&(n+=" footer",r.shift()),"link"===r[0].toLowerCase()&&(n+=" a",r.shift()),"active"===r[0].toLowerCase()&&(n=n+":hover, "+n+":active",r.shift()),r[0].toLowerCase()){case"color":u("Setting color for "+n),d(n,(0,s.parseColor)(t));break;case"linecolor":u("Setting line color for "+n);var o=(0,s.parseColor)(t).color;d(n,{"text-decoration-color":o,"-webkit-text-decoration-color":o});break;case"font":u("Setting font for "+n),d(n,(0,s.parseFont)(t))}}},function(e,t){var n=/-?\d+(\.\d+)?%?/g;e.exports=function(e){return e.match(n)}},function(e,t){e.exports=function(e,t,n){return Math.min(Math.max(e,t),n)}},function(e,t,n){"use strict";var r=n(29),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(44)),i=p(n(59)),a=n(0),s=n(23),l=p(n(100)),u=p(n(116)),c=n(12),f=n(6),d=n(25);function p(e){return e&&e.__esModule?e:{default:e}}n(126),(0,f.loadFromData)(document.querySelector("tw-storydata")),(0,i.default)(),(0,a.init)(),Object.assign(window,{go:r.go,restart:r.restart}),(0,d.init)(),(0,u.default)(),(0,l.default)(),(0,c.init)(),(0,s.init)(),(0,f.init)(),o&&(0,a.get)("config.testing")&&o.init(),!(0,a.get)("config.testing")&&(0,a.canRestoreFromStorage)()&&(0,a.restoreFromStorage)(),(0,f.addCustomStyles)(),(0,f.runCustomScripts)()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.go=f,t.restart=d;var r,o=n(1),i=(r=o)&&r.__esModule?r:{default:r},a=n(0),s=n(4),l=n(6),u=n(43);function c(e){(0,s.log)("actions",e)}function f(e){c('Going to passage "'+e+'"');var t=(0,l.passageNamed)(e);if(!t)throw new Error('There is no passage with the name "'+e+'"');(0,u.transferToState)(),(0,a.set)("trail",(0,a.get)("trail").concat(t.name))}function d(){c("Restarting"),(0,a.reset)(),window.location.reload()}i.default.on("dom-click",function(e){e.dataset.cbGo&&(0,u.validate)().then(function(){return f(e.dataset.cbGo)})}),i.default.on("dom-click",function(e){e.dataset.cbRestart&&d()})},function(e,t,n){var r=n(31),o=n(32),i=n(14);function a(e){if(!(this instanceof a))return new a(e);this._name=e||"nanobus",this._starListeners=[],this._listeners={}}e.exports=a,a.prototype.emit=function(e){i.ok("string"==typeof e||"symbol"==typeof e,"nanobus.emit: eventName should be type string or symbol");for(var t=[],n=1,r=arguments.length;n<r;n++)t.push(arguments[n]);var a=o(this._name+"('"+e.toString()+"')"),s=this._listeners[e];return s&&s.length>0&&this._emit(this._listeners[e],t),this._starListeners.length>0&&this._emit(this._starListeners,e,t,a.uuid),a(),this},a.prototype.on=a.prototype.addListener=function(e,t){return i.ok("string"==typeof e||"symbol"==typeof e,"nanobus.on: eventName should be type string or symbol"),i.equal(typeof t,"function","nanobus.on: listener should be type function"),"*"===e?this._starListeners.push(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)),this},a.prototype.prependListener=function(e,t){return i.ok("string"==typeof e||"symbol"==typeof e,"nanobus.prependListener: eventName should be type string or symbol"),i.equal(typeof t,"function","nanobus.prependListener: listener should be type function"),"*"===e?this._starListeners.unshift(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].unshift(t)),this},a.prototype.once=function(e,t){i.ok("string"==typeof e||"symbol"==typeof e,"nanobus.once: eventName should be type string or symbol"),i.equal(typeof t,"function","nanobus.once: listener should be type function");var n=this;return this.on(e,function r(){t.apply(n,arguments);n.removeListener(e,r)}),this},a.prototype.prependOnceListener=function(e,t){i.ok("string"==typeof e||"symbol"==typeof e,"nanobus.prependOnceListener: eventName should be type string or symbol"),i.equal(typeof t,"function","nanobus.prependOnceListener: listener should be type function");var n=this;return this.prependListener(e,function r(){t.apply(n,arguments);n.removeListener(e,r)}),this},a.prototype.removeListener=function(e,t){return i.ok("string"==typeof e||"symbol"==typeof e,"nanobus.removeListener: eventName should be type string or symbol"),i.equal(typeof t,"function","nanobus.removeListener: listener should be type function"),"*"===e?(this._starListeners=this._starListeners.slice(),n(this._starListeners,t)):(void 0!==this._listeners[e]&&(this._listeners[e]=this._listeners[e].slice()),n(this._listeners[e],t));function n(e,t){if(e){var n=e.indexOf(t);return-1!==n?(r(e,n,1),!0):void 0}}},a.prototype.removeAllListeners=function(e){return e?"*"===e?this._starListeners=[]:this._listeners[e]=[]:(this._starListeners=[],this._listeners={}),this},a.prototype.listeners=function(e){var t="*"!==e?this._listeners[e]:this._starListeners,n=[];if(t)for(var r=t.length,o=0;o<r;o++)n.push(t[o]);return n},a.prototype._emit=function(e,t,n,r){if(void 0!==e&&0!==e.length){void 0===n&&(n=t,t=null),t&&(n=void 0!==r?[t].concat(n,r):[t].concat(n));for(var o=e.length,i=0;i<o;i++){var a=e[i];a.apply(a,n)}}}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,o=e.length;if(!(t>=o||0===n)){var i=o-(n=t+n>o?o-t:n);for(r=t;r<i;++r)e[r]=e[r+n];e.length=i}}},function(e,t,n){var r,o=n(33)(),i=n(14);a.disabled=!0;try{r=window.performance,a.disabled="true"===window.localStorage.DISABLE_NANOTIMING||!r.mark}catch(e){}function a(e){if(i.equal(typeof e,"string","nanotiming: name should be type string"),a.disabled)return s;var t=(1e4*r.now()).toFixed()%Number.MAX_SAFE_INTEGER,n="start-"+t+"-"+e;function l(i){var a="end-"+t+"-"+e;r.mark(a),o.push(function(){var o=null;try{var s=e+" ["+t+"]";r.measure(s,n,a),r.clearMarks(n),r.clearMarks(a)}catch(e){o=e}i&&i(o,e)})}return r.mark(n),l.uuid=t,l}function s(e){e&&o.push(function(){e(new Error("nanotiming: performance API unavailable"))})}e.exports=a},function(e,t,n){var r=n(14),o="undefined"!=typeof window;function i(e){this.hasWindow=e,this.hasIdle=this.hasWindow&&window.requestIdleCallback,this.method=this.hasIdle?window.requestIdleCallback.bind(window):this.setTimeout,this.scheduled=!1,this.queue=[]}i.prototype.push=function(e){r.equal(typeof e,"function","nanoscheduler.push: cb should be type function"),this.queue.push(e),this.schedule()},i.prototype.schedule=function(){if(!this.scheduled){this.scheduled=!0;var e=this;this.method(function(t){for(;e.queue.length&&t.timeRemaining()>0;)e.queue.shift()(t);e.scheduled=!1,e.queue.length&&e.schedule()})}},i.prototype.setTimeout=function(e){setTimeout(e,0,{timeRemaining:function(){return 1}})},e.exports=function(){var e;return o?(window._nanoScheduler||(window._nanoScheduler=new i(!0)),e=window._nanoScheduler):e=new i,e}},function(e,t,n){
/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2018, Jon Schlinkert.
 * Released under the MIT License.
 */
const r=n(15);function o(e,t,n){return"function"==typeof n.join?n.join(e):e[0]+t+e[1]}function i(e,t,n){return"function"!=typeof n.isValid||n.isValid(e,t)}function a(e){return r(e)||Array.isArray(e)||"function"==typeof e}e.exports=function(e,t,n){if(r(n)||(n={default:n}),!a(e))return void 0!==n.default?n.default:e;"number"==typeof t&&(t=String(t));const s=Array.isArray(t),l="string"==typeof t,u=n.separator||".",c=n.joinChar||("string"==typeof u?u:".");if(!l&&!s)return e;if(l&&t in e)return i(t,e,n)?e[t]:n.default;let f=s?t:function(e,t,n){if("function"==typeof n.split)return n.split(e);return e.split(t)}(t,u,n),d=f.length,p=0;do{let t=f[p];for("number"==typeof t&&(t=String(t));t&&"\\"===t.slice(-1);)t=o([t.slice(0,-1),f[++p]||""],c,n);if(t in e){if(!i(t,e,n))return n.default;e=e[t]}else{let r=!1,a=p+1;for(;a<d;)if(r=(t=o([t,f[a++]],c,n))in e){if(!i(t,e,n))return n.default;e=e[t],p=a-1;break}if(!r)return n.default}}while(++p<d&&a(e));return p===d?e:n.default}},function(e,t,n){"use strict";
/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2018, Jon Schlinkert.
 * Released under the MIT License.
 */const r=n(36);function o(e,t,n,r){if(!s(e))return e;let l=r||{};const u=Array.isArray(t);if(!u&&"string"!=typeof t)return e;let c=l.merge;c&&"function"!=typeof c&&(c=Object.assign);const f=(u?t:function(e,t){const n=function(e,t){let n=e;if(void 0===t)return n+"";const r=Object.keys(t);for(let e=0;e<r.length;e++){const o=r[e];n+=";"+o+"="+String(t[o])}return n}(e,t);if(o.memo[n])return o.memo[n];const r=t&&t.separator?t.separator:".";let i=[],a=[];i=t&&"function"==typeof t.split?t.split(e):e.split(r);for(let e=0;e<i.length;e++){let t=i[e];for(;t&&"\\"===t.slice(-1)&&i[e+1];)t=t.slice(0,-1)+r+i[++e];a.push(t)}return o.memo[n]=a,a}(t,l)).filter(a),d=f.length,p=e;if(!r&&1===f.length)return i(e,f[0],n,c),e;for(let t=0;t<d;t++){let r=f[t];if(s(e[r])||(e[r]={}),t===d-1){i(e,r,n,c);break}e=e[r]}return p}function i(e,t,n,o){o&&r(e[t])&&r(n)?e[t]=o({},e[t],n):e[t]=n}function a(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e}function s(e){return null!==e&&("object"==typeof e||"function"==typeof e)}o.memo={},e.exports=o},function(e,t,n){"use strict";
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var r=n(15);function o(e){return!0===r(e)&&"[object Object]"===Object.prototype.toString.call(e)}e.exports=function(e){var t,n;return!1!==o(e)&&("function"==typeof(t=e.constructor)&&(!1!==o(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))}},function(e,t,n){"use strict";
/*!
 * unset-value <https://github.com/jonschlinkert/unset-value>
 *
 * Copyright (c) 2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var r=n(15),o=n(38);e.exports=function(e,t){if(!r(e))throw new TypeError("expected an object.");if(e.hasOwnProperty(t))return delete e[t],!0;if(o(e,t)){for(var n=t.split("."),i=n.pop();n.length&&"\\"===n[n.length-1].slice(-1);)i=n.pop().slice(0,-1)+"."+i;for(;n.length;)e=e[t=n.shift()];return delete e[i]}return!0}},function(e,t,n){"use strict";
/*!
 * has-value <https://github.com/jonschlinkert/has-value>
 *
 * Copyright (c) 2014-2016, Jon Schlinkert.
 * Licensed under the MIT License.
 */var r=n(39),o=n(41),i=n(42);e.exports=function(e,t,n){return r(e)?o(i(e,t),n):o(e,t)}},function(e,t,n){"use strict";
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var r=n(40);e.exports=function(e){return null!=e&&"object"==typeof e&&!1===r(e)}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";
/*!
 * has-values <https://github.com/jonschlinkert/has-values>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */e.exports=function(e,t){if(null==e)return!1;if("boolean"==typeof e)return!0;if("number"==typeof e)return 0!==e||!0!==t;if(void 0!==e.length)return 0!==e.length;for(var n in e)if(e.hasOwnProperty(n))return!0;return!1}},function(e,t){function n(e){return e?Array.isArray(e)?e.join("."):e:""}
/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */
e.exports=function(e,t,r,o,i){if(null===(a=e)||"object"!=typeof a&&"function"!=typeof a||!t)return e;var a;if(t=n(t),r&&(t+="."+n(r)),o&&(t+="."+n(o)),i&&(t+="."+n(i)),t in e)return e[t];for(var s=t.split("."),l=s.length,u=-1;e&&++u<l;){for(var c=s[u];"\\"===c[c.length-1];)c=c.slice(0,-1)+"."+s[++u];e=e[c]}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validate=function(){var e=document.querySelector("form#cb-validation"),t=(0,r.selectAll)(e,"input, select");return new Promise(function(n,r){var o=function n(){e.removeEventListener("submit",i),t.forEach(function(e){return e.removeEventListener("invalid",n)}),r()},i=function r(){e.removeEventListener("submit",r),t.forEach(function(e){return e.removeEventListener("invalid",o)}),n()};t.forEach(function(e){return e.addEventListener("invalid",o)}),e.addEventListener("submit",i),document.querySelector("button#cb-validation-tester").click()})},t.transferToState=function(){(0,r.selectAll)(document,"[data-cb-set]").forEach(function(e){var t=e.dataset.set;switch(e.nodeName){case"INPUT":(0,o.set)(t,e.value);break;case"SELECT":(0,o.set)(t,e.options[e.selectedIndex].value);break;default:(0,o.set)(t,e.textContent)}})};var r=n(7),o=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Backstage=void 0,t.init=function(){(0,o.init)(),(0,r.render)((0,r.h)(f,null),document.body)};var r=n(2),o=n(17),i=c(n(45)),a=c(n(48)),s=c(n(49)),l=c(n(52)),u=c(n(56));function c(e){return e&&e.__esModule?e:{default:e}}n(58);class f extends r.Component{constructor(e){super(e),this.state={open:!0}}setBodyClass(){this.state.open?document.body.classList.add("backstage-visible"):document.body.classList.remove("backstage-visible")}toggle(){this.setState({open:!this.state.open})}render(){const e=this.state.open?{icon:"→",text:"Close"}:{icon:"←",text:"Open"};return(0,r.h)("div",{id:"backstage",class:this.state.open&&"open"},(0,r.h)("button",{onClick:e=>this.toggle(),title:e.text+" backstage panel",class:"toggle-visibility"},e.icon),(0,r.h)(u.default,null,(0,r.h)(s.default,{label:"State"}),(0,r.h)(i.default,{label:"History"}),(0,r.h)(l.default,{label:"Style"}),(0,r.h)(a.default,{label:"Notes"})))}componentDidMount(){this.setBodyClass()}componentDidUpdate(){this.setBodyClass()}}t.Backstage=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=l(n(10)),i=l(n(1)),a=n(17),s=n(0);function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if(0===e.length)return[];const t=[];let n,r=[];return e.forEach(({change:e},o)=>{"trail"===e.name?(t.push({historyIndex:o-1,passage:n,varChanges:r}),r=[],n=e.value[e.value.length-1]):r.push({name:e.name,value:e.value})}),t.push({historyIndex:e.length-1,passage:n,varChanges:r}),console.log("Parsed",e,t),t}function c({historyIndex:e,passage:t,varChanges:n}){const o=[(0,r.h)("tr",null,(0,r.h)("td",{class:"actions",rowspan:n.length+1},(0,r.h)("button",{onClick:e>=0?()=>(0,a.rewindTo)(e):s.reset},"↪")),(0,r.h)("td",{class:"go",rowspan:n.length+1,colspan:n.length>0?1:2},t?`Go to "${t}"`:"Startup"))];return n.forEach(e=>{o.push((0,r.h)("tr",null,(0,r.h)("td",null,e.name," ← ",JSON.stringify(e.value))))}),o}n(47);t.default=class extends r.Component{constructor(e){super(e),this.state={history:u(a.history)},this.updateBound=(()=>this.update())}update(){this.setState({history:u(a.history)})}render(){let e;return e=this.state.history.length>0?(0,r.h)("table",{class:"history"},this.state.history.map(c)):(0,r.h)("table",{class:"history"},(0,r.h)("tr",null,(0,r.h)("td",{class:"actions"},(0,r.h)("button",{onClick:s.reset},"↪")),(0,r.h)("td",{class:"go"},"Startup"))),(0,r.h)(o.default,{title:"History"},e)}componentDidMount(){i.default.on("backstage-recorder-update",this.updateBound)}componentDidUnmount(){i.default.removeEventListener("backstage-recorder-update",this.updateBound)}}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(18)),o=n(2),i=l(n(1)),a=n(7),s=n(0);function l(e){return e&&e.__esModule?e:{default:e}}t.default=class extends o.Component{constructor(e){super(e);const t=(0,s.get)("trail");this.state={currentPassage:t[t.length-1],notes:{}},this.restore(),this.syncBound=(e=>this.sync(e))}sync({name:e,value:t}){"trail"===e&&this.setState({currentPassage:t[t.length-1]})}restore(){const e=window.localStorage.getItem(`cb-passage-notes-${(0,s.get)("config.state.saveKey")}`);e&&this.setState({notes:JSON.parse(e)})}save(){window.localStorage.setItem(`cb-passage-notes-${(0,s.get)("config.state.saveKey")}`,JSON.stringify(this.state.notes))}saveNote(e,t){const n=Object.assign({},this.state.notes);n[e]=t,this.setState({notes:n}),this.save()}export(){const e=Object.keys(this.state.notes).reduce((e,t)=>e+`<li class="note"><span class="passage">${(0,r.default)(t)}</span><pre>${(0,r.default)(this.state.notes[t])}</pre></li>`,""),t=document.createElement("a");t.setAttribute("download",`${(0,s.get)("story.name")} Notes - ${(new Date).toDateString()} ${(new Date).toTimeString()}.html`),t.setAttribute("href","data:text/html;base64,"+window.btoa(`<style>body {font-family: sans-serif}</style><h1>Notes for &ldquo;${(0,r.default)((0,s.get)("story.name"))}&rdquo;</h1><ul data-cb-backstage-notes data-cb-version="${(0,s.get)("engine.version")}">${e}</ul>`)),document.body.appendChild(t),t.click(),document.body.removeChild(t)}startImport(){this.upload.click()}import(e){const t=this.upload.files[0];if(!t)return;const n=new FileReader(t);n.onload=(e=>{const t=document.createElement("div"),n=Object.assign({},this.state.notes);let r=0;t.innerHTML=e.target.result;const o=(0,a.selectAll)(t,"ul[data-cb-backstage-notes] li");0!==o.length?(o.forEach(e=>{const t=(0,a.select)(e,"span.passage"),o=(0,a.select)(e,"pre");t&&o&&(n[t.textContent]=(n[t.textContent]||"")+"\n\n"+o.textContent,r++)}),this.setState({notes:n}),this.save(),window.alert(`${r} note(s) were imported.`)):window.alert("No notes were found in this file.")}),n.readAsText(t)}deleteAll(){window.confirm("Are you sure? This will delete all text entered in the Notes panel of Backstage, and cannot be undone.")&&(this.setState({notes:{}}),this.save())}render(){return(0,o.h)("div",null,(0,o.h)("p",null,(0,o.h)("label",null,"Notes on “",this.state.currentPassage,"”")),(0,o.h)("p",null,(0,o.h)("textarea",{value:this.state.notes[this.state.currentPassage],onInput:e=>this.saveNote(this.state.currentPassage,e.target.value)})),(0,o.h)("p",null,(0,o.h)("button",{onClick:()=>this.export()},"Export All Notes"),(0,o.h)("button",{onClick:()=>this.startImport()},"Import Notes From File"),(0,o.h)("button",{onClick:()=>this.deleteAll()},"Delete All Notes")),(0,o.h)("input",{type:"file",hidden:!0,ref:e=>this.upload=e,onChange:()=>this.import()}))}componentDidMount(){i.default.on("state-change",this.syncBound)}componentDidUnmount(){i.default.removeListener("state-change",this.syncBound)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,r.h)("div",null,(0,r.h)(i.default,null),(0,r.h)(o.default,null))};var r=n(2),o=a(n(50)),i=a(n(51));function a(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(2),i=n(0),a=n(10),s=(r=a)&&r.__esModule?r:{default:r};t.default=class extends o.Component{constructor(e){super(e),this.state={snapshots:[]},this.restore()}addSnapshot(){const e=window.prompt("Enter a name for this snapshot:");e&&this.setState({snapshots:this.state.snapshots.concat({name:e,state:(0,i.saveToObject)()})})}loadSnapshot(e){(0,i.restoreFromObject)(this.state.snapshots[e].state)}deleteSnapshot(e){window.confirm(`Are you sure you want to delete the snapshot "${this.state.snapshots[e].name}"? This cannot be undone.`)&&this.setState({snapshots:this.state.snapshots.filter((t,n)=>n!==e)})}save(){window.localStorage.setItem(`cb-snapshots-${(0,i.get)("config.state.saveKey")}`,JSON.stringify(this.state.snapshots))}restore(){const e=window.localStorage.getItem(`cb-snapshots-${(0,i.get)("config.state.saveKey")}`);e&&this.setState({snapshots:JSON.parse(e)})}render(){const e=this.state.snapshots.map((e,t)=>(0,o.h)("div",{class:"segmented-button block"},(0,o.h)("button",{onClick:()=>this.loadSnapshot(t),title:'Load snapshot "{s.name}"'},e.name),(0,o.h)("button",{onClick:()=>this.deleteSnapshot(t),class:"fixed",title:'Delete snapshot "{s.name}"'},(0,o.h)("strong",null,"×"))));return(0,o.h)(s.default,{title:"Snapshots"},e,(0,o.h)("button",{class:"block",onClick:()=>this.addSnapshot()},"Add Snapshot"))}componentDidUpdate(){this.save()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=s(n(10)),i=n(0),a=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}t.default=class extends r.Component{constructor(e){super(e),this.state={varNames:[],showDefaults:!1},this.syncBound=(()=>this.syncWithState())}syncWithState(){this.setState({varNames:(0,i.varNames)(this.state.showDefaults)})}onChangeDefaults(e){this.setState({showDefaults:e.target.checked})}onChangeVar(e,t){(0,i.set)(t,JSON.parse(e.target.value))}render(){return(0,r.h)(o.default,{title:"Variables"},(0,r.h)("p",null,(0,r.h)("input",{type:"checkbox",id:"cb-backstage-show-defaults",checked:this.state.showDefaults,onChange:e=>this.onChangeDefaults(e)}),(0,r.h)("label",{for:"cb-backstage-show-defaults"},"Show Defaults")),(0,r.h)("table",null,this.state.varNames.map(e=>(0,r.h)("tr",null,(0,r.h)("td",null,e),(0,r.h)("td",null,(0,r.h)("input",{type:"text",value:JSON.stringify((0,i.get)(e)),onChange:t=>this.onChangeVar(t,e)}))))))}componentWillMount(){this.syncWithState(),a.default.on("state-change",this.syncBound)}componentDidUpdate(e,t){t.showDefaults!==this.state.showDefaults&&this.syncWithState()}componentWillUnmount(){a.default.removeListener("state-change",this.syncBound)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,r.h)("div",null,(0,r.h)(o.default,null),(0,r.h)(i.default,{title:"Page",prefix:"page"}),(0,r.h)(i.default,{title:"Header",prefix:"page.header"}),(0,r.h)(i.default,{title:"Footer",prefix:"page.footer"}))};var r=n(2),o=a(n(53)),i=a(n(54));function a(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(0),i=s(n(10)),a=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}const l=["page","page.header","page.footer"].reduce((e,t)=>e.concat([`config.style.${t}.font`,`config.style.${t}.color`,`config.style.${t}.link.font`,`config.style.${t}.link.color`,`config.style.${t}.link.lineColor`,`config.style.${t}.link.active.font`,`config.style.${t}.link.active.color`,`config.style.${t}.link.active.lineColor`]),[]);t.default=class extends r.Component{constructor(e){super(e),this.state=l.reduce((e,t)=>(e[t]=(0,o.get)(t),e),{}),this.onStateChangeBound=(({name:e,value:t})=>this.onStateChange(e,t))}onStateChange(e,t){this.state[e]&&this.setState({[e]:t})}render(){const e=Object.keys(this.state).reduce((e,t)=>{const n=(0,o.get)(t);return n?e+`${t}: ${JSON.stringify(n)}\n`:e},"").trim();return(0,r.h)(i.default,{title:"Config"},(0,r.h)("p",null,(0,r.h)("label",{for:"cb-backstage-style-config"},"Enter this code into your first passage’s vars section to permanently use this style:")),(0,r.h)("p",null,(0,r.h)("textarea",{readonly:!0,id:"cb-backstage-style-config",onClick:e=>e.target.select()},e)))}componentWillMount(){a.default.on("state-change",this.onStateChangeBound)}componentWillUnmount(){a.default.removeListener("state-change",this.onStateChangeBound)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({title:e,prefix:t}){return(0,r.h)(o.default,{title:e,initiallyOpen:!1},(0,r.h)(i.default,{label:"Font",binding:`config.style.${t}.font`}),(0,r.h)(i.default,{label:"Color",binding:`config.style.${t}.color`}),(0,r.h)(i.default,{label:"Link Font",binding:`config.style.${t}.link.font`}),(0,r.h)(i.default,{label:"Link Color",binding:`config.style.${t}.link.color`}),(0,r.h)(i.default,{label:"Link Line Color",binding:`config.style.${t}.link.lineColor`}),(0,r.h)(i.default,{label:"Active Link Font",binding:`config.style.${t}.link.active.font`}),(0,r.h)(i.default,{label:"Active Link Color",binding:`config.style.${t}.link.active.color`}),(0,r.h)(i.default,{label:"Active Link Line Color",binding:`config.style.${t}.link.active.lineColor`}))};var r=n(2),o=a(n(10)),i=a(n(55));function a(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({label:e,binding:t}){return(0,r.h)("p",{class:"input-group"},(0,r.h)("label",{for:`cb-backstage-${t}`},e),(0,r.h)("input",{type:"text",id:`cb-backstage-${t}`,value:(0,o.get)(t),onChange:e=>(0,o.set)(t,e.target.value)}))};var r=n(2),o=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);n(57);t.default=class extends r.Component{constructor(e){super(e),this.state={selected:0}}select(e){this.setState({selected:e})}render(){const e=this.props.children.map((e,t)=>(0,r.h)("li",null,(0,r.h)("button",{onClick:()=>this.select(t),class:t===this.state.selected&&"active"},e.attributes.label)));return(0,r.h)("div",null,(0,r.h)("ul",{class:"tabs"},e),(0,r.h)("div",{class:"tab-content"},this.props.children[this.state.selected]))}}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){window.engine={extend:function(e,t){var n=a.get("engine.version"),r=d(e),o=d(n);o[0]<r[0]?f("The current engine version ("+n+") has a lower major version than requested ("+e+"); skipping"):(o[0]>r[0]?f("The current engine version ("+n+") has a higher major version than requested ("+e+"); running code but you may encounter problems"):(o[1]<r[1]&&f("The current engine version ("+n+") has a lower minor version than requested ("+e+"); running code but you may encounter problems"),o[1]===r[1]&&o[2]<r[2]&&f("The current engine version ("+n+") has a lower patch version than requested ("+e+"); running code but you may encounter problems")),t())},event:r.default,log:o.log,render:l.render,state:a,story:s,warn:o.warn}};var r=c(n(1)),o=n(4),i=c(o),a=u(n(0)),s=u(n(6)),l=n(11);function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e){return e&&e.__esModule?e:{default:e}}var f=(0,i.default)("extensibility").warn;function d(e){return e.split(".").map(window.parseInt)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=m(n(61)),o=m(n(62)),i=m(n(63)),a=m(n(73)),s=m(n(74)),l=m(n(75)),u=m(n(76)),c=m(n(77)),f=m(n(78)),d=m(n(79)),p=m(n(80)),h=m(n(81)),g=m(n(82)),v=m(n(83));function m(e){return e&&e.__esModule?e:{default:e}}t.default=[r.default,o.default,i.default,a.default,s.default,l.default,u.default,c.default,f.default,d.default,p.default,h.default,g.default,v.default]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default={match:/^(no )?ambient\s+sound/i,render:function(e,t){var n=(0,r.get)("sound.ambient");if(n&&Object.keys(n).forEach(function(t){t!==e&&n[t].playing&&(0,r.set)("sound.ambient."+t+".playing",!1)}),e){var o=(0,r.get)("sound.ambient."+e+".description")||"";return t.volume&&(0,r.set)("sound.ambient."+e+".volume",t.volume),(0,r.set)("sound.ambient."+e+".playing",!0),"<audio>"+o+"</audio>"}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),o=n(0);t.default={match:/^back\s+link/i,render:function(e,t){var n=(0,o.get)("trail");return(0,r.renderLink)(n.length>1?n[n.length-2]:n[0],t.label||"Back")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),o=n(0),i=s(n(1)),a=s(n(5));function s(e){return e&&e.__esModule?e:{default:e}}t.default={match:/^cycling\s+link(\s+for)?/i,render:function(e,t){var n=void 0;return e?void 0===(n=(0,o.get)(e))&&((0,o.set)(e,t.choices[0]),n=t.choices[0]):n=t.choices[0],(0,a.default)("a",{href:"javascript:void(0)","data-cb-cycle-set":e||void 0,"data-cb-cycle-choices":JSON.stringify(t.choices)},[n])}},i.default.on("dom-click",function(e){if(e.dataset.cbCycleChoices){var t=JSON.parse(e.dataset.cbCycleChoices),n=t.indexOf(e.textContent)+1;n===t.length&&(n=0),(0,r.changeBody)(function(){return e.textContent=t[n]}),e.dataset.cbCycleSet&&(0,o.set)(e.dataset.cbCycleSet,t[n])}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.none=function(e,t){return new Promise(function(n){e.innerHTML="<div>"+t+"</div>",n()})},t.fadeInOut=function(e,t,n){return new Promise(function(r){var o=e.style.pointerEvents,a=(0,i.default)(n,"s")/2;s(e),e.style.pointerEvents="none";var u=document.createElement("div");if(u.innerHTML=t,u.style.visibility="hidden",u.style.animationDuration=a+"s",u.addEventListener("animationend",function t(){u.removeEventListener("animationend",t),u.className="",u.style.animationDuration=a+"s",e.style.pointerEvents=o,r()}),""!==e.innerHTML.trim()){var c=l(e);c.style.position="absolute",c.style.top="0",c.style.left="0",c.className="fade-out",c.style.animationDuration=a+"s",c.addEventListener("animationend",function e(){c.removeEventListener("animationend",e),c.parentNode.removeChild(c),u.style.visibility="visible",u.className="fade-in"}),e.innerHTML="",e.appendChild(u),e.appendChild(c)}else u.className="fade-in",u.animationDuration=2*a,u.style.visibility="visible",u.className="fade-in",e.appendChild(u)})},t.crossfade=function(e,t,n){return new Promise(function(r){var o=e.style.pointerEvents,a=(0,i.default)(n,"s");s(e),e.style.pointerEvents="none";var u=document.createElement("div");if(u.innerHTML=t,u.className="fade-in",u.style.animationDuration=a+"s",u.addEventListener("animationend",function t(){u.removeEventListener("animationend",t),u.style.animationDuration=null,u.className="",e.style.pointerEvents=o,r()}),""!==e.innerHTML.trim()){var c=l(e);c.style.position="absolute",c.style.top="0",c.style.left="0",c.className="fade-out",c.style.animationDuration=a+"s",c.addEventListener("animationend",function e(){c.removeEventListener("animationend",e),c.style.opacity=.5,c.parentNode.removeChild(c)}),e.innerHTML="",e.appendChild(u),e.appendChild(c)}else e.innerHTML="",e.appendChild(u)})};var r,o=n(13),i=(r=o)&&r.__esModule?r:{default:r},a=n(7);function s(e){"static"===window.getComputedStyle(e).position&&(e.style.position="relative")}function l(e){var t=document.createElement(e.nodeName.toLowerCase());return t.innerHTML=e.innerHTML,t.style.width=e.clientWidth+"px",t.style.height=e.clientHeight+"px",t.setAttribute("aria-hidden",!0),t.style.pointerEvents="none",(0,a.selectAll)(t,"audio").forEach(function(e){return e.parentNode.removeChild(e)}),t}n(65)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){window.addEventListener("error",s),window.addEventListener("unhandledrejection",function(e){return s(e.reason)})};var r,o=n(67),i=(r=o)&&r.__esModule?r:{default:r},a=n(0);function s(e){try{var t="";t=(t=e.error&&e.error.stack?e.message+"\n\nStack trace:\n"+e.error.stack:e.message+"\n\n[No stack trace available]").replace("\nPlease report this to https://github.com/chjj/marked.","");var n=document.createElement("div"),r=document.querySelector("#page article"),o=(0,a.get)("trail");n.className="error",n.innerHTML="\n\t\t\t<p>\n\t\t\tAn unexpected error has occurred.\n\t\t\t</p>\n\t\t\t<pre>"+((0,a.get)("config.testing")?t:"")+'</pre>\n\t\t\t<ul>\n\t\t\t\t<li>\n\t\t\t\t\t<a href="javascript:void(0)" '+(o.length>1?"data-cb-back":"data-cb-refresh")+'>Go back</a> to the previous passage.\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<a href="javascript:void(0)" data-cb-hard-restart>Hard restart</a>, clearing all progress and beginning from the start.\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t',n.addEventListener("click",function(e){if((0,i.default)(e.target,"[data-cb-back]",!0)){var t=(0,a.get)("trail");Array.isArray(t)?(0,a.set)("trail",t.slice(0,t.length-1)):window.alert("Sorry, going back was not successful. Please try hard restarting.")}else{if((0,i.default)(e.target,"[data-cb-refresh]",!0))(0,a.set)("trail",[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}((0,a.get)("trail"))));else(0,i.default)(e.target,"[data-cb-hard-restart]",!0)&&((0,a.purgeFromStorage)(!0),window.location.reload())}}),r.innerHTML="",r.appendChild(n)}catch(e){console.error(e)}}},function(e,t,n){var r=n(68);e.exports=function(e,t,n){for(var o=n?e:e.parentNode;o&&o!==document;){if(r(o,t))return o;o=o.parentNode}}},function(e,t){var n=Element.prototype,r=n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector;e.exports=function(e,t){if(r)return r.call(e,t);for(var n=e.parentNode.querySelectorAll(t),o=0;o<n.length;++o)if(n[o]==e)return!0;return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){var e=window.console.warn,t=document.querySelector("#page .warnings");console.warn=function(){for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];if((0,o.get)("config.testing"))try{t.removeAttribute("hidden"),i.forEach(function(e){var n=document.createElement("li");n.className="warning",n.innerHTML="Warning: "+(0,r.default)(e),t.appendChild(n)})}catch(e){}e.apply(window.console,i)},i.default.on("state-change",function(e){var n=e.name;"trail"===n&&(t.setAttribute("hidden",""),t.innerHTML="")})};var r=a(n(18)),o=n(0),i=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}n(70)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=Date.now(),r=void 0,o=(0,a.selectAll)(e,"[data-cb-skippable]").map(function(e){return{el:e,delay:1e3*(0,i.default)(window.getComputedStyle(e).animationDelay)}}).sort(function(e,t){return e.delay-t.delay});if(0===o.length)return;function s(){var e=Date.now()-n,t=Object.assign({},o.find(function(t){return t.delay>e}));t?(o.forEach(function(e){e.delay<=t.delay?(e.delay=0,e.el.classList.add("skip-animation")):(e.delay-=t.delay,e.el.style.animationDelay=e.delay+"ms")}),n=Date.now(),window.clearTimeout(r),l()):u()}function l(){r&&window.clearTimeout(r),r=window.setTimeout(u,o[o.length-1].delay)}function u(){t.classList.remove("visible"),document.body.removeEventListener("click",s),document.body.removeEventListener("keyup",s)}t.classList.add("visible"),l(),window.setTimeout(function(){document.body.addEventListener("click",s),document.body.addEventListener("keyup",s)},50)};var r,o=n(13),i=(r=o)&&r.__esModule?r:{default:r},a=n(7)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(5),i=(r=o)&&r.__esModule?r:{default:r};t.default={match:/^embed\s+flickr(\s+image)?/i,render:function(e,t){return(0,i.default)("img",Object.assign({},t,{src:/img src="(.+?)"/.exec(e)[1]}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(5),i=(r=o)&&r.__esModule?r:{default:r};t.default={match:/^embed\s+image?/i,render:function(e,t){return(0,i.default)("img",Object.assign({},t,{src:e}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=n(11);t.default={match:/^embed\s+passage(\s+named)?/i,render:function(e){return(0,o.render)((0,r.passageNamed)(e).source)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(5),i=(r=o)&&r.__esModule?r:{default:r};t.default={match:/^embed\s+unsplash(\s+image)?/i,render:function(e,t){return(0,i.default)("img",Object.assign({},t,{src:"https://source.unsplash.com/"+e.replace(/.*\//,"")+"/"+t.width+"x"+t.height}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(5),i=(r=o)&&r.__esModule?r:{default:r};t.default={match:/^embed\s+youtube(\s+video)?/i,render:function(e,t){var n="https://www.youtube-nocookie.com/embed/"+e.replace(/.*\?v=/,"")+"?modestbranding=1&rel=0&controls="+(t.controls?1:0)+"&";return t.autoplay&&(n+="autoplay=1&"),t.loop&&(n+="loop=1&"),(0,i.default)("div",{style:"position: relative; height: 0; padding-bottom: 56.25%; margin-bottom: 1em"},[(0,o.domify)("iframe",{src:n,frameBorder:0,style:"position: absolute; top: 0; left: 0; width: 100%; height: 100%"})])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16);t.default={match:/^link\s+to/i,render:function(e,t){return(0,r.renderLink)(e,t.label)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(1)),o=n(0),i=n(5),a=s(i);function s(e){return e&&e.__esModule?e:{default:e}}t.default={match:/^dropdown menu(\s+for)?/i,render:function(e,t){var n=void 0;return e&&void 0===(n=(0,o.get)(e))&&((0,o.set)(e,t.choices[0]),n=t.choices[0]),(0,a.default)("select",{"data-cb-menu-set":e||void 0},t.choices.map(function(t){var r={value:t};return e&&n===t&&(r.selected=""),(0,i.domify)("option",r,[t])}))}},r.default.on("dom-change",function(e){e.dataset.cbMenuSet&&(0,o.set)(e.dataset.cbMenuSet,e.querySelectorAll("option")[e.selectedIndex].value)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(5),i=(r=o)&&r.__esModule?r:{default:r};t.default={match:/^restart\s+link/i,render:function(e,t){return(0,i.default)("a",{href:"javascript:void(0)","data-cb-restart":!0},[t.label||"Restart"])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),o=l(n(1)),i=l(n(5)),a=n(6),s=n(11);function l(e){return e&&e.__esModule?e:{default:e}}t.default={match:/^reveal\s+link/i,render:function(e,t){return t.text?(0,i.default)("a",{href:"javascript:void(0)","data-cb-reveal-text":t.text},[e]):t.passage?(0,i.default)("a",{href:"javascript:void(0)","data-cb-reveal-passage":t.passage},[e]):void 0}},o.default.on("dom-click",function(e){var t=e.dataset.cbRevealText;if(e.dataset.cbRevealPassage&&(t=(0,a.passageNamed)(e.dataset.cbRevealPassage).source),t){var n=document.createElement("div");n.innerHTML=(0,s.render)(t).trim(),(0,r.changeBody)(function(){var t=n.children.length;if(t>0){var r=document.createElement("span");if(r.innerHTML=n.firstChild.innerHTML,e.parentNode.insertBefore(r,e),n.removeChild(n.firstChild),t>1){for(var o=n.lastChild;n.lastChild;)e.parentNode.parentNode.insertBefore(n.lastChild,e.parentNode.nextSibling);for(;e.nextSibling;)o.insertBefore(e.nextSibling,null)}}e.parentNode.removeChild(e)})}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default={match:/^sound\s+effect/i,render:function(e,t){var n=(0,r.get)("sound.effect."+e+".description")||"";return t.volume&&(0,r.set)("sound.effect."+e+".volume",t.volume),(0,r.set)("sound.effect."+e+".playing",!0),"<audio>"+n+"</audio>"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1)),o=n(0),i=a(n(5));function a(e){return e&&e.__esModule?e:{default:e}}t.default={match:/^text\s+input(\s+for)?/i,render:function(e,t){return(0,i.default)("input",{type:"text",value:e?(0,o.get)(e):"","data-cb-text-field-set":e||void 0,required:!1!==t.required?"":void 0})}},r.default.on("dom-change",function(e){e.dataset.cbTextFieldSet&&(0,o.set)(e.dataset.cbTextFieldSet,e.value)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(85)),o=f(n(86)),i=f(n(87)),a=f(n(88)),s=f(n(89)),l=f(n(90)),u=f(n(91)),c=f(n(93));function f(e){return e&&e.__esModule?e:{default:e}}t.default=[r.default,o.default,i.default,a.default,s.default,l.default,u.default,c.default]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(13)),o=i(n(21));function i(e){return e&&e.__esModule?e:{default:e}}t.default={match:/^after\s/i,process:function(e,t){var n=t.invocation,i=(0,r.default)(n.replace(/^after\s/i,""),"ms");e.text=(0,o.default)(e.text,{"data-cb-skippable":"",class:"fade-in",style:"animation-delay: "+i+"ms"})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(21),i=(r=o)&&r.__esModule?r:{default:r};t.default={match:/^align\s+(left|right|center)/i,process:function(e,t){var n=t.invocation.replace(/^align\s+/i,"");e.text=(0,i.default)(e.text,{style:"display: block; text-align: "+n})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={match:/^append$/i,process:function(e){e.startsNewParagraph=!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={match:/^if(always|never)?\s|else$|unless\s/i,processRaw:function(e,t){var n=t.invocation,r=t.state,o=n.replace(/\s.*/,"").toLowerCase(),i=void 0;switch("else"!==o&&(i=new Function("return "+n.replace(/.*?\s/,""))),o){case"if":r.conditionEval=i.apply(window);break;case"ifalways":r.conditionEval=!0;break;case"ifnever":r.conditionEval=!1;break;case"unless":r.conditionEval=!i.apply(window);break;case"else":if(void 0===r.conditionEval)throw new Error("There was no matching if modifier for an else modifier.");r.conditionEval=!r.conditionEval}r.conditionEval||(e.text="")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={match:/^continued?|cont('d)?$/i,process:function(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={match:/^css$/i,process:function(e){e.text="<style>"+e.text+"</style>"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(92),i=(r=o)&&r.__esModule?r:{default:r},a=n(0);t.default={match:/^javascript$/i,process:function(e){try{var t=new Function("\n\t\t\t\t\t\tfunction write() { write.__out += write.__join.call(arguments, ''); }\n\t\t\t\t\t\twrite.__out = '';\n\t\t\t\t\t\twrite.__join = Array.prototype.join;\n\t\t\t\t\t\t"+(0,i.default)(e.text)+";\n\t\t\t\t\t\treturn write.__out;\n\t\t\t\t\t");e.text=t.apply(window)}catch(t){if(!(0,a.get)("config.testing"))throw t;var n="unknown error";n=t.error&&t.error.stack?t.error.stack:t.message+"\n[No stack trace available]",e.text='<div class="error">An error occured evaluating:<pre>'+e.text+"</pre><p><pre>"+n+"</pre></p></div>"}}}},function(e,t,n){(function(t){var n=1/0,r="[object Symbol]",o=/&(?:amp|lt|gt|quot|#39|#96);/g,i=RegExp(o.source),a="object"==typeof t&&t&&t.Object===Object&&t,s="object"==typeof self&&self&&self.Object===Object&&self,l=a||s||Function("return this")();var u,c=(u={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},function(e){return null==u?void 0:u[e]}),f=Object.prototype.toString,d=l.Symbol,p=d?d.prototype:void 0,h=p?p.toString:void 0;function g(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&f.call(e)==r}(e))return h?h.call(e):"";var t=e+"";return"0"==t&&1/e==-n?"-0":t}e.exports=function(e){var t;return(e=null==(t=e)?"":g(t))&&i.test(e)?e.replace(o,c):e}}).call(this,n(19))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={match:/^(note(\s+to\s+self)?|n?b?|todo|fixme)$/i,process:function(e){e.text=""}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,n={vars:[],blocks:[]},i=e.split(t.varsSep,2),a=void 0,c=void 0;if(2===i.length){s("Detected vars section");var f=r(i,2);a=f[0],c=f[1],(0,o.default)(a).forEach(function(e){if(""!==e.trim()){var t=e.indexOf(":");if(-1!==t){var r=e.substr(0,t).trim(),o=e.substr(t+1).trim(),i={name:r,value:new Function("return ("+o+")")},a=r.match(/\(.+\)/);a?(i.condition=new Function("return ("+a[0]+")"),i.name=(i.name.substr(0,a.index)+i.name.substr(a.index+a[0].length)).trim(),s('Setting variable "'+i.name+'" to "'+o+'" with condition ('+a[0]+")")):s('Setting variable "'+r+'" to "'+o+'" without condition'),n.vars.push(i)}else l('The line "'+e+'" in the vars section is missing a colon. It was ignored.')}})}else s("No vars section detected"),c=i[0];var d=function(e,t){var r=t.trim();""!==r&&(s("Creating '"+e+"' block with content: \""+r+'"'),n.blocks.push({type:e,content:r}))},p=new RegExp(t.modifierPattern),h=0,g=p.exec(c);for(;g;){d("text",c.substring(h,g.index));for(var v=g[1],m="",b=0;b<v.length;b++)switch(v[b]){case'"':for(m+='"',b+=1;b<v.length&&(m+=v[b],'"'!==v[b]||"\\"===v[b-1]);b++);break;case";":d("modifier",m),m="";break;default:m+=v[b]}d("modifier",m),h=p.lastIndex,g=p.exec(c)}return d("text",c.substring(h)),n};var o=i(n(95));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,i(n(4)).default)("parse"),s=a.log,l=a.warn,u={varsSep:/^--$/m,modifierPattern:/^\[([^[].+[^\]])\]$/gm}},function(e,t,n){"use strict";e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("Expected a string in the first argument, got "+typeof e);if(!(t&&t.preserveNewlines))return e.split(/\r?\n/);for(var n=e.split(/(\r?\n)/),r=[],o=0;o<n.length;o+=2)r.push(n[o]+(n[o+1]||""));return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.markedOptions=void 0,t.default=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e.vars)throw new Error("The renderer was given an object with no vars property.");if(!e.blocks)throw new Error("The renderer was given an object with no blocks property.");var i="";o||(c("Setting vars ("+e.vars.length+")"),e.vars.forEach(function(e){if(e.condition){var t=e.condition();t?(c('Setting var "'+name+'" (condition is currently true)'),(0,l.set)(e.name,e.value())):c('Not setting var "'+name+'" (condition is currently false)')}else c('Setting var "'+name+'"'),(0,l.set)(e.name,e.value())}));var u=[],d={};return e.blocks.forEach(function(e){switch(e.type){case"text":var r={text:e.content,startsNewParagraph:!0},o=u.filter(function(e){return!!e.mod.processRaw});c("Running "+o.length+" modifiers on raw source block"),o.forEach(function(e){e.mod.processRaw(r,{state:d[e.mod],invocation:e.invocation})}),r.text=(0,a.default)((0,s.default)(r.text),t);var l=u.filter(function(e){return!!e.mod.process});c("Running "+l.length+" modifiers on source block"),l.forEach(function(e){return e.mod.process(r,{state:d[e.mod],invocation:e.invocation})}),c("Output after modifiers: "+JSON.stringify(r)),""!==r.text.trim()&&(""!==i&&(i+=r.startsNewParagraph?"\n\n":" "),i+=r.text),u=[];break;case"modifier":var f=n.filter(function(t){return t.match.test(e.content)});if(1===f.length){var p=f[0];c('Activated "'+p.name+'" modifier matching ['+e.content+"]"),d[p]=d[p]||{},u.push({mod:p,invocation:e.content})}else 0===f.length?i+="\n\n["+e.content+"]\n\n":(console.warn('More than one modifier matched "['+e.content+']".'),i+="\n\n["+e.content+"]\n\n");break;default:throw new Error("Don't know how to render a block with type \""+e.type+'".')}}),i=i.replace(/^((>|-|\*).*$)\n+\2/gm,"$1\n$2"),r.default.setOptions(f),c("Final Markdown:\n"+i),(0,r.default)(i)};var r=u(n(22)),o=u(n(4)),i=u(n(97)),a=u(n(98)),s=u(n(16)),l=n(0);function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,o.default)("render").log,f=t.markedOptions={renderer:i.default,smartypants:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(22);var i=new((r=o)&&r.__esModule?r:{default:r}).default.Renderer;Object.assign(i,{blockquote:function(e){return'<div class="fork">'+e+"</div>"},del:function(e){return'<span class="small-caps">'+e+"</span>"}}),t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n="",r=0,i=e.indexOf("{");if(-1===i)return e;for(var a=!1,s=void 0,l=i+1;l<e.length;l++)switch(e[l]){case"{":i=l,a=!1;break;case'"':case"'":l>0&&"\\"!==e[l-1]&&(a?a&&s===e[l]&&(a=!1):(a=!0,s=e[l]));break;case"}":if(!a){var u=e.substring(i,l+1),c="";try{c=o(u,t)}catch(e){console.warn('An error occurred while rendering "'+u+'": '+e.message),c=u}void 0===c&&(c=""),n+=e.substring(r,i)+c,r=l+1,-1===(i=e.indexOf("{",r))&&(l=e.index)}}return n+e.substring(r)};var r=n(0);function o(e,t){var n=e.substr(1,e.length-2).trim();if(/\s/.test(n)){var o=n.match(/^[^:,]+/)[0],i=t.find(function(e){return e.match.test(o)});if(i){var a=n.replace(o,"");if(":"===a[0]){var s=new Function('return {"'+o+'" '+a+"}")(),l=s[o];return delete s[o],i.render(l,s,n)}if(","===a[0]){var u=new Function("return {"+a.substr(1)+"}")();return i.render(null,u,n)}if(""===a)return i.render(null,{},n)}}else{var c=/(.+)\[(.+)\]$/.exec(n),f=void 0;if(void 0!==(f=c?(0,r.get)(c[1])[c[2]]:(0,r.get)(n)))return f}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=e.volume,o=t-r,i=void 0,a=0;return new Promise(function(t){return window.requestAnimationFrame(function(s){i=s,window.requestAnimationFrame(function s(l){a+=l-i;e.volume=function(e,t,n,r){if((e/=r/2)<1)return n/2*e*e+t;return-n/2*(--e*(e-2)-1)+t}(a,r,o,n);a<n?(i=l,window.requestAnimationFrame(s)):t()})})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,r.default)(u.setLookup),(0,o.default)(u.setLookup),(0,i.default)(u.setLookup),(0,a.default)(u.setLookup),(0,s.default)(u.setLookup),(0,l.default)(u.setLookup)};var r=c(n(101)),o=c(n(102)),i=c(n(104)),a=c(n(105)),s=c(n(24)),l=c(n(115)),u=n(0);function c(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e("browser.height",function(){return window.innerHeight}),e("browser.online",function(){return window.navigator.onLine}),e("browser.width",function(){return window.innerWidth})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e("engine.version",function(){return i.default.version})};var r,o=n(103),i=(r=o)&&r.__esModule?r:{default:r}},function(e){e.exports={name:"Chapbook",author:"Chris Klimas <chris@twinery.org>",description:'A Twine story format emphasizing ease of authoring, multimedia, and playability on many different types of devices. Visit the <a href="https://klembot.github.io/chapbook/guide/">guide</a> for more information.',version:"1.2.1",main:"index.js",license:"MIT",devDependencies:{"@commitlint/cli":"^8.3.5","@commitlint/config-conventional":"^8.3.4","babel-core":"^6.26.0","babel-loader":"^7.1.4","babel-preset-env":"^1.6.1","babel-preset-preact":"^1.1.0","child-process-promise":"^2.2.1",cpy:"^7.2.0","cpy-cli":"^2.0.0","cross-env":"^5.2.0","css-loader":"^0.28.11",eslint:"^4.14.0","eslint-config-prettier":"^6.11.0","gitbook-cli":"^2.3.2","html-webpack-plugin":"^3.2.0",husky:"^4.2.5",jest:"^24.7.1","jest-localstorage-mock":"^2.2.0",jsdoc:"^3.6.2","jstransformer-marked":"^1.0.3","lodash.escape":"^4.0.1","mini-css-extract-plugin":"^0.4.0","mock-local-storage":"^1.0.5","node-sass":"^4.12.0","npm-run-all":"^4.1.3",prettier:"^2.0.5",pug:"^2.0.3",rimraf:"^2.6.3","rollup-plugin-uglify":"^3.0.0","sass-loader":"^7.0.3","title-case":"^2.1.1","twine-utils":"^1.2.6","url-loader":"^1.1.2",webpack:"^4.28.2","webpack-cli":"^3.1.2","webpack-dev-server":"^3.1.12",yargs:"^11.0.0"},dependencies:{closest:"^0.0.1","get-value":"^3.0.1","lodash.unescape":"^4.0.1",marked:"^1.2.7",nanobus:"^4.3.3","open-color":"^1.6.3",preact:"^8.2.9","pure-color":"^1.3.0",seedrandom:"^2.4.3","set-value":"^3.0.1","split-lines":"^1.1.0",timestring:"^5.0.0","unset-value":"^1.0.0"},scripts:{start:"webpack-dev-server",build:"npm-run-all --parallel build:main build:micro --serial build:format clean","build:format":"node scripts/build-format.js","build:main":"cross-env NODE_ENV=production webpack","build:micro":"cross-env NODE_ENV=production CHAPBOOK_MICRO=y webpack",clean:"rimraf dist/full; rimraf dist/micro",examples:"node scripts/build-examples.js",guide:"gitbook serve guide","guide:init":"cd guide && gitbook install && cd ..","guide:release":"cd guide && gitbook build",lint:"eslint src/",prettier:'prettier --write "src/**/*.{js,scss}"',release:"run-s -l build examples guide:release website",test:"jest","test:watch":"jest --watch","test:coverage":"jest --coverage",website:"node scripts/build-website.js"},config:{commitizen:{path:"cz-conventional-changelog"}},husky:{hooks:{"commit-msg":"commitlint -E HUSKY_GIT_PARAMS"}},jest:{setupFiles:["jest-localstorage-mock"]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e("now.second",function(){return(new Date).getSeconds()}),e("now.minute",function(){return(new Date).getMinutes()}),e("now.hour",function(){return(new Date).getHours()}),e("now.day",function(){return(new Date).getDate()}),e("now.weekday",function(){return(new Date).getDay()+1}),e("now.weekdayName",function(){return(new Date).toLocaleString(navigator.language,{weekday:"long"})}),e("now.month",function(){return(new Date).getMonth()+1}),e("now.monthName",function(){return(new Date).toLocaleString(navigator.language,{month:"long"})}),e("now.year",function(){return(new Date).getFullYear()}),e("now.timestamp",function(){return(new Date).toLocaleString(navigator.language,{hour:"numeric",minute:"numeric",second:"numeric"})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e("passage.name",function(){var e=(0,r.get)("trail");if(e)return e[e.length-1]}),e("passage.visits",function(){var e=(0,r.get)("trail"),t=(0,r.get)("passage.name");if(e)return e.reduce(function(e,n){return n===t?e+1:e},0)})};var r=n(0)},function(e,t,n){var r=n(107),o=n(108),i=n(109),a=n(110),s=n(111),l=n(112),u=n(113);u.alea=r,u.xor128=o,u.xorwow=i,u.xorshift7=a,u.xor4096=s,u.tychei=l,e.exports=u},function(e,t,n){(function(e){var r;!function(e,o,i){function a(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var n=new a(e),r=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+1.1102230246251565e-16*(2097152*o()|0)},o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n(3)&&n(9)?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.alea=l}(0,e,n(3))}).call(this,n(8)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function a(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n(3)&&n(9)?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.xor128=l}(0,e,n(3))}).call(this,n(8)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function a(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n(3)&&n(9)?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.xorwow=l}(0,e,n(3))}).call(this,n(8)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function a(e){var t=this;t.next=function(){var e,n,r=t.x,o=t.i;return e=r[o],n=(e^=e>>>7)^e<<24,n^=(e=r[o+1&7])^e>>>10,n^=(e=r[o+3&7])^e>>>3,n^=(e=r[o+4&7])^e<<7,e=r[o+7&7],n^=(e^=e<<13)^e<<9,r[o]=n,t.i=o+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.x&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n(3)&&n(9)?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.xorshift7=l}(0,e,n(3))}).call(this,n(8)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function a(e){var t=this;t.next=function(){var e,n,r=t.w,o=t.X,i=t.i;return t.w=r=r+1640531527|0,n=o[i+34&127],e=o[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=o[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,o,i,a,s=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),o=0,i=-32;i<l;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(a=a+1640531527|0,o=0==(n=s[127&i]^=r+a)?o+1:0);for(o>=128&&(s[127&(t&&t.length||0)]=-1),o=127,i=512;i>0;--i)r=s[o+34&127],n=s[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[o]=r^n;e.w=a,e.X=s,e.i=o}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.X&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n(3)&&n(9)?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.xor4096=l}(0,e,n(3))}).call(this,n(8)(e))},function(e,t,n){(function(e){var r;!function(e,o,i){function a(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,o=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n(3)&&n(9)?void 0===(r=function(){return l}.call(t,n,t,o))||(o.exports=r):this.tychei=l}(0,e,n(3))}).call(this,n(8)(e))},function(e,t,n){var r;!function(o,i){var a,s=(0,eval)("this"),l=256,u=6,c="random",f=i.pow(l,u),d=i.pow(2,52),p=2*d,h=l-1;function g(e,t,n){var r=[],h=b(function e(t,n){var r,o=[],i=typeof t;if(n&&"object"==i)for(r in t)try{o.push(e(t[r],n-1))}catch(e){}return o.length?o:"string"==i?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(o)]:null==e?function(){try{var e;return a&&(e=a.randomBytes)?e=e(l):(e=new Uint8Array(l),(s.crypto||s.msCrypto).getRandomValues(e)),y(e)}catch(e){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,y(o)]}}():e,3),r),g=new v(r),k=function(){for(var e=g.g(u),t=f,n=0;e<d;)e=(e+n)*l,t*=l,n=g.g(1);for(;e>=p;)e/=2,t/=2,n>>>=1;return(e+n)/t};return k.int32=function(){return 0|g.g(4)},k.quick=function(){return g.g(4)/4294967296},k.double=k,b(y(g.S),o),(t.pass||n||function(e,t,n,r){return r&&(r.S&&m(r,g),e.state=function(){return m(g,{})}),n?(i[c]=e,t):e})(k,h,"global"in t?t.global:this==i,t.state)}function v(e){var t,n=e.length,r=this,o=0,i=r.i=r.j=0,a=r.S=[];for(n||(e=[n++]);o<l;)a[o]=o++;for(o=0;o<l;o++)a[o]=a[i=h&i+e[o%n]+(t=a[o])],a[i]=t;(r.g=function(e){for(var t,n=0,o=r.i,i=r.j,a=r.S;e--;)t=a[o=h&o+1],n=n*l+a[h&(a[o]=a[i=h&i+t])+(a[i]=t)];return r.i=o,r.j=i,n})(l)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function b(e,t){for(var n,r=e+"",o=0;o<r.length;)t[h&o]=h&(n^=19*t[h&o])+r.charCodeAt(o++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(i["seed"+c]=g,b(i.random(),o),e.exports){e.exports=g;try{a=n(114)}catch(e){}}else void 0===(r=function(){return g}.call(t,n,t,e))||(e.exports=r)}([],Math)},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e("story.name",r.name)};var r=n(6)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){[r.defaults,o.defaults,i.defaults,a.defaults,s.defaults,l.defaults,u.defaults].forEach(function(e){return Object.keys(e).forEach(function(t){"function"==typeof e[t]?(0,s.setDefault)(t,e[t]()):(0,s.setDefault)(t,e[t])})})};var r=n(12),o=n(4),i=n(24),a=n(23),s=n(0),l=n(25),u=n(11)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){l.dataset.cbGoogleFontLoader="",l.setAttribute("hidden",!0),u.dataset.cbTypekitFontLoader="",u.setAttribute("hidden",!0),c.dataset.cbUrlFontLoader="",c.setAttribute("hidden",!0),document.body.appendChild(l),document.body.appendChild(u),document.body.appendChild(c),o.default.on("state-change",function(e){var t=e.name,n="config"===t||"config.style"===t||"config.style.fonts"===t;if(n){var r=(0,i.get)("config.style.fonts");if(!r)return;Object.keys(r).forEach(function(e){var t=r[e].name,n=r[e].url;t&&n&&d(e,n,t)})}else{var o=t.match(/^config\.style\.fonts\.([^.]+)/i);if(o){var a=o[1],c=(0,i.get)("config.style.fonts."+a+".name"),f=(0,i.get)("config.style.fonts."+a+".url");return void(f&&c&&(s("Adding font from URL ("+c+")"),d(a,f,c)))}}(0,i.sameObject)(t,"config.style.googleFont")&&(s("Adding Google font"),l.innerHTML=(0,i.get)("config.style.googleFont")),(0,i.sameObject)(t,"config.style.typekitFont")&&(s("Adding Typekit font"),u.innerHTML=(0,i.get)("config.style.typekitFont"))})};var r=a(n(4)),o=a(n(1)),i=n(0);function a(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.default)("style").log,l=document.createElement("div"),u=document.createElement("div"),c=document.createElement("div"),f={};function d(e,t,n){var r=t.match(/\.(.+)$/);if(r&&r[1]){var o=r[1],i=f[e]||document.createElement("style");i.dataset.cbFontLoader=e,i.innerHTML='@font-face { font-family: "'+n+'"; src: url("'+t+'") format("'+o+'"); }',i.parentNode||c.appendChild(i)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autopx=function(e){if("number"==typeof e)return e+"px";return e},t.parseColorValue=s,t.parseColor=function(e){if(void 0===e)return{"background-color":"inherit",color:"inherit"};if("string"!=typeof e)throw new Error("Only strings can be parsed as colors.");var t={color:"inherit","background-color":"inherit"},n=e.split(/ on /i);t.color=s(n[0].trim().toLowerCase()),2===n.length&&(t["background-color"]=s(n[1].trim().toLowerCase()));return t},t.parseFont=function(e){var t={"font-family":"inherit","font-size":"inherit","font-style":"inherit","font-weight":"inherit","letter-spacing":"inherit","text-decoration":"inherit","text-transform":"inherit"};if(void 0===e)return t;if("string"!=typeof e)throw new Error("Only strings can be parsed as fonts.");function n(e,t){e["font-family"]=t.split("/").map(function(e){var t=e;return'"'!==t[0]&&(t='"'+t),'"'!==t[t.length-1]&&(t+='"'),t}).join(",")}function r(e){e["font-weight"]="bold"}function o(e){e["font-style"]="italic"}function i(e){e["font-style"]="none",e["font-weight"]="normal",e["letter-spacing"]="normal",e["text-decoration"]="none",e["text-transform"]="none"}function a(e){e["letter-spacing"]="0.075em",e["text-transform"]="uppercase",e["font-size"]&&"inherit"!==e["font-size"]?e["font-size"]="calc(0.7 * "+e["font-size"]+")":e["font-size"]="70%"}function s(e){e["text-decoration"]="underline"}var l=/\b\d+(?:\.\d+)?(ch|cm|ex|in|mm|pc|pt|px|r?em|vh|vmax|vmin|vw|%)?/i.exec(e);if(l){/^\d+$/.test(l[0])?t["font-size"]=l[0]+"px":t["font-size"]=l[0],0!==l.index&&n(t,e.substr(0,l.index).trim());var u=e.substr(l.index);/\bregular\b/i.test(u)?(t["font-style"]="none",t["font-weight"]="normal",t["letter-spacing"]="normal",t["text-decoration"]="none",t["text-transform"]="none"):(/\bbold\b/.test(u)&&r(t),/\bitalics?\b/.test(u)&&o(t),/\bunderlined?/.test(u)&&s(t),/\bsmall caps?\b/.test(u)&&a(t))}else{for(var c=void 0,f=e;c=/(bold|italics?|regular|small caps|underlined?)$/.exec(f);){switch(c[0]){case"bold":r(t);break;case"italic":case"italics":o(t);break;case"regular":i(t);break;case"small caps":a(t);break;case"underline":case"underlined":s(t)}f=f.substr(0,c.index).trim()}""!==f.trim()&&n(t,f)}return t};var r=a(n(119)),o=a(n(120)),i=a(n(125));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){if("string"!=typeof e)throw new Error("Only strings can be parsed as color values.");r.default[e]&&(e=Array.isArray(r.default[e])?r.default[e][r.default[e].length-1]:r.default[e]);var t=/^(\w+)-(\d)$/.exec(e);t&&r.default[t[1]]&&(e=r.default[t[1]][t[2]]);var n=(0,o.default)(e),a=(0,i.default)(n);return a[3]=void 0!==n[3]?n[3]:1,"hsla("+a[0]+", "+a[1]+"%, "+a[2]+"%, "+a[3]+")"}},function(e){e.exports={white:"#ffffff",black:"#000000",gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]}},function(e,t,n){var r=n(121),o=n(122),i=n(123),a=n(124);var s={"#":o,hsl:function(e){var t=r(e),n=a(t);return 4===t.length&&n.push(t[3]),n},rgb:i};function l(e){for(var t in s)if(0===e.indexOf(t))return s[t](e)}l.rgb=i,l.hsl=r,l.hex=o,e.exports=l},function(e,t,n){var r=n(26),o=n(27);function i(e,t){switch(e=parseFloat(e),t){case 0:return o(e,0,360);case 1:case 2:return o(e,0,100);case 3:return o(e,0,1)}}e.exports=function(e){return r(e).map(i)}},function(e,t){e.exports=function(e){4!==e.length&&5!==e.length||(e=function(e){for(var t="#",n=1;n<e.length;n++){var r=e.charAt(n);t+=r+r}return t}(e));var t=[parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16)];if(9===e.length){var n=parseFloat((parseInt(e.substring(7,9),16)/255).toFixed(2));t.push(n)}return t}},function(e,t,n){var r=n(26),o=n(27);function i(e,t){return t<3?-1!=e.indexOf("%")?Math.round(255*o(parseInt(e,10),0,100)/100):o(parseInt(e,10),0,255):o(parseFloat(e),0,1)}e.exports=function(e){return r(e).map(i)}},function(e,t){e.exports=function(e){var t,n,r,o,i,a=e[0]/360,s=e[1]/100,l=e[2]/100;if(0==s)return[i=255*l,i,i];t=2*l-(n=l<.5?l*(1+s):l+s-l*s),o=[0,0,0];for(var u=0;u<3;u++)(r=a+1/3*-(u-1))<0&&r++,r>1&&r--,i=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,o[u]=255*i;return o}},function(e,t){e.exports=function(e){var t,n,r=e[0]/255,o=e[1]/255,i=e[2]/255,a=Math.min(r,o,i),s=Math.max(r,o,i),l=s-a;return s==a?t=0:r==s?t=(o-i)/l:o==s?t=2+(i-r)/l:i==s&&(t=4+(r-o)/l),(t=Math.min(60*t,360))<0&&(t+=360),n=(a+s)/2,[t,100*(s==a?0:n<=.5?l/(s+a):l/(2-s-a)),100*n]}},function(e,t,n){}]);</script></body></html>